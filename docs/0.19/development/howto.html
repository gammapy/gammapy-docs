<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Developer How To &mdash; gammapy v0.19</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/plot_directive.css" type="text/css" />
      <link rel="stylesheet" href="../_static/gammapy.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-binder.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-dataframe.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-rendered-html.css" type="text/css" /><link rel="shortcut icon" href="../_static/gammapy_logo.ico"/>
    <link rel="canonical" href="https://docs.gammapy.org/dev/development/howto.html"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/gammapy.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "tex2jax_ignore|mathjax_ignore|document", "processClass": "tex2jax_process|mathjax_process|math|output_area"}})</script>
        <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="PIGs" href="pigs/index.html" />
    <link rel="prev" title="Gammapy project setup" href="setup.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> gammapy
          </a>
              <div class="version">
                0.19
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../overview/analysis.html">Gamma-ray data analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview/package.html">Package Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../overview/package.html#data-access-and-selection-dl3">Data access and selection (DL3)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../overview/package.html#data-reduction-dl3-to-dl4">Data reduction (DL3 to DL4)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../overview/package.html#datasets-dl4">Datasets (DL4)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../overview/package.html#modeling-and-fitting-dl4-to-dl5">Modeling and Fitting (DL4 to DL5)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../overview/package.html#high-level-analysis-interface">High Level Analysis Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../overview/package.html#other">Other</a></li>
<li class="toctree-l3"><a class="reference internal" href="../overview/package.html#what-next">What next?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../overview/dependencies.html">Dependencies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../overview/dependencies.html#required-dependencies">Required dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../overview/dependencies.html#optional-dependencies">Optional dependencies</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/index.html">Getting started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/quickstart.html">Quickstart</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/quickstart.html#installation-using-anaconda">Installation using Anaconda</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/quickstart.html#download-tutorials">Download tutorials</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/quickstart.html#what-next">What next?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/install.html">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/install.html#using-anaconda">Using Anaconda</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/install.html#using-virtual-environments">Using virtual environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/install.html#using-pip">Using pip</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/install.html#using-other-package-managers">Using other package managers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/usage.html">Using Gammapy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/usage.html#jupyter-notebooks">Jupyter notebooks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/usage.html#id2">Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/usage.html#id3">IPython</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/usage.html#python-scripts">Python scripts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/troubleshooting.html">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/troubleshooting.html#check-your-setup">Check your setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/troubleshooting.html#install-issues">Install issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/troubleshooting.html#help">Help!?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/index.html#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/starting/analysis_1.html">High level interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/starting/analysis_2.html">Low level API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/starting/overview.html">Data structures</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/index.html#data-exploration">Data exploration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/data/cta.html">CTA with Gammapy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/data/hess.html">H.E.S.S. with Gammapy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/data/fermi_lat.html">Fermi-LAT with Gammapy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/index.html#data-analysis">Data analysis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/index.html#d-spectral">1D Spectral</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/index.html#d-image">2D Image</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/index.html#d-cube">3D Cube</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/index.html#time">Time</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/index.html#package-api">Package / API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/api/makers.html">Makers - Data reduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/api/catalog.html">Source catalogs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/api/models.html">Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/api/model_management.html">Modelling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/api/fitting.html">Fitting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/api/maps.html">Maps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/api/mask_maps.html">Mask maps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/api/astro_dark_matter.html">Dark matter spatial and spectral models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/api/datasets.html">Datasets - Reduced data, IRFs, models</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/index.html#scripts">Scripts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/survey_map.html">Survey map</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modeling/gallery/index.html">Model gallery</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../modeling/gallery/index.html#spatial-models">Spatial models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/spatial/plot_constant.html">Constant spatial model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/spatial/plot_disk.html">Disk spatial model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/spatial/plot_gauss.html">Gaussian spatial model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/spatial/plot_gen_gauss.html">Generalized gaussian spatial model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/spatial/plot_point.html">Point spatial model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/spatial/plot_shell.html">Shell spatial model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/spatial/plot_shell2.html">Shell2 spatial model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/spatial/plot_template.html">Template spatial model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../modeling/gallery/index.html#spectral-models">Spectral models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/spectral/plot_absorbed.html">EBL absorbption spectral model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/spectral/plot_broken_powerlaw.html">Broken power law spectral model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/spectral/plot_compound.html">Compound spectral model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/spectral/plot_constant_spectral.html">Constant spectral model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/spectral/plot_exp_cutoff_powerlaw.html">Exponential cutoff power law spectral model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/spectral/plot_exp_cutoff_powerlaw_3fgl.html">Exponential cutoff power law spectral model used for 3FGL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/spectral/plot_gauss_spectral.html">Gaussian spectral model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/spectral/plot_logparabola.html">Log parabola spectral model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/spectral/plot_naima.html">Naima spectral model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/spectral/plot_piecewise_norm_spectral.html">Piecewise  norm spectral model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/spectral/plot_powerlaw.html">Power law spectral model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/spectral/plot_powerlaw2.html">Power law 2 spectral model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/spectral/plot_smooth_broken_powerlaw.html">Smooth broken power law spectral model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/spectral/plot_super_exp_cutoff_powerlaw_3fgl.html">Super exponential cutoff power law model used for 3FGL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/spectral/plot_super_exp_cutoff_powerlaw_4fgl.html">Super exponential cutoff power law model used for 4FGL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/spectral/plot_template_spectral.html">Template spectral model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../modeling/gallery/index.html#temporal-models">Temporal models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/temporal/plot_constant_temporal.html">Constant temporal model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/temporal/plot_expdecay_temporal.html">ExpDecay temporal model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/temporal/plot_gaussian_temporal.html">Gaussian temporal model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/temporal/plot_linear_temporal.html">Linear temporal model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/temporal/plot_powerlaw_temporal.html">PowerLaw temporal model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/temporal/plot_sine_temporal.html">Sine temporal model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/gallery/temporal/plot_template_temporal.html">Light curve temporal model</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../howto.html">How-to</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../howto.html#spell-and-pronounce-gammapy">Spell and pronounce Gammapy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto.html#access-iact-dl3-data">Access IACT DL3 data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto.html#select-observations">Select observations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto.html#make-a-on-axis-equivalent-livetime-map">Make a on-axis equivalent livetime map</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto.html#check-irfs">Check IRFs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto.html#model-2d-images">Model 2D images</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto.html#extract-1d-spectra">Extract 1D spectra</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto.html#extract-a-lightcurve">Extract a lightcurve</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto.html#choose-units-for-plotting">Choose units for plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto.html#compute-source-significance">Compute source significance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto.html#compute-cumulative-significance">Compute cumulative significance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto.html#detect-sources-in-a-map">Detect sources in a map</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto.html#astrophysical-source-modeling">Astrophysical source modeling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto.html#implement-a-custom-model">Implement a custom model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto.html#implement-an-energy-dependent-spatial-models">Implement an energy dependent spatial models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto.html#reduce-memory-budget-for-large-datasets">Reduce memory budget for large datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto.html#copy-part-of-a-data-store">Copy part of a data store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto.html#interpolate-maps-onto-a-different-geometry">Interpolate maps onto a different geometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto.html#suppress-warnings">Suppress warnings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../references.html">Glossary and references</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../references.html#glossary">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references.html#publications">References</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references.html#other-gamma-ray-packages">Other gamma-ray packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references.html#other-useful-packages">Other useful packages</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#nov-22nd-2021">0.19 (Nov 22nd, 2021)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#pull-requests">Pull Requests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#nov-19th-2020">0.18.2 (Nov 19th, 2020)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id2">Pull Requests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#nov-6th-2020">0.18.1 (Nov 6th, 2020)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id3">Pull Requests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#nov-4th-2020">0.18 (Nov 4th, 2020)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id4">Pull Requests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#apr-1-2020">0.17 (Apr 1, 2020)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id5">Pull Requests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#feb-1-2020">0.16 (Feb 1, 2020)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id6">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id7">Pull Requests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#dec-3-2019">0.15 (Dec 3, 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id8">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id9">Pull Requests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#sep-30-2019">0.14 (Sep 30, 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id10">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id11">Pull Requests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#jul-26-2019">0.13 (Jul 26, 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id12">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id13">Pull Requests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#may-30-2019">0.12 (May 30, 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id14">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id15">Pull Requests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#mar-29-2019">0.11 (Mar 29, 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id16">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id17">Pull requests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#jan-28-2019">0.10 (Jan 28, 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id18">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id19">Pull requests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#nov-29-2018">0.9 (Nov 29, 2018)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id20">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id21">Pull requests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#sep-23-2018">0.8 (Sep 23, 2018)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id22">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id23">Pull requests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#feb-28-2018">0.7 (Feb 28, 2018)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id24">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id25">Pull requests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#apr-28-2017">0.6 (Apr 28, 2017)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id26">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id27">Pull requests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#nov-22-2016">0.5 (Nov 22, 2016)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id28">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id29">Pull requests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#apr-20-2016">0.4 (Apr 20, 2016)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id30">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id31">Pull requests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#aug-13-2015">0.3 (Aug 13, 2015)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id32">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id33">Pull requests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#apr-13-2015">0.2 (Apr 13, 2015)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id34">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id35">Pull requests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#aug-25-2014">0.1 (Aug 25, 2014)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id36">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id37">Pull requests</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://gammapy.org/news.html#releases">List of releases</a></li>
</ul>
<p class="caption"><span class="caption-text">Gammapy Package</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../analysis/index.html">analysis - High level interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../analysis/index.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analysis/index.html#using-gammapy-analysis">Using <code class="xref py py-obj docutils literal notranslate"><span class="pre">gammapy.analysis</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/starting/analysis_1.html">High level interface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../analysis/index.html#reference-api">Reference/API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../analysis/index.html#module-gammapy.analysis">gammapy.analysis Package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../data/index.html">data - DL3 data access and observations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../data/index.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/index.html#getting-started">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/index.html#the-index-tables">The index tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/index.html#working-with-event-lists">Working with event lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/index.html#combining-event-lists-and-gtis">Combining event lists and GTIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/index.html#writing-event-lists-and-gtis-to-file">Writing event lists and GTIs to file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/index.html#using-gammapy-data">Using <code class="xref py py-obj docutils literal notranslate"><span class="pre">gammapy.data</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/data/cta.html">CTA with Gammapy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/data/hess.html">H.E.S.S. with Gammapy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/data/fermi_lat.html">Fermi-LAT with Gammapy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../data/index.html#reference-api">Reference/API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../data/index.html#module-gammapy.data">gammapy.data Package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../makers/index.html">makers - Data reduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../makers/index.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../makers/index.html#using-gammapy-makers">Using <code class="xref py py-obj docutils literal notranslate"><span class="pre">gammapy.makers</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/api/makers.html">Makers - Data reduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/starting/analysis_2.html">Low level API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/analysis/3D/analysis_3d.html">3D detailed analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/analysis/3D/simulate_3d.html">3D map simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/analysis/1D/spectral_analysis.html">Spectral analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/analysis/1D/spectrum_simulation.html">1D spectrum simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../makers/fov.html">FoV background</a></li>
<li class="toctree-l3"><a class="reference internal" href="../makers/reflected.html">Reflected regions background</a></li>
<li class="toctree-l3"><a class="reference internal" href="../makers/ring.html">Ring background</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../makers/index.html#reference-api">Reference/API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../makers/index.html#module-gammapy.makers">gammapy.makers Package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../datasets/index.html">datasets - Reduced datasets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../datasets/index.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datasets/index.html#types-of-supported-datasets">Types of supported datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datasets/index.html#predicted-counts">Predicted counts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datasets/index.html#stacking-multiple-datasets">Stacking Multiple Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datasets/index.html#joint-analysis">Joint Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datasets/index.html#using-gammapy-datasets">Using <code class="xref py py-obj docutils literal notranslate"><span class="pre">gammapy.datasets</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/api/datasets.html">Datasets - Reduced data, IRFs, models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/api/model_management.html">Modelling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/analysis/1D/sed_fitting.html">Flux point fitting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../datasets/index.html#reference-api">Reference/API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../datasets/index.html#module-gammapy.datasets">gammapy.datasets Package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modeling/index.html">modeling - Models and fitting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../modeling/index.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modeling/index.html#built-in-models">Built-in models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modeling/index.html#using-gammapy-modeling">Using <code class="xref py py-obj docutils literal notranslate"><span class="pre">gammapy.modeling</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/api/models.html">Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/api/fitting.html">Fitting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/api/model_management.html">Modelling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/analysis/3D/analysis_3d.html">3D detailed analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/analysis/1D/spectral_analysis.html">Spectral analysis</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../modeling/index.html#reference-api">Reference/API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../modeling/index.html#module-gammapy.modeling">gammapy.modeling Package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modeling/index.html#module-gammapy.modeling.models">gammapy.modeling.models Package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../estimators/index.html">estimators - High level estimators</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../estimators/index.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../estimators/index.html#getting-started">Getting started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../estimators/index.html#flux-maps">Flux maps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../estimators/index.html#flux-points">Flux points</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../estimators/index.html#using-gammapy-estimators">Using <code class="xref py py-obj docutils literal notranslate"><span class="pre">gammapy.estimators</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/analysis/time/light_curve.html">Light curves</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/analysis/time/light_curve_flare.html">Light curves for flares</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/analysis/2D/detect.html">Source detection and significance maps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/analysis/1D/spectral_analysis.html">Spectral analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/analysis/3D/analysis_3d.html">3D detailed analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/analysis/3D/flux_profiles.html">Flux Profile Estimation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../estimators/index.html#reference-api">Reference/API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../estimators/index.html#module-gammapy.estimators">gammapy.estimators Package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../irf/index.html">irf - Instrument response functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../irf/index.html#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../irf/index.html#irf-axis-naming">IRF axis naming</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../irf/index.html#getting-started">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../irf/index.html#using-gammapy-irf">Using <code class="xref py py-obj docutils literal notranslate"><span class="pre">gammapy.irf</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../irf/theory.html">IRF Theory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../irf/aeff.html">Effective area</a></li>
<li class="toctree-l3"><a class="reference internal" href="../irf/edisp.html">Energy Dispersion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../irf/psf.html">Point Spread Function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../irf/bkg.html">Background</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../irf/index.html#reference-api">Reference/API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../irf/index.html#module-gammapy.irf">gammapy.irf Package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../maps/index.html">maps - Sky maps</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../maps/index.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../maps/index.html#getting-started">Getting started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../maps/index.html#differential-and-integral-maps">Differential and integral maps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../maps/index.html#accessor-methods">Accessor methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="../maps/index.html#interface-with-mapcoord-and-skycoord">Interface with <code class="xref py py-obj docutils literal notranslate"><span class="pre">MapCoord</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">SkyCoord</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../maps/index.html#mapcoord">MapCoord</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../maps/index.html#using-gammapy-maps">Using <code class="xref py py-obj docutils literal notranslate"><span class="pre">gammapy.maps</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/api/maps.html">Maps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/analysis/3D/analysis_3d.html">3D detailed analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/analysis/3D/simulate_3d.html">3D map simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/data/fermi_lat.html">Fermi-LAT with Gammapy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../maps/hpxmap.html">HEALPix-based maps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../maps/regionmap.html">RegionGeom and RegionNDMap</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../maps/index.html#reference-api">Reference/API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../maps/index.html#module-gammapy.maps">gammapy.maps Package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../catalog/index.html">catalog - Source catalogs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../catalog/index.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../catalog/index.html#using-gammapy-catalog">Using <code class="xref py py-obj docutils literal notranslate"><span class="pre">gammapy.catalog</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/api/catalog.html">Source catalogs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/starting/overview.html">Data structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/analysis/1D/sed_fitting.html">Flux point fitting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../catalog/index.html#reference-api">Reference/API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../catalog/index.html#module-gammapy.catalog">gammapy.catalog Package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../astro/index.html">astro - Astrophysics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../astro/index.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../astro/index.html#getting-started">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../astro/index.html#sub-packages">Sub-packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../astro/source/index.html">Astrophysical source models (<code class="xref py py-obj docutils literal notranslate"><span class="pre">gammapy.astro.source</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../astro/population/index.html">Astrophysical source population models (<code class="xref py py-obj docutils literal notranslate"><span class="pre">gammapy.astro.population</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../astro/darkmatter/index.html">Dark matter (<code class="xref py py-obj docutils literal notranslate"><span class="pre">gammapy.astro.darkmatter</span></code>)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../scripts/index.html">scripts - Command line tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../scripts/index.html#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../scripts/index.html#execute">Execute</a></li>
<li class="toctree-l3"><a class="reference internal" href="../scripts/index.html#running-config-driven-data-reduction">Running config driven data reduction</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../scripts/index.html#write-your-own-cli">Write your own CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scripts/index.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../scripts/index.html#command-not-found">Command not found</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../scripts/index.html#reference">Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../scripts/index.html#gammapy">gammapy</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../stats/index.html">stats - Statistics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../stats/index.html#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../stats/index.html#notations">Notations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stats/index.html#counts-and-fit-statistics">Counts and fit statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stats/index.html#estimating-ts">Estimating TS</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../stats/index.html#counts-statistics-classes">Counts statistics classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../stats/index.html#cash-counts-statistic">Cash counts statistic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stats/index.html#wstat-counts-statistic">WStat counts statistic</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../stats/index.html#using-gammapy-stats">Using <code class="xref py py-obj docutils literal notranslate"><span class="pre">gammapy.stats</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../stats/fit_statistics.html">Fit statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stats/wstat_derivation.html">Derivation of the WStat formula</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../stats/index.html#reference-api">Reference/API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../stats/index.html#module-gammapy.stats">gammapy.stats Package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../visualization/index.html">visualization - Plotting and visualization</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../visualization/index.html#getting-started">Getting started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../visualization/index.html#colormaps">Colormaps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../visualization/index.html#survey-panel-plots">Survey panel plots</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../visualization/index.html#reference-api">Reference/API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../visualization/index.html#module-gammapy.visualization">gammapy.visualization Package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../utils/index.html">utils - Utilities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../utils/index.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../utils/index.html#time-handling-in-gammapy">Time handling in Gammapy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../utils/index.html#time-format-and-scale">Time format and scale</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utils/index.html#mission-elapsed-times-met">Mission elapsed times (MET)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utils/index.html#time-differences">Time differences</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../utils/index.html#reference-api">Reference/API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../utils/index.html#module-gammapy.utils.units">gammapy.utils.units Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utils/index.html#module-gammapy.utils.coordinates">gammapy.utils.coordinates Package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utils/index.html#module-gammapy.utils.integrate">gammapy.utils.integrate Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utils/index.html#module-gammapy.utils.interpolation">gammapy.utils.interpolation Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utils/index.html#module-gammapy.utils.table">gammapy.utils.table Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utils/index.html#module-gammapy.utils.fits">gammapy.utils.fits Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utils/index.html#module-gammapy.utils.random">gammapy.utils.random Package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utils/index.html#module-gammapy.utils.regions">gammapy.utils.regions Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utils/index.html#module-gammapy.utils.scripts">gammapy.utils.scripts Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utils/index.html#module-gammapy.utils.testing">gammapy.utils.testing Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utils/index.html#module-gammapy.utils.time">gammapy.utils.time Module</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Developer Documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro.html">How to contribute to Gammapy?</a></li>
<li class="toctree-l2"><a class="reference internal" href="release.html">How to make a Gammapy release</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup.html">Gammapy project setup</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Developer How To</a></li>
<li class="toctree-l2"><a class="reference internal" href="pigs/index.html">PIGs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pigs/pig-001.html">PIG 1 - PIG purpose and guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="pigs/pig-002.html">PIG 2 - Organization of low level analysis code</a></li>
<li class="toctree-l3"><a class="reference internal" href="pigs/pig-003.html">PIG 3 - Plan for dropping Python 2.7 support</a></li>
<li class="toctree-l3"><a class="reference internal" href="pigs/pig-004.html">PIG 4 - Setup for tutorial notebooks and data</a></li>
<li class="toctree-l3"><a class="reference internal" href="pigs/pig-005.html">PIG 5 - Gammapy 1.0 roadmap</a></li>
<li class="toctree-l3"><a class="reference internal" href="pigs/pig-006.html">PIG 6 - CTA observation handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="pigs/pig-007.html">PIG 7 - Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="pigs/pig-008.html">PIG 8 - Datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="pigs/pig-009.html">PIG 9 - Event sampling</a></li>
<li class="toctree-l3"><a class="reference internal" href="pigs/pig-010.html">PIG 10 - Regions</a></li>
<li class="toctree-l3"><a class="reference internal" href="pigs/pig-011.html">PIG 11 - Light curves</a></li>
<li class="toctree-l3"><a class="reference internal" href="pigs/pig-012.html">PIG 12 - High level interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="pigs/pig-013.html">PIG 13 - Gammapy dependencies and distribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="pigs/pig-014.html">PIG 14 - Uncertainty estimation</a></li>
<li class="toctree-l3"><a class="reference internal" href="pigs/pig-016.html">PIG 16 - Gammapy package structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="pigs/pig-018.html">PIG 18 - Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="pigs/pig-019.html">PIG 19 - Gammapy package structure follow up</a></li>
<li class="toctree-l3"><a class="reference internal" href="pigs/pig-020.html">PIG 20 - Global Model API</a></li>
<li class="toctree-l3"><a class="reference internal" href="pigs/pig-021.html">PIG 21 - Models improvements</a></li>
<li class="toctree-l3"><a class="reference internal" href="pigs/pig-022.html">PIG 22 - Unified flux estimators API</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">gammapy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Developer documentation</a> &raquo;</li>
      <li>Developer How To</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/development/howto.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="developer-how-to">
<span id="dev-howto"></span><h1>Developer How To<a class="headerlink" href="#developer-how-to" title="Permalink to this headline"></a></h1>
<p>This page is a collection of notes for Gammapy contributors and maintainers,
in the form of short How To or Q&amp;A entries.</p>
<div class="section" id="python-version-support">
<span id="dev-python2and3"></span><h2>Python version support<a class="headerlink" href="#python-version-support" title="Permalink to this headline"></a></h2>
<p>In Gammapy we currently support Python 3.7 or later.</p>
</div>
<div class="section" id="where-should-i-import-from">
<span id="dev-import"></span><h2>Where should I import from?<a class="headerlink" href="#where-should-i-import-from" title="Permalink to this headline"></a></h2>
<p>You should import from the end-user namespaces, not the implementation module.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gammapy.data</span> <span class="kn">import</span> <span class="n">EventList</span>  <span class="c1"># good</span>
<span class="kn">from</span> <span class="nn">gammapy.data.event_list</span> <span class="kn">import</span> <span class="n">EventList</span> <span class="c1"># bad</span>

<span class="kn">from</span> <span class="nn">gammapy.stats</span> <span class="kn">import</span> <span class="n">cash</span>  <span class="c1"># good</span>
<span class="kn">from</span> <span class="nn">gammapy.stats.fit_statistics</span> <span class="kn">import</span> <span class="n">cash</span>  <span class="c1"># bad</span>
</pre></div>
</div>
<p>The end-user namespace is the location that is shown in the API docs, i.e. you can
use the Sphinx full-text search to quickly find it.</p>
<p>To make code maintenance easier, the implementation of the functions and classes is
spread across multiple modules (<code class="docutils literal notranslate"><span class="pre">.py</span></code> files), but the user shouldnt care about their
names, that would be too much to remember.</p>
<p>The only reason to import from a module directly is if you need to access a private
function, class or variable (something that is not listed in <code class="docutils literal notranslate"><span class="pre">__all__</span></code> and thus not
imported into the end-user namespace.</p>
<p>Note that this means that in the definition of an end-user namespace, e.g. in the
<code class="docutils literal notranslate"><span class="pre">gammapy/data/__init__.py</span></code> file, the imports have to be sorted in a way such that
modules in <code class="docutils literal notranslate"><span class="pre">gammapy/data</span></code> are loaded when imported from other modules in that sub-package.</p>
</div>
<div class="section" id="functions-returning-several-values">
<span id="dev-result-object"></span><h2>Functions returning several values<a class="headerlink" href="#functions-returning-several-values" title="Permalink to this headline"></a></h2>
<p>It is up to the developer to decide how to return multiple things from functions and methods.
For up to three things, if callers usually will want access to several things,
using a <code class="docutils literal notranslate"><span class="pre">tuple</span></code> or <code class="docutils literal notranslate"><span class="pre">collections.namedtuple</span></code> is OK.
For three or more things, using a Python <code class="docutils literal notranslate"><span class="pre">dict</span></code> instead should be preferred.</p>
</div>
<div class="section" id="check-python-code-present-in-rst-files">
<h2>Check Python code present in RST files<a class="headerlink" href="#check-python-code-present-in-rst-files" title="Permalink to this headline"></a></h2>
<p>Most of the documentation of Gammapy is present in RST files that are converted into HTML pages with
Sphinx during the build documentation process. You may include snippets of Python code in these RST files
within blocks labelled with <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">code-block::</span> <span class="pre">python</span></code> Sphinx directive. However this code could not be
tested and it will not be possible to know if it fails in following versions of Gammapy. Thats why we
recommend to use the <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">testcode::</span></code> directive to enclose code that will be tested against the results
present in a block labelled with <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">testoutput::</span></code> directive. If not <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">testoutput::</span></code> directive is provided,
only execution tests will be performed.</p>
<p>For example, we could check that the code below does not fail, since it does not provide any output.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>.. testcode::

    from gammapy.astro import source
    from gammapy.astro import population
    from gammapy.astro import darkmatter
</pre></div>
</div>
<p>On the contrary, we could check the execution of the following code as well as the output values produced.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>.. testcode::

    from astropy.time import Time
    time = Time([&#39;1999-01-01T00:00:00.123456789&#39;, &#39;2010-01-01T00:00:00&#39;])
    print(time.mjd)

.. testoutput::

    [51179.00000143 55197.        ]
</pre></div>
</div>
<p>In order to perform tests of these snippets of code present in RST files, you may run the following command.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest --doctest-glob<span class="o">=</span><span class="s2">&quot;*.rst&quot;</span> docs/
</pre></div>
</div>
</div>
<div class="section" id="check-python-code-present-in-docstrings-of-python-files">
<h2>Check Python code present in docstrings of Python files<a class="headerlink" href="#check-python-code-present-in-docstrings-of-python-files" title="Permalink to this headline"></a></h2>
<p>It is also advisable to add code snippets within the docstrings of the classes and functions present in Python files.
These snippets show how to use the function or class that is documented, and are written in the docstrings using the
following syntax.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Examples
--------
&gt;&gt;&gt; from astropy.units import Quantity
&gt;&gt;&gt; from gammapy.data import EventList
&gt;&gt;&gt; event_list = EventList.read(&#39;events.fits&#39;) # doctest: +SKIP
</pre></div>
</div>
<p>In the case above, we could check the execution of the first two lines importing the <code class="docutils literal notranslate"><span class="pre">Quantity</span></code> and <code class="docutils literal notranslate"><span class="pre">EventList</span></code>
modules, whilst the third line will be skipped. On the contrary, in the example below we could check the execution of
the code as well as the output value produced.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Examples
--------
&gt;&gt;&gt; from regions import Regions
&gt;&gt;&gt; regions = Regions.parse(&quot;galactic;circle(10,20,3)&quot;, format=&quot;ds9&quot;)
&gt;&gt;&gt; print(regions[0])
Region: CircleSkyRegion
center: &lt;SkyCoord (Galactic): (l, b) in deg
    (10., 20.)&gt;
radius: 3.0 deg
</pre></div>
</div>
<p>In order to perform tests of these snippets of code present in the docstrings of the Python files, you may run the
following command.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest --doctest-modules --ignore-glob<span class="o">=</span>*/tests gammapy
</pre></div>
</div>
</div>
<div class="section" id="skip-unit-tests-for-some-astropy-versions">
<span id="dev-skip-tests"></span><h2>Skip unit tests for some Astropy versions<a class="headerlink" href="#skip-unit-tests-for-some-astropy-versions" title="Permalink to this headline"></a></h2>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">astropy</span>
<span class="kn">import</span> <span class="nn">pytest</span>

<span class="n">ASTROPY_VERSION</span> <span class="o">=</span> <span class="p">(</span><span class="n">astropy</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">major</span><span class="p">,</span> <span class="n">astropy</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">minor</span><span class="p">)</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span><span class="p">(</span><span class="n">ASTROPY_VERSION</span> <span class="o">&lt;</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;Astropy API change&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_something</span><span class="p">():</span>
   <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="assert-convention">
<h2>Assert convention<a class="headerlink" href="#assert-convention" title="Permalink to this headline"></a></h2>
<p>When performing tests, the preferred numerical assert method is
<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.testing.assert_allclose.html#numpy.testing.assert_allclose" title="(in NumPy v1.21)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.testing.assert_allclose</span></code></a>. Use</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">numpy.testing</span> <span class="kn">import</span> <span class="n">assert_allclose</span>
</pre></div>
</div>
<p>at the top of the file and then just use <code class="docutils literal notranslate"><span class="pre">assert_allclose</span></code> for
the tests. This makes the lines shorter, i.e. there is more space
for the arguments.</p>
<p><code class="docutils literal notranslate"><span class="pre">assert_allclose</span></code> covers all use cases for numerical asserts, so
it should be used consistently everywhere instead of using the
dozens of other available asserts from pytest or numpy in various
places.</p>
<p>For assertions on <a class="reference external" href="https://docs.astropy.org/en/latest/api/astropy.units.Quantity.html#astropy.units.Quantity" title="(in Astropy v5.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Quantity</span></code></a> objects, you can do this
to assert on the unit and value separately:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">numpy.testing</span> <span class="kn">import</span> <span class="n">assert_allclose</span>
<span class="kn">import</span> <span class="nn">astropy.units</span> <span class="k">as</span> <span class="nn">u</span>

<span class="n">actual</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span>
<span class="k">assert</span> <span class="n">actual</span><span class="o">.</span><span class="n">unit</span> <span class="o">==</span> <span class="s1">&#39;deg&#39;</span>
<span class="n">assert_allclose</span><span class="p">(</span><span class="n">actual</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="mf">0.33333333</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that  <a class="reference external" href="https://docs.astropy.org/en/latest/api/astropy.units.Quantity.html#astropy.units.Quantity" title="(in Astropy v5.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Quantity</span></code></a> can be compared to unit strings directly.
Also note that the default for <code class="docutils literal notranslate"><span class="pre">assert_allclose</span></code> is <code class="docutils literal notranslate"><span class="pre">atol=0</span></code> and <code class="docutils literal notranslate"><span class="pre">rtol=1e-7</span></code>,
so when using it, you have to give the reference value with a precision of
<code class="docutils literal notranslate"><span class="pre">rtol</span> <span class="pre">~</span> <span class="pre">1e-8</span></code>, i.e. 8 digits to be on the safe side (or pass a lower <code class="docutils literal notranslate"><span class="pre">rtol</span></code> or set an <code class="docutils literal notranslate"><span class="pre">atol</span></code>).</p>
<p>The use of <a class="reference external" href="https://docs.astropy.org/en/latest/api/astropy.tests.helper.assert_quantity_allclose.html#astropy.tests.helper.assert_quantity_allclose" title="(in Astropy v5.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assert_quantity_allclose</span></code></a> is discouraged,
because it only requires that the values match after unit conversions.
This is not so bad, but units in test cases should not change randomly,
so asserting on unit and value separately establishes more behaviour.</p>
<p>If you dont like the two separate lines, you can use <a class="reference internal" href="../api/gammapy.utils.testing.assert_quantity_allclose.html#gammapy.utils.testing.assert_quantity_allclose" title="gammapy.utils.testing.assert_quantity_allclose"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gammapy.utils.testing.assert_quantity_allclose</span></code></a>,
which does assert that units are equal, and calls <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.testing.assert_equal.html#numpy.testing.assert_equal" title="(in NumPy v1.21)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.testing.assert_equal</span></code></a> for the values.</p>
</div>
<div class="section" id="testing-of-plotting-functions">
<h2>Testing of plotting functions<a class="headerlink" href="#testing-of-plotting-functions" title="Permalink to this headline"></a></h2>
<p>Many of the data classes in Gammapy implement <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> or <code class="docutils literal notranslate"><span class="pre">.peek()</span></code> methods to
allow users a quick look in the data. Those methods should be tested using the
<code class="xref py py-obj docutils literal notranslate"><span class="pre">mpl_check_plot()</span></code> context manager. The context manager will take care of creating
a new figure to plot on and writing the plot to a byte-stream to trigger the
rendering of the plot, which can raise errors as well. Here is a short example:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gammapy.utils.testing</span> <span class="kn">import</span> <span class="n">mpl_plot_check</span>

<span class="k">def</span> <span class="nf">test_plot</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">mpl_plot_check</span><span class="p">():</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">,</span> <span class="mf">4.</span><span class="p">,</span> <span class="mf">5.</span><span class="p">])</span>
</pre></div>
</div>
<p>With this approach we make sure that the plotting code is at least executed once
and runs completely (up to saving the plot to file) without errors. In future we
will maybe change to something like <a class="reference external" href="https://github.com/matplotlib/pytest-mpl">https://github.com/matplotlib/pytest-mpl</a>
to ensure that correct plots are produced.</p>
</div>
<div class="section" id="making-a-pull-request-with-new-or-modified-datasets">
<h2>Making a pull request with new or modified datasets<a class="headerlink" href="#making-a-pull-request-with-new-or-modified-datasets" title="Permalink to this headline"></a></h2>
<p>Datasets used in tests are hosted in the <a class="reference external" href="https://github.com/gammapy/gammapy-data">gammapy-data</a> Github
repository. It is recommended that developers have <code class="xref py py-obj docutils literal notranslate"><span class="pre">$GAMMAPY_DATA</span></code> environment variable pointing to the local folder
where they have fetched the <a class="reference external" href="https://github.com/gammapy/gammapy-data">gammapy-data</a>  Github repository,
so they can push and pull eventual modification of its content.</p>
</div>
<div class="section" id="making-a-pull-request-which-skips-github-actions">
<h2>Making a pull request which skips GitHub Actions<a class="headerlink" href="#making-a-pull-request-which-skips-github-actions" title="Permalink to this headline"></a></h2>
<p>For minor PRs (eg: correcting typos in doc-strings) we can skip GitHub Actions.
Adding <code class="docutils literal notranslate"><span class="pre">[ci</span> <span class="pre">skip]</span></code> in a specific commit message will skip CI for that specific commit which can be useful for draft or incomplete PR.
For details, <a class="reference external" href="https://github.blog/changelog/2021-02-08-github-actions-skip-pull-request-and-push-workflows-with-skip-ci/">see here.</a></p>
</div>
<div class="section" id="fix-non-unix-line-endings">
<h2>Fix non-Unix line endings<a class="headerlink" href="#fix-non-unix-line-endings" title="Permalink to this headline"></a></h2>
<p>In the past we had non-Unix (i.e. Mac or Windows) line endings in some files.
This can be painful, e.g. git diff and autopep8 behave strangely.
Heres to commands to check for and fix this (see <a class="reference external" href="http://stackoverflow.com/a/22521008/498873">here</a>):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git clean -fdx
$ find . -type f -print0 <span class="p">|</span> xargs -0 -n <span class="m">1</span> -P <span class="m">4</span> dos2unix -c mac
$ find . -type f -print0 <span class="p">|</span> xargs -0 -n <span class="m">1</span> -P <span class="m">4</span> dos2unix -c ascii
$ git status
$ <span class="nb">cd</span> astropy_helpers <span class="o">&amp;&amp;</span> git checkout -- . <span class="o">&amp;&amp;</span> <span class="nb">cd</span> ..
</pre></div>
</div>
</div>
<div class="section" id="what-checks-and-conversions-should-i-do-for-inputs">
<h2>What checks and conversions should I do for inputs?<a class="headerlink" href="#what-checks-and-conversions-should-i-do-for-inputs" title="Permalink to this headline"></a></h2>
<p>In Gammapy we assume that
<a class="reference external" href="https://mail.python.org/pipermail/tutor/2003-October/025932.html">were all consenting adults</a>,
which means that when you write a function you should write it like this:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">do_something</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">option</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Do something.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : `numpy.ndarray`</span>
<span class="sd">        Data</span>
<span class="sd">    option : {&#39;this&#39;, &#39;that&#39;}</span>
<span class="sd">        Option</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">option</span> <span class="o">==</span> <span class="s1">&#39;this&#39;</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">data</span>
    <span class="k">elif</span> <span class="n">option</span> <span class="o">==</span> <span class="s1">&#39;that&#39;</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">data</span> <span class="o">**</span> <span class="mi">5</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Invalid option: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">option</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">out</span>
</pre></div>
</div>
<ul>
<li><p><strong>Dont always add `isinstance` checks for everything</strong>  assume the caller passes valid inputs,
 in the example above this is not needed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">option</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>Dont always add `numpy.asanyarray` calls for all array-like inputs</strong>  the caller can do this if
its really needed  in the example above document <code class="docutils literal notranslate"><span class="pre">data</span></code> as type <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.21)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ndarray</span></code></a>
instead of array-like and dont put this line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asanyarray</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>Do always add an `else` clause to your `if`-`elif` clauses</strong>  this is boilerplate code,
but not adding it would mean users get this error if they pass an invalid option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">UnboundLocalError</span><span class="p">:</span> <span class="n">local</span> <span class="n">variable</span> <span class="s1">&#39;out&#39;</span> <span class="n">referenced</span> <span class="n">before</span> <span class="n">assignment</span>
</pre></div>
</div>
</li>
</ul>
<p>Now if you really want, you can add the <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.asanyarray.html#numpy.asanyarray" title="(in NumPy v1.21)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.asanyarray</span></code></a> and <a class="reference external" href="https://docs.python.org/3/library/functions.html#isinstance" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">isinstance</span></code></a> checks
for functions that end-users might often use for interactive work to provide them with
better exception messages, but doing it everywhere would mean 1000s of lines of boilerplate
code and take the fun out of Python programming.</p>
</div>
<div class="section" id="float-data-type-32-bit-or-64-bit">
<h2>Float data type: 32 bit or 64 bit?<a class="headerlink" href="#float-data-type-32-bit-or-64-bit" title="Permalink to this headline"></a></h2>
<p>Most of the time what we want is to use 32 bit to store data on disk and 64 bit to do
computations in memory.</p>
<p>Using 64 bit to store data and results (e.g. large images or cubes) on disk would mean
a factor ~2 increase in file sizes and slower I/O, but Im not aware of any case
where we need that precision.</p>
<p>On the other hand, doing computations with millions and billions of pixels very frequently
results in inaccurate results  e.g. the likelihood is the sum over per-pixel likelihoods
and using 32-bit will usually result in erratic and hard-to-debug optimizer behaviour
and even if the fit works incorrect results.</p>
<p>Now you shouldnt put this line at the top of every function  assume the caller
passes 64-bit data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asanyarray</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>But you should add explicit type conversions to 64 bit when reading float data from files
and explicit type conversions to 32 bit before writing to file.</p>
</div>
<div class="section" id="clobber-or-overwrite">
<h2>Clobber or overwrite?<a class="headerlink" href="#clobber-or-overwrite" title="Permalink to this headline"></a></h2>
<p>In Gammapy we consistently use an <code class="docutils literal notranslate"><span class="pre">overwrite</span></code> bool option for <code class="xref py py-obj docutils literal notranslate"><span class="pre">gammapy.scripts</span></code> and functions that
write to files. This is in line with Astropy, which had a mix of <code class="docutils literal notranslate"><span class="pre">clobber</span></code> and <code class="docutils literal notranslate"><span class="pre">overwrite</span></code> in
the past, and has switched to uniform <code class="docutils literal notranslate"><span class="pre">overwrite</span></code> everywhere.</p>
<p>The default value should be <code class="docutils literal notranslate"><span class="pre">overwrite=False</span></code>, although we note that this decision was very
controversial, several core developers would prefer to use <code class="docutils literal notranslate"><span class="pre">overwrite=True</span></code>.
For discussion on this, see <a class="reference external" href="https://github.com/gammapy/gammapy/issues/1396">GH 1396</a>.</p>
</div>
<div class="section" id="pixel-coordinate-convention">
<h2>Pixel coordinate convention<a class="headerlink" href="#pixel-coordinate-convention" title="Permalink to this headline"></a></h2>
<p>All code in Gammapy should follow the Astropy pixel coordinate convention that the center of the first pixel
has pixel coordinates <code class="docutils literal notranslate"><span class="pre">(0,</span> <span class="pre">0)</span></code> (and not <code class="docutils literal notranslate"><span class="pre">(1,</span> <span class="pre">1)</span></code> as shown e.g. in ds9).</p>
<p>You should use <code class="docutils literal notranslate"><span class="pre">origin=0</span></code> when calling any of the pixel to world or world to pixel coordinate transformations in <a class="reference external" href="https://docs.astropy.org/en/latest/wcs/reference_api.html#module-astropy.wcs" title="(in Astropy v5.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.wcs</span></code></a>.</p>
</div>
<div class="section" id="performance">
<h2>Performance<a class="headerlink" href="#performance" title="Permalink to this headline"></a></h2>
<p>Currently Gammapy is 99% Python and scientific Python code. Most memory used is in Numpy arrays,
since most Gammapy and Astropy objects hold the data in Numpy arrays, and theres some fraction
of memory in Python objects. We have 1% of Cython code, although its not really needed in those
cases, we could rewrite that using just Numpy.</p>
<p>In the future, we plan to benchmark and improve the performance both of our existing code
(e.g. avoid temp copies of Numpy arrays, better algorithms), and also to introduce parallel
execution that can take advantage of multi-core CPUs (and maybe even multiple machines).
Theres many options how to do that, e.g. using Numba, Cython, Dask, Ray, multiprocessing
to name a few. Also, parallelism can be introduced for different tasks and at different levels,
e.g. during data reduction, or at the dataset or model component or at the function level.
This is planned for 2020, but really prototyping and pull requests on performance are welcome
any time.</p>
</div>
<div class="section" id="caplog-fixture">
<span id="dev-random"></span><h2>Caplog fixture<a class="headerlink" href="#caplog-fixture" title="Permalink to this headline"></a></h2>
<p>Inside tests, we have the possibility to change the log level for the captured
log messages using the <code class="docutils literal notranslate"><span class="pre">caplog</span></code> fixture which allow you to access and control log capturing.
When logging is part of your function and you want to verify the right message is logged
with the expected logging level:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="k">def</span> <span class="nf">test_something</span><span class="p">(</span><span class="n">caplog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test something.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    caplog : caplog fixture that give you access to the log level, the logger, etc.,</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="s2">&quot;WARNING&quot;</span> <span class="ow">in</span> <span class="p">[</span><span class="n">_</span><span class="o">.</span><span class="n">levelname</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">caplog</span><span class="o">.</span><span class="n">records</span><span class="p">]</span>
    <span class="k">assert</span> <span class="s2">&quot;warning message&quot;</span> <span class="ow">in</span> <span class="p">[</span><span class="n">_</span><span class="o">.</span><span class="n">message</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">caplog</span><span class="o">.</span><span class="n">records</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="random-numbers">
<h2>Random numbers<a class="headerlink" href="#random-numbers" title="Permalink to this headline"></a></h2>
<p>All functions that need to call a random number generator should
take a <code class="docutils literal notranslate"><span class="pre">random_state</span></code> input parameter and call the
<a class="reference internal" href="../api/gammapy.utils.random.get_random_state.html#gammapy.utils.random.get_random_state" title="gammapy.utils.random.get_random_state"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_random_state</span></code></a> utility function like this
(you can copy &amp; paste the three docstring lines and the first code line
to the function youre writing):</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gammapy.utils.random</span> <span class="kn">import</span> <span class="n">get_random_state</span>

<span class="k">def</span> <span class="nf">make_random_stuff</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="s1">&#39;random-seed&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;...</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    random_state : {int, &#39;random-seed&#39;, &#39;global-rng&#39;, `~numpy.random.RandomState`}</span>
<span class="sd">        Defines random number generator initialisation.</span>
<span class="sd">        Passed to `~gammapy.utils.random.get_random_state`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">random_state</span> <span class="o">=</span> <span class="n">get_random_state</span><span class="p">(</span><span class="n">random_state</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">random_state</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>
</div>
<p>This allows callers flexible control over which random number generator
(i.e. which <a class="reference external" href="https://numpy.org/doc/stable/reference/random/legacy.html#numpy.random.RandomState" title="(in NumPy v1.21)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.random.RandomState</span></code></a> instance) is used and how its initialised.
The default <code class="docutils literal notranslate"><span class="pre">random_state='random-seed'</span></code> means create a new RNG, seed it in a random way,
i.e. different random numbers will be generated on every call.</p>
<p>Theres a few ways to get deterministic results from a script that call
functions that generate random numbers.</p>
<p>One option is to create a single <a class="reference external" href="https://numpy.org/doc/stable/reference/random/legacy.html#numpy.random.RandomState" title="(in NumPy v1.21)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RandomState</span></code></a> object seeded with an integer
and then pass that <code class="docutils literal notranslate"><span class="pre">random_state</span></code> object to every function that generates random numbers:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">numpy.random</span> <span class="kn">import</span> <span class="n">RandomState</span>
<span class="n">random_state</span> <span class="o">=</span> <span class="n">RandomState</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="n">stuff1</span> <span class="o">=</span> <span class="n">make_some_random_stuff</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">)</span>
<span class="n">stuff2</span> <span class="o">=</span> <span class="n">make_more_random_stuff</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">)</span>
</pre></div>
</div>
<p>Another option is to pass an integer seed to every function that generates random numbers:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">seed</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">stuff1</span> <span class="o">=</span> <span class="n">make_some_random_stuff</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">seed</span><span class="p">)</span>
<span class="n">stuff2</span> <span class="o">=</span> <span class="n">make_more_random_stuff</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">seed</span><span class="p">)</span>
</pre></div>
</div>
<p>This pattern was inspired by the way
<a class="reference external" href="http://scikit-learn.org/stable/developers/#random-numbers">scikit-learn handles random numbers</a>.
We have changed the <code class="docutils literal notranslate"><span class="pre">None</span></code> option of <code class="docutils literal notranslate"><span class="pre">sklearn.utils.check_random_state</span></code> to <code class="docutils literal notranslate"><span class="pre">'global-rng'</span></code>,
because we felt that this meaning for <code class="docutils literal notranslate"><span class="pre">None</span></code> was confusing given that <a class="reference external" href="https://numpy.org/doc/stable/reference/random/legacy.html#numpy.random.RandomState" title="(in NumPy v1.21)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.random.RandomState</span></code></a>
uses a different meaning (for which we use the option <code class="docutils literal notranslate"><span class="pre">'global-rng'</span></code>).</p>
</div>
<div class="section" id="logging">
<h2>Logging<a class="headerlink" href="#logging" title="Permalink to this headline"></a></h2>
<p>Gammapy is a library. This means that it should never contain print statements, because with
print statements the library users have no easy way to configure where the print output goes
(e.g. to <code class="docutils literal notranslate"><span class="pre">stdout</span></code> or <code class="docutils literal notranslate"><span class="pre">stderr</span></code> or a log file) and what the log level (<code class="docutils literal notranslate"><span class="pre">warning</span></code>, <code class="docutils literal notranslate"><span class="pre">info</span></code>, <code class="docutils literal notranslate"><span class="pre">debug</span></code>)
and format is (e.g. include timestamp and log level?).</p>
<p>So logging is much better than printing. But also logging is only rarely needed.
Many developers use print or log statements to debug some piece of code while they write it.
Once its written and works, its rare that callers want it to be chatty and log messages all the time.
Print and log statements should mostly be contained in end-user scripts that use Gammapy,
not in Gammapy itself.</p>
<p>That said, there are cases where emitting log messages can be useful.
E.g. a long-running algorithm with many steps can log info or debug statements.
In a function that reads and writes several files it can make sense to include info log messages
for normal operation, and warning or error log messages when something goes wrong.
Also, command line tools that are included in Gammapy <strong>should</strong> contain log messages,
informing the user about what they are doing.</p>
<p>Gammapy uses the Python standard library <a class="reference external" href="https://docs.python.org/3/library/logging.html#module-logging" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">logging</span></code></a> module. This module is extremely flexible,
but also quite complex. But our logging needs are very modest, so its actually quite simple </p>
<p>It is worth mentioning that important logs returned to the user should be captured and tested using caplog fixture, see the section Caplog fixture above</p>
<div class="section" id="generating-log-messages">
<h3>Generating log messages<a class="headerlink" href="#generating-log-messages" title="Permalink to this headline"></a></h3>
<p>To generate log messages from any file in Gammapy, include these two lines at the top:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</pre></div>
</div>
<p>This creates a module-level <a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">logging.Logger</span></code></a> object called <code class="docutils literal notranslate"><span class="pre">log</span></code>, and you can then create
log messages like this from any function or method:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">process_lots_of_data</span><span class="p">(</span><span class="n">infile</span><span class="p">,</span> <span class="n">outfile</span><span class="p">):</span>

    <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Starting processing data ...&#39;</span><span class="p">)</span>

    <span class="c1"># do lots of work</span>

    <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Writing </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">outfile</span><span class="p">))</span>
</pre></div>
</div>
<p>You should never log messages from the module level (i.e. on import) or configure the log
level or format in Gammapy, that should be left to callers  except from command line tools </p>
<p>There is also the rare case of functions or classes with the main job to check
and log things. For these you can optionally let the caller pass a logger when
constructing the class to make it easier to configure the logging.
See the <code class="xref py py-obj docutils literal notranslate"><span class="pre">EventListDatasetChecker</span></code> as an example.</p>
</div>
</div>
<div class="section" id="command-line-tools-using-click">
<h2>Command line tools using click<a class="headerlink" href="#command-line-tools-using-click" title="Permalink to this headline"></a></h2>
<p>Command line tools that use the <a class="reference external" href="http://click.pocoo.org/">click</a> module should disable
the unicode literals warnings to clean up the output of the tool:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>
<span class="n">click</span><span class="o">.</span><span class="n">disable_unicode_literals_warning</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p>See <a class="reference external" href="http://click.pocoo.org/5/python3/#unicode-literals">here</a> for further
information.</p>
</div>
<div class="section" id="bsd-or-gpl-license">
<h2>BSD or GPL license?<a class="headerlink" href="#bsd-or-gpl-license" title="Permalink to this headline"></a></h2>
<p>Gammapy is BSD licensed (same license as Numpy, Scipy, Matplotlib, scikit-image, Astropy, photutils, yt, ).</p>
<p>We prefer this over the GPL3 or LGPL license because it means that the packages we are most likely to
share code with have the same license, e.g. we can take a function or class and upstream it, i.e. contribute
it e.g. to Astropy or Scipy if its generally useful.</p>
<p>Some optional dependencies of Gammapy (i.e. other packages like Sherpa or Gammalib or ROOT that we import in some
places) are GPL3 or LGPL licensed.</p>
<p>Now the GPL3 and LGPL license contains clauses that other package that copy or modify it must be released under
the same license.
We take the standpoint that Gammapy is independent from these libraries, because we dont copy or modify them.
This is a common standpoint, e.g. <code class="docutils literal notranslate"><span class="pre">astropy.wcs</span></code> is BSD licensed, but uses the LGPL-licensed WCSLib.</p>
<p>Note that if you distribute Gammapy together with one of the GPL dependencies,
the whole distribution then falls under the GPL license.</p>
</div>
<div class="section" id="changelog">
<h2>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline"></a></h2>
<p>In Gammapy we keep a <a class="reference internal" href="../changelog.html#changelog"><span class="std std-ref">Changelog</span></a> with a list of pull requests.
We sort by release and within the release by PR number (largest first).</p>
<p>As explained in the <a class="reference external" href="https://docs.astropy.org/en/latest/development/workflow/maintainer_workflow.html#changelog-format" title="(in Astropy v5.1)"><span>Updating and Maintaining the Changelog</span></a> section in the Astropy docs,
there are (at least) two approaches for adding to the changelog, each with pros
and cons.</p>
<p>Weve had some pain due to merge conflicts in the changelog and having to wait
until the contributor rebases (and having to explain git rebase to new contributors).</p>
<p>So our recommendation is that changelog entries are not added in pull requests,
but that the core developer adds a changelog entry after right after having
merged a pull request (you can add <code class="docutils literal notranslate"><span class="pre">[skip</span> <span class="pre">ci]</span></code> on this commit).</p>
</div>
<div class="section" id="file-and-directory-path-handling">
<h2>File and directory path handling<a class="headerlink" href="#file-and-directory-path-handling" title="Permalink to this headline"></a></h2>
<p>In Gammapy use <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a> objects to handle file and directory paths.</p>
</div>
<div class="section" id="bundled-gammapy-extern-code">
<h2>Bundled gammapy.extern code<a class="headerlink" href="#bundled-gammapy-extern-code" title="Permalink to this headline"></a></h2>
<p>We bundle some code in <code class="docutils literal notranslate"><span class="pre">gammapy.extern</span></code>.
This is external code that we dont maintain or modify in Gammapy.
We only bundle small pure-Python files (currently all single-file modules) purely for convenience,
because having to explain about these modules as Gammapy dependencies to end-users would be annoying.
And in some cases the file was extracted from some other project, i.e. cant be installed
separately as a dependency.</p>
<p>For <code class="docutils literal notranslate"><span class="pre">gammapy.extern</span></code> we dont generate Sphinx API docs.
To see what is there, check out the <code class="docutils literal notranslate"><span class="pre">gammapy/extern</span></code> directory locally or on
<a class="reference external" href="https://github.com/gammapy/gammapy/tree/master/gammapy/extern">Github</a>.
Notes on the bundled files are kept in the docstring of
<a class="reference external" href="https://github.com/gammapy/gammapy/blob/master/gammapy/extern/__init__.py">gammapy/extern/__init__.py</a>.</p>
</div>
<div class="section" id="interpolation-and-extrapolation">
<span id="interpolation-extrapolation"></span><h2>Interpolation and extrapolation<a class="headerlink" href="#interpolation-and-extrapolation" title="Permalink to this headline"></a></h2>
<p>In Gammapy, we use interpolation a lot, e.g. to evaluate instrument response functions (IRFs) on
data grids, or to reproject diffuse models on data grids.</p>
<p>The default interpolator we use is <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/reference/generated/scipy.interpolate.RegularGridInterpolator.html#scipy.interpolate.RegularGridInterpolator" title="(in SciPy v1.7.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">scipy.interpolate.RegularGridInterpolator</span></code></a> because its fast and robust
(more fancy interpolation schemes can lead to unstable response in some cases, so more careful checking
across all of parameter space would be needed).</p>
<p>You should use this pattern to implement a function of method that does interpolation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">do_something</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">interp_kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Do something.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    interp_kwargs : dict or None</span>
<span class="sd">        Interpolation parameter dict passed to `scipy.interpolate.RegularGridInterpolator`.</span>
<span class="sd">        If you pass ``None``, the default ``interp_params=dict(bounds_error=False)`` is used.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">interp_kwargs</span><span class="p">:</span>
        <span class="n">interp_kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">bounds_error</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="n">interpolator</span> <span class="o">=</span> <span class="n">RegularGridInterpolator</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="o">**</span><span class="n">interp_kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>Since the other defaults are <code class="docutils literal notranslate"><span class="pre">method='linear'</span></code> and <code class="docutils literal notranslate"><span class="pre">fill_value=nan</span></code>, this implies that linear interpolation
is used and <a class="reference external" href="https://en.wikipedia.org/wiki/NaN">NaN</a> values are returned for points outside of the interpolation domain.
This is a compromise between the alternatives:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bounds_error=True</span></code>  Very safe, refuse to return results for any points if one of the points is outside the valid domain.
Can be annoying for the caller to not get any result.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bounds_error=False,</span> <span class="pre">fill_value=nan</span></code>  Medium safe. Always return a result, but put NaN values to make it easy
for analysers to spot that theres an issue in their results (if pixels with NaN are used, that will usually lead
to NaN values in high level analysis results.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bounds_error=False,</span> <span class="pre">fill_value=0</span></code>  Less safe.
Extrapolate with zero.
Can be very convenient for the caller to avoid dealing with NaN,
but if the data values can also be zero you will lose track of invalid pixels.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bounds_error=False,</span> <span class="pre">fill_value=None</span></code>  Unsafe.
If fill_value is None, values outside the domain are extrapolated.
Can lead to errors where e.g. stacked high level analysis results
arent quite correct because IRFs or background models or  were used outside their valid range.</p></li>
</ul>
<p>Methods that use interpolation should provide an option to the caller to pass interpolation options on to
<code class="docutils literal notranslate"><span class="pre">RegularGridInterpolator</span></code> in case the default behaviour doesnt suit the application.</p>
<p>TODO: we have some classes (aeff2d and edisp2d) that pre-compute an interpolator, currently in the constructor.
In those cases the <code class="docutils literal notranslate"><span class="pre">interp_kwargs</span></code> would have to be exposed e.g. also on the <code class="docutils literal notranslate"><span class="pre">read</span></code> and other constructors.
Do we want / need that?</p>
</div>
<div class="section" id="locate-origin-of-warnings">
<h2>Locate origin of warnings<a class="headerlink" href="#locate-origin-of-warnings" title="Permalink to this headline"></a></h2>
<p>By default, warnings appear on the console, but often its not clear where a given warning
originates (e.g. when building the docs or running scripts or tests) or how to fix it.</p>
<p>Sometimes putting this in <code class="docutils literal notranslate"><span class="pre">gammapy/__init__.py</span></code> can help:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">np</span><span class="o">.</span><span class="n">seterr</span><span class="p">(</span><span class="nb">all</span><span class="o">=</span><span class="s1">&#39;raise&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Following the advice <a class="reference external" href="http://stackoverflow.com/questions/22373927/get-traceback-of-warnings/22376126#22376126">here</a>,
putting this in <code class="docutils literal notranslate"><span class="pre">docs/conf.py</span></code> can also help sometimes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">traceback</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">def</span> <span class="nf">warn_with_traceback</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">lineno</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">traceback</span><span class="o">.</span><span class="n">print_stack</span><span class="p">()</span>
    <span class="n">log</span> <span class="o">=</span> <span class="n">file</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">file</span><span class="p">,</span><span class="s1">&#39;write&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span>
    <span class="n">log</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">warnings</span><span class="o">.</span><span class="n">formatwarning</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">lineno</span><span class="p">,</span> <span class="n">line</span><span class="p">))</span>

<span class="n">warnings</span><span class="o">.</span><span class="n">showwarning</span> <span class="o">=</span> <span class="n">warn_with_traceback</span>
</pre></div>
</div>
</div>
<div class="section" id="object-text-repr-str-and-info">
<h2>Object text repr, str and info<a class="headerlink" href="#object-text-repr-str-and-info" title="Permalink to this headline"></a></h2>
<p>In Python, by default objects dont have a good string representation. This
section explains how Python repr, str and print work, and gives guidelines for
writing <code class="docutils literal notranslate"><span class="pre">__repr__</span></code>, <code class="docutils literal notranslate"><span class="pre">__str__</span></code> and <code class="docutils literal notranslate"><span class="pre">info</span></code> methods on Gammapy classes.</p>
<p>Lets use this as an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Anna&#39;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">8</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>
</pre></div>
</div>
<p>The default <code class="docutils literal notranslate"><span class="pre">repr</span></code> and <code class="docutils literal notranslate"><span class="pre">str</span></code> are this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">()</span>
<span class="nb">repr</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="s1">&#39;&lt;__main__.Person object at 0x105fe3b70&gt;&#39;</span>
<span class="n">p</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>
<span class="s1">&#39;&lt;__main__.Person object at 0x105fe3b70&gt;&#39;</span>
<span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="s1">&#39;&lt;__main__.Person object at 0x105fe3b70&gt;&#39;</span>
<span class="n">p</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
</pre></div>
</div>
<p>Users will see that. If they just give an object in the Python REPL, the
<code class="docutils literal notranslate"><span class="pre">repr</span></code> is shown. If they print the object, the <code class="docutils literal notranslate"><span class="pre">str</span></code> is shown. In both cases
without the quotes seen above.</p>
<blockquote>
<div><p>p
&lt;__main__.Person at 0x105fd0cf8&gt;
print(p)
&lt;__main__.Person object at 0x105fe3b70&gt;</p>
</div></blockquote>
<p>There are ways to make this better and avoid writing boilerplate code,
specifically <a class="reference external" href="http://www.attrs.org/">attrs</a> and <a class="reference external" href="https://docs.python.org/3/library/dataclasses.html">dataclasses</a>. We might use those in
the future in Gammapy, but for now, we dont.</p>
<p>If you want a better repr or str for a given object, you have to add
<code class="docutils literal notranslate"><span class="pre">__repr__</span></code> and / or <code class="docutils literal notranslate"><span class="pre">__str__</span></code> methods when writing the class. Note that you
dont have to do that, its mainly useful for objects users interact with a lot.
For classes that are mainly used internally, developers can e.g. just do this to
see the attributes printed nicely:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="vm">__dict__</span>
<span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Anna&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">8</span><span class="p">}</span>
</pre></div>
</div>
<p>Heres an example how to write <code class="docutils literal notranslate"><span class="pre">__repr__</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">(name=</span><span class="si">{!r}</span><span class="s1">, age=</span><span class="si">{!r}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">age</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>Note how we use <code class="docutils literal notranslate"><span class="pre">{!r}</span></code> in the format string to fill in the <code class="docutils literal notranslate"><span class="pre">repr</span></code> of the
object being formatted, and how we used <code class="docutils literal notranslate"><span class="pre">self.__class__.__name__</span></code> to avoid
duplicating the class name (easier to refactor code, and shows sub-class name if
repr is inherited).</p>
<p>This will give a nice string representation. The same one for <code class="docutils literal notranslate"><span class="pre">repr</span></code> and
<code class="docutils literal notranslate"><span class="pre">str</span></code>, you dont have to write <code class="docutils literal notranslate"><span class="pre">__str__</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Anna&#39;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
<span class="n">p</span>
<span class="n">Person</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Anna&#39;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="n">Person</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Anna&#39;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
</pre></div>
</div>
<p>The string representation is usually used for more informal or longer printout.
Heres an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="s2">&quot;Hi, my name is </span><span class="si">{}</span><span class="s2"> and I&#39;m </span><span class="si">{}</span><span class="s2"> years old.</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="s2">&quot;I live in Heidelberg.&quot;</span>
    <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">age</span><span class="p">)</span>
</pre></div>
</div>
<p>If you need text representation that is configurable, i.e. tables arguments what
to show, you should add a method called <code class="docutils literal notranslate"><span class="pre">info</span></code>. To avoid code duplication, you
should then call <code class="docutils literal notranslate"><span class="pre">info</span></code> from <code class="docutils literal notranslate"><span class="pre">__str__</span></code>. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Anna&#39;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">8</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">(name=</span><span class="si">{!r}</span><span class="s1">, age=</span><span class="si">{!r}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">age</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">add_location</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">add_location</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Hi, my name is </span><span class="si">{}</span><span class="s2"> and I&#39;m </span><span class="si">{}</span><span class="s2"> years old.&quot;</span>
            <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">age</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">add_location</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">I live in Heidelberg&quot;</span>
        <span class="k">return</span> <span class="n">s</span>
</pre></div>
</div>
<p>This pattern of returning a string from <code class="docutils literal notranslate"><span class="pre">info</span></code> has some pros and cons.
Its easy to get the string, and do what you like with it, e.g. combine
it with other text, or store it in a list and write it to file later.
The main con is that users have to call <code class="docutils literal notranslate"><span class="pre">print(p.info())</span></code> to see a
nice printed version of the string instead of <code class="docutils literal notranslate"><span class="pre">\n</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
<span class="s2">&quot;Hi, my name is Anna and I&#39;m 8 years old.</span><span class="se">\n</span><span class="s2">I live in Heidelberg&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">info</span><span class="p">())</span>
<span class="n">Hi</span><span class="p">,</span> <span class="n">my</span> <span class="n">name</span> <span class="ow">is</span> <span class="n">Anna</span> <span class="ow">and</span> <span class="n">I</span><span class="s1">&#39;m 8 years old.</span>
<span class="n">I</span> <span class="n">live</span> <span class="ow">in</span> <span class="n">Heidelberg</span>
</pre></div>
</div>
<p>To make <code class="docutils literal notranslate"><span class="pre">info</span></code> print by default, and be re-usable from <code class="docutils literal notranslate"><span class="pre">__str__</span></code> and make it
possible to get a string (without having to monkey-patch <code class="docutils literal notranslate"><span class="pre">sys.stdout</span></code>), would
require adding this <code class="docutils literal notranslate"><span class="pre">show</span></code> option and if-else at the end of every <code class="docutils literal notranslate"><span class="pre">info</span></code>
method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">add_location</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">add_location</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Hi, my name is </span><span class="si">{}</span><span class="s2"> and I&#39;m </span><span class="si">{}</span><span class="s2"> years old.&quot;</span>
         <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">age</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">add_location</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">I live in Heidelberg&quot;</span>

    <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">s</span>
</pre></div>
</div>
<p>To summarise: start without adding and code for text representation. If theres a
useful short text representation, you can add a <code class="docutils literal notranslate"><span class="pre">__repr__</span></code>. If really useful,
add a <code class="docutils literal notranslate"><span class="pre">__str__</span></code>. If you need it configurable, add an <code class="docutils literal notranslate"><span class="pre">info</span></code> and call
<code class="docutils literal notranslate"><span class="pre">info</span></code> from <code class="docutils literal notranslate"><span class="pre">str</span></code>. If <code class="docutils literal notranslate"><span class="pre">repr</span></code> and <code class="docutils literal notranslate"><span class="pre">str</span></code> are similar, its not really
useful: delete the <code class="docutils literal notranslate"><span class="pre">__str__</span></code> and only keep the <code class="docutils literal notranslate"><span class="pre">__repr__</span></code>.</p>
<p>It is common to have bugs in <code class="docutils literal notranslate"><span class="pre">__repr__</span></code>, <code class="docutils literal notranslate"><span class="pre">__str__</span></code> and <code class="docutils literal notranslate"><span class="pre">info</span></code> that are not
tested. E.g. a <code class="docutils literal notranslate"><span class="pre">NameError</span></code> or <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> because some attribute name
changed, and updating the repr / str / info was forgotten. So tests should be added
that execute these methods once. You can write the reference string in the output,
but that is not required (and actually very hard for cases where you have floats
or Numpy arrays or str, where formatting differs across Python or Numpy version.
Example what to put as a test:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_person_txt</span><span class="p">():</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">()</span>
    <span class="k">assert</span> <span class="nb">repr</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;Person&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;Hi&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">p</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">add_location</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;Heidelberg&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="coordinate-and-axis-names">
<span id="use-nddata"></span><h2>Coordinate and axis names<a class="headerlink" href="#coordinate-and-axis-names" title="Permalink to this headline"></a></h2>
<p>In Gammapy, the following coordinate and axis names should be used.</p>
<p>This applies to most of the code, ranging from IRFs to maps
to sky models, for function parameters and variable names.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">time</span></code> - time</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">energy</span></code> - energy</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ra</span></code>, <code class="docutils literal notranslate"><span class="pre">dec</span></code> - sky coordinates, <code class="docutils literal notranslate"><span class="pre">radec</span></code> frame (i.e. <code class="docutils literal notranslate"><span class="pre">icrs</span></code> to be precise)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">glon</span></code>, <code class="docutils literal notranslate"><span class="pre">glat</span></code> - sky coordinates, <code class="docutils literal notranslate"><span class="pre">galactic</span></code> frame</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">az</span></code>, <code class="docutils literal notranslate"><span class="pre">alt</span></code> - sky coordinates, <code class="docutils literal notranslate"><span class="pre">altaz</span></code> frame</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lon</span></code>, <code class="docutils literal notranslate"><span class="pre">lat</span></code> for spherical coordinates that arent in a specific frame.</p></li>
</ul>
<p>For angular sky separation angles:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">psf_theta</span></code> - offset wrt. PSF center position</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fov_theta</span></code> - offset wrt. field of view (FOV) center</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">theta</span></code> - when no PSF is involved, e.g. to evaluate spatial sky models</p></li>
</ul>
<p>For the general case of FOV coordinates that depend on angular orientation
of the FOV coordinate frame:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">fov_{frame}_lon</span></code>, <code class="docutils literal notranslate"><span class="pre">fov_{frame}_lat</span></code> - field of view coordinates</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fov_theta</span></code>, <code class="docutils literal notranslate"><span class="pre">fov_{frame}_phi</span></code> - field of view polar coordinates</p></li>
</ul>
<p>where <code class="docutils literal notranslate"><span class="pre">{frame}</span></code> can be one of <code class="docutils literal notranslate"><span class="pre">radec</span></code>, <code class="docutils literal notranslate"><span class="pre">galactic</span></code> or <code class="docutils literal notranslate"><span class="pre">altaz</span></code>,
depending on with which frame the FOV coordinate frame is aligned.</p>
<p>Notes:</p>
<ul class="simple">
<li><p>In cases where its unclear if the value is for true or reconstructed event
parameters, a postfix <code class="docutils literal notranslate"><span class="pre">_true</span></code> or <code class="docutils literal notranslate"><span class="pre">_reco</span></code> should be added.
In Gammapy, this mostly occurs for <code class="docutils literal notranslate"><span class="pre">energy_true</span></code> and <code class="docutils literal notranslate"><span class="pre">energy_reco</span></code>,
e.g. the background IRF has an axis <code class="docutils literal notranslate"><span class="pre">energy_reco</span></code>, but effective area
usually <code class="docutils literal notranslate"><span class="pre">energy_true</span></code>, and energy dispersion has both axes.
We are not pedantic about adding <code class="docutils literal notranslate"><span class="pre">_true</span></code> and <code class="docutils literal notranslate"><span class="pre">_reco</span></code> everywhere.
Note that this would quickly become annoying (e.g. source models use true
parameters, and its not clear why one should write <code class="docutils literal notranslate"><span class="pre">ra_true</span></code>).
E.g. the property on the event list <code class="docutils literal notranslate"><span class="pre">energy</span></code> matches the <code class="docutils literal notranslate"><span class="pre">ENERGY</span></code>
column from the event list table, which is for real data always reco energy.</p></li>
<li><p>Currently, no sky frames centered on the source, or non-radially symmetric
PSFs are in use, and thus the case of source frames that have to be with
a well-defined alignment, like we have for the FOV frames above,
doesnt occur and thus doesnt need to be defined yet (but it would be natural
to use the same naming convention as for FOV if it eventually does occur).</p></li>
<li><p>These definitions are mostly in agreement with the <a class="reference external" href="gadf">format spec</a>.
We do not achieve 100% consistency everywhere in the spec and Gammapy code.
Achieving this seems unrealistic, because legacy formats have to be supported,
we are not starting from scratch and have time to make all formats consistent.
Our strategy is to do renames on I/O where needed, to and from the internal
Gammapy names defined here, to the names used in the formats.
Of course, where formats are not set in stone yet, we advocate and encourage
the use of the names chosen here.</p></li>
<li><p>Finally, we realise that eventually probably CTA will define this, and Gammapy
is only a prototype. So if CTA chooses something else, probably we will follow
suite and do one more backward-incompatible change at some point to align with CTA.</p></li>
</ul>
</div>
<div class="section" id="documentation-guidelines">
<h2>Documentation guidelines<a class="headerlink" href="#documentation-guidelines" title="Permalink to this headline"></a></h2>
<p>Like almost all Python projects, the Gammapy documentation is written in a format called
<a class="reference external" href="http://sphinx-doc.org/rest.html">restructured text (RST)</a> and built using <a class="reference external" href="http://sphinx-doc.org/">Sphinx</a>.
We mostly follow the <a class="reference external" href="https://docs.astropy.org/en/latest/development/docguide.html#documentation-guidelines" title="(in Astropy v5.1)"><span class="xref std std-ref">Astropy documentation guidelines</span></a>,
which are based on the <a class="reference external" href="https://github.com/numpy/numpy/blob/master/doc/HOWTO_DOCUMENT.rst.txt">Numpy docstring standard</a>,
which is what most scientific Python packages use.</p>
<p>Theres a few details that are not easy to figure out by browsing the Numpy or Astropy
documentation guidelines, or that we actually do differently in Gammapy.
These are listed here so that Gammapy developers have a reference.</p>
<p>Usually the quickest way to figure out how something should be done is to browse the Astropy
or Gammapy code a bit (either locally with your editor or online on Github or via the HTML docs),
or search the Numpy or Astropy documentation guidelines mentioned above.
If that doesnt quickly turn up something useful, please ask by putting a comment on the issue or
pull request youre working on on Github, or send an email to the Gammapy mailing list.</p>
<div class="section" id="functions-or-class-methods-that-return-a-single-object">
<h3>Functions or class methods that return a single object<a class="headerlink" href="#functions-or-class-methods-that-return-a-single-object" title="Permalink to this headline"></a></h3>
<p>For functions or class methods that return a single object, following the
Numpy docstring standard and adding a <em>Returns</em> section usually means
that you duplicate the one-line description and repeat the function name as
return variable name.
See <a class="reference external" href="https://docs.astropy.org/en/latest/api/astropy.cosmology.LambdaCDM.html#astropy.cosmology.LambdaCDM.w" title="(in Astropy v5.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.cosmology.LambdaCDM.w</span></code></a> or <a class="reference external" href="https://docs.astropy.org/en/latest/api/astropy.time.Time.html#astropy.time.Time.sidereal_time" title="(in Astropy v5.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.time.Time.sidereal_time</span></code></a>
as examples in the Astropy codebase. Heres a simple example:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">circle_area</span><span class="p">(</span><span class="n">radius</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Circle area.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    radius : `~astropy.units.Quantity`</span>
<span class="sd">        Circle radius</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    area : `~astropy.units.Quantity`</span>
<span class="sd">        Circle area</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="mf">3.14</span> <span class="o">*</span> <span class="p">(</span><span class="n">radius</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>In these cases, the following shorter format omitting the <em>Returns</em> section is recommended:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">circle_area</span><span class="p">(</span><span class="n">radius</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Circle area (`~astropy.units.Quantity`).</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    radius : `~astropy.units.Quantity`</span>
<span class="sd">        Circle radius</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="mf">3.14</span> <span class="o">*</span> <span class="p">(</span><span class="n">radius</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Usually the parameter description doesnt fit on the one line, so its
recommended to always keep this in the <em>Parameters</em> section.</p>
<p>A common case where the short format is appropriate are class properties,
because they always return a single object.
As an example see <a class="reference internal" href="../api/gammapy.data.EventList.html#gammapy.data.EventList.radec" title="gammapy.data.EventList.radec"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gammapy.data.EventList.radec</span></code></a>, which is reproduced here:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">radec</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Event RA / DEC sky coordinates (`~astropy.coordinates.SkyCoord`).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="s1">&#39;RA&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="p">[</span><span class="s1">&#39;DEC&#39;</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">SkyCoord</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;deg&#39;</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="s1">&#39;icrs&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="class-attributes">
<h3>Class attributes<a class="headerlink" href="#class-attributes" title="Permalink to this headline"></a></h3>
<p>Class attributes (data members) and properties are currently a bit of a mess.
Attributes are listed in an <em>Attributes</em> section because Ive listed them in a class-level
docstring attributes section as recommended
<a class="reference external" href="https://github.com/numpy/numpy/blob/master/doc/HOWTO_DOCUMENT.rst.txt#class-docstring">here</a>.
Properties are listed in separate <em>Attributes summary</em> and <em>Attributes Documentation</em>
sections, which is confusing to users (whats the difference between attributes and properties?).</p>
<p>One solution is to always use properties, but that can get very verbose if we have to write
so many getters and setters. We could start using descriptors.</p>
<p>TODO: make a decision on this and describe the issue / solution here.</p>
</div>
</div>
<div class="section" id="sphinx-docs-build">
<h2>Sphinx docs build<a class="headerlink" href="#sphinx-docs-build" title="Permalink to this headline"></a></h2>
<p>Generating the HTML docs for Gammapy is straight-forward:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">docs</span><span class="o">-</span><span class="nb">all</span>
<span class="n">make</span> <span class="n">docs</span><span class="o">-</span><span class="n">show</span>
</pre></div>
</div>
<p>Generating the PDF docs is more complex.
This should work:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build_docs</span> <span class="o">-</span><span class="n">b</span> <span class="n">latex</span>
<span class="n">cd</span> <span class="n">docs</span><span class="o">/</span><span class="n">_build</span><span class="o">/</span><span class="n">latex</span>
<span class="n">makeindex</span> <span class="o">-</span><span class="n">s</span> <span class="n">python</span><span class="o">.</span><span class="n">ist</span> <span class="n">gammapy</span><span class="o">.</span><span class="n">idx</span>
<span class="n">pdflatex</span> <span class="o">-</span><span class="n">interaction</span><span class="o">=</span><span class="n">nonstopmode</span> <span class="n">gammapy</span><span class="o">.</span><span class="n">tex</span>
<span class="nb">open</span> <span class="n">gammapy</span><span class="o">.</span><span class="n">pdf</span>
</pre></div>
</div>
<p>You need a bunch or LaTeX stuff, specifically <code class="docutils literal notranslate"><span class="pre">texlive-fonts-extra</span></code> is needed.</p>
<p>Jupyter notebooks present in Gammapy documentation have stripped output cells.
All notebooks are code clean formatted, tested, and filled during the process of documentation
building. They are also converted to Sphinx formatted HTML files and <code class="docutils literal notranslate"><span class="pre">.py</span></code> scripts.</p>
<p>The Sphinx formatted versions of the notebooks provide links to the raw <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code> Jupyter
files and <code class="docutils literal notranslate"><span class="pre">.py</span></code> script versions stored in <code class="docutils literal notranslate"><span class="pre">docs/_static/notebooks</span></code> folder, as well as
a link pointing to its specific Binder space in the
<a class="reference external" href="https://github.com/gammapy/gammapy-webpage">gammapy-webpage</a> repository.
Since notebooks are evolving with Gammapy features and documentation, the different
versions of the notebooks are linked to versioned Binder environments.</p>
<p>Once the documentation is built you can optimize the speed of eventual re-building,
for example in case you are modifying or creating new docs and you would like to check
these changes are displayed nicely. For that purpose, if your modified RST file
does not contain links to notebooks, you may run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">docs-sphinx</span></code> so
that notebooks are not executed during the docs build.</p>
<p>In the case one single notebook is modified or added to the documentation, you can
execute the build doc process with the <code class="docutils literal notranslate"><span class="pre">src</span></code> parameter with value the name of the
considered notebook. i.e. <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">docs-all</span> <span class="pre">src=docs/tutorials/my-notebook.ipynb</span></code></p>
</div>
<div class="section" id="sphinx-gallery-extension">
<h2>Sphinx gallery extension<a class="headerlink" href="#sphinx-gallery-extension" title="Permalink to this headline"></a></h2>
<p>The documentation built-in process uses the <a class="reference external" href="https://sphinx-gallery.github.io/stable/">sphinx-gallery</a>
extension to build galleries of illustrated examples on how to use Gammapy (i.e.
<a class="reference internal" href="../modeling/gallery/index.html#model-gallery"><span class="std std-ref">Model gallery</span></a>). The Python scripts used to produce the model gallery are placed in
<code class="docutils literal notranslate"><span class="pre">examples/models</span></code> and the configuration of the <code class="docutils literal notranslate"><span class="pre">sphinx-gallery</span></code> module is done in <code class="docutils literal notranslate"><span class="pre">docs/conf.py</span></code>.</p>
</div>
<div class="section" id="add-a-notebook-in-a-folder-different-than-tutorials-folder">
<h2>Add a notebook in a folder different than tutorials folder<a class="headerlink" href="#add-a-notebook-in-a-folder-different-than-tutorials-folder" title="Permalink to this headline"></a></h2>
<p>Most of the Gammapy notebooks are placed in the <code class="docutils literal notranslate"><span class="pre">tutorials</span></code> folder, and are are displayed in a
<a class="reference internal" href="../tutorials/index.html#tutorials"><span class="std std-ref">Tutorials</span></a> Gallery. However, we can choose to place a notebook in a different folder of the
documentation folder structure. In this way we can write some parts of the documentation as notebooks
instead of RST files. Once we have placed the notebook in the folder we choose we can link it from the
<code class="docutils literal notranslate"><span class="pre">index.rst</span></code> file using the name of the notebook filename <strong>without the extension</strong> and the Sphinx
<code class="docutils literal notranslate"><span class="pre">toctree</span></code> directive as shown below.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>.. toctree::

    mynotebook
</pre></div>
</div>
</div>
<div class="section" id="skip-notebooks-from-being-executed">
<span id="skip-nb-execution"></span><h2>Skip notebooks from being executed<a class="headerlink" href="#skip-notebooks-from-being-executed" title="Permalink to this headline"></a></h2>
<p>You may choose if a notebook is not executed during the documentation building process, and hence
it will be published without the output cells in its static HTML version. To do this you may add
the following code to the notebook metadata:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;gammapy&quot;</span><span class="o">:</span> <span class="p">{</span>
  <span class="s2">&quot;skip_run&quot;</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="choose-a-thumbnail-and-tooltip-for-the-tutorials-gallery">
<h2>Choose a thumbnail and tooltip for the tutorials gallery<a class="headerlink" href="#choose-a-thumbnail-and-tooltip-for-the-tutorials-gallery" title="Permalink to this headline"></a></h2>
<p>The Gammapy <a class="reference internal" href="../tutorials/index.html#tutorials"><span class="std std-ref">Tutorials</span></a> are Jupyter notebooks that are displayed as a gallery with picture thumbnails and tooltips.
You can choose the thumbnail for the tutorial and add the tooltip editing the metadata of the code cell that produces
the picture that youve chosen. You can open the notebook in a text editor, and edit the internal code there. It may
sound risky, but it is much simpler. Then, find the code cell that produces the figure that you would like for the
gallery, and then replace the <code class="docutils literal notranslate"><span class="pre">&quot;metadata&quot;:</span> <span class="pre">{},</span></code> bit above the code cell with the snippet below:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;metadata&quot;</span><span class="o">:</span> <span class="p">{</span>
 <span class="s2">&quot;nbsphinx-thumbnail&quot;</span><span class="o">:</span> <span class="p">{</span>
  <span class="s2">&quot;tooltip&quot;</span><span class="o">:</span> <span class="s2">&quot;Learn how to do perform a Fit in gammapy.&quot;</span>
 <span class="p">}},</span>
</pre></div>
</div>
<p>Note that you may write whatever you like after tooltip.</p>
</div>
<div class="section" id="dealing-with-links-and-notebooks">
<h2>Dealing with links and notebooks<a class="headerlink" href="#dealing-with-links-and-notebooks" title="Permalink to this headline"></a></h2>
<p>All Jupyter notebooks in Gammpay documentation are converted to HTML files using
<a class="reference external" href="http://nbsphinx.readthedocs.io/">nb_sphinx</a> Sphinx extension which provides a source parser
for <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code> files.</p>
<div class="section" id="links-to-notebooks">
<h3>Links to notebooks<a class="headerlink" href="#links-to-notebooks" title="Permalink to this headline"></a></h3>
<p>From docstrings and RST documentation files in Gammapy you can link to the built fixed-text HTML formatted
versions of the notebooks and subsections providing its filename with the <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code> file extension
and the relative path to the folder where they are placed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>`Maps section in Gammapy overview tutorial &lt;../tutorials/overview.ipynb#Maps&gt;`__
</pre></div>
</div>
</div>
<div class="section" id="links-within-notebooks">
<h3>Links within notebooks<a class="headerlink" href="#links-within-notebooks" title="Permalink to this headline"></a></h3>
<p>From MD cells in notebooks you can link to other notebooks, as well as to RST documentation files,
and subsections using the markdown syntax to declare links to resources, as shown in the examples below:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="m">-</span> [Maps section in Gammapy overview tutorial](overview.ipynb#Maps)
<span class="m">-</span> [Help!](../getting-started.rst#help)
</pre></div>
</div>
<p>You can also link to the Gammapy API reference documentation using the same Sphinx syntax that is used
when writing RST files. All links to the API reference classes and methods should start with <code class="docutils literal notranslate"><span class="pre">~gammapy.</span></code>
and enclosed within quotation marks. This syntax will be translated into relative links to the API in the
HTML formatted versions of the notebooks, and to absolute links pointing to the on-line Gammapy documentation
in the <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code> notebook files available to download. During the documentation building process a warning
will be raised for each detected broken link to the API.</p>
<p>Examples:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../maps/index.html#module-gammapy.maps" title="gammapy.maps"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gammapy.maps</span></code></a></p></li>
<li><p><a class="reference internal" href="../api/gammapy.maps.Geom.html#gammapy.maps.Geom" title="gammapy.maps.Geom"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gammapy.maps.Geom</span></code></a></p></li>
<li><p><a class="reference internal" href="../api/gammapy.maps.Geom.html#gammapy.maps.Geom.is_image" title="gammapy.maps.Geom.is_image"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gammapy.maps.Geom.is_image</span></code></a></p></li>
<li><p><a class="reference internal" href="../api/gammapy.maps.Geom.html#gammapy.maps.Geom.is_image" title="gammapy.maps.Geom.is_image"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gammapy.maps.Geom.is_image()</span></code></a></p></li>
</ul>
<p>The example links above could be created within MD cells in notebooks with the syntax below:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="m">-</span> <span class="nv">`~gammapy.maps`</span>
<span class="m">-</span> <span class="nv">`~gammapy.maps.Geom`</span>
<span class="m">-</span> <span class="nv">`~gammapy.maps.Geom.is_image`</span>
<span class="m">-</span> <span class="nv">`~gammapy.maps.Geom.is_image()`</span>
</pre></div>
</div>
<p>When building the documentation of a release, the links declared in the MD cells as absolute links pointing
to the <code class="docutils literal notranslate"><span class="pre">dev</span></code> version of the on-line Gammapy documentation will be transformed to relative links in the built
HTML formatted notebooks and to absolute links pointing to that specific released version of the on-line docs
in the downloadable <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code> files.</p>
</div>
</div>
<div class="section" id="include-png-files-as-images-in-the-notebooks">
<h2>Include png files as images in the notebooks<a class="headerlink" href="#include-png-files-as-images-in-the-notebooks" title="Permalink to this headline"></a></h2>
<p>You may include static images in notebooks using the following markdown directive:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>![](images/my_static_image.png)
</pre></div>
</div>
<p>Please note that your images should be placed inside an <code class="xref py py-obj docutils literal notranslate"><span class="pre">images</span></code> folder, accessed with that relative
path from your notebook.</p>
</div>
<div class="section" id="include-images-from-gammapy-data-into-the-docs">
<h2>Include images from gammapy-data into the docs<a class="headerlink" href="#include-images-from-gammapy-data-into-the-docs" title="Permalink to this headline"></a></h2>
<p>Gammapy has a <code class="docutils literal notranslate"><span class="pre">gp-image</span></code> directive to include an image from <code class="docutils literal notranslate"><span class="pre">$GAMMAPY_DATA/figures/</span></code>,
use the <code class="docutils literal notranslate"><span class="pre">gp-image</span></code> directive instead of the usual Sphinx <code class="docutils literal notranslate"><span class="pre">image</span></code> directive like this:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">gp-image</span><span class="p">::</span> detect/fermi_ts_image.png
    <span class="nc">:scale:</span> 100%
</pre></div>
</div>
<p>More info on the <a class="reference external" href="http://www.sphinx-doc.org/en/stable/rest.html#images">image directive</a>.</p>
</div>
<div class="section" id="check-broken-links">
<span id="dev-check-html-links"></span><h2>Check broken links<a class="headerlink" href="#check-broken-links" title="Permalink to this headline"></a></h2>
<p>To check for broken external links from the Sphinx documentation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ python setup.py install
$ <span class="nb">cd</span> docs<span class="p">;</span> make linkcheck
</pre></div>
</div>
<p>You may also use <a class="reference external" href="https://github.com/smallhadroncollider/brok">brk</a> software, which will also check
the links present in the notebooks files.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ brok docs/tutorials/*.ipynb <span class="p">|</span> grep <span class="s2">&quot;Failed|Could&quot;</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="setup.html" class="btn btn-neutral float-left" title="Gammapy project setup" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pigs/index.html" class="btn btn-neutral float-right" title="PIGs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, The Gammapy developers.
      <span class="lastupdated">Last updated on 22 Nov 2021.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>