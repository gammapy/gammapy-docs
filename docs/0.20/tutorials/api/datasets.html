
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Datasets - Reduced data, IRFs, models &#8212; gammapy v0.20</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gammapy.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.1/dist/embed-amd.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="shortcut icon" href="../../_static/gammapy_logo.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Modelling" href="model_management.html" />
    <link rel="prev" title="Datasets (DL4)" href="../../userguide/dl4.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../../index.html">
  <img src="../../_static/gammapy_logo_nav.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../getting-started/index.html">
  Getting started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../userguide/index.html">
  User guide
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../index.html">
  Tutorials
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../api.html">
  API reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../development/index.html">
  Development
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../changelog/index.html">
  Release notes
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <div class="dropdown" id="version_switcher">
    <button type="button" class="btn btn-primary btn-sm navbar-btn dropdown-toggle" id="version_switcher_button" data-toggle="dropdown">
        0.20  <!-- this text may get changed later by javascript -->
        <span class="caret"></span>
    </button>
    <div id="version_switcher_menu" class="dropdown-menu list-group-flush py-0" aria-labelledby="version_switcher_button">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
</div>

<!-- NOTE: this JS must live here (not in our global JS file) because it relies
     on being processed by Jinja before it is run (specifically for replacing
     variables tutorials/api/datasets and {'json_url': 'https://docs.gammapy.org/stable/switcher.json', 'version_match': '0.20'}.
-->

<script type="text/javascript">
// Check if corresponding page path exists in other version of docs
// and, if so, go there instead of the homepage of the other docs version
function checkPageExistsAndRedirect(event) {
    const currentFilePath = "tutorials/api/datasets.html",
          tryUrl = event.target.getAttribute("href");
    let otherDocsHomepage = tryUrl.replace(currentFilePath, "");
    $.ajax({
        type: 'HEAD',
        url: tryUrl,
        // if the page exists, go there
        success: function() {
            location.href = tryUrl;
        }
    }).fail(function() {
        location.href = otherDocsHomepage;
    });
    // this prevents the browser from following the href of the clicked node
    // (which is fine because this function takes care of redirecting)
    return false;
}

// Populate the version switcher from the JSON config file
(function () {
    $.getJSON("https://docs.gammapy.org/stable/switcher.json", function(data, textStatus, jqXHR) {
        const currentFilePath = "tutorials/api/datasets.html";
        // create links to the corresponding page in the other docs versions
        $.each(data, function(index, entry) {
            // if no custom name specified (e.g., "latest"), use version string
            if (!("name" in entry)) {
                entry.name = entry.version;
            }
            // create the node
            const node = document.createElement("a");
            node.setAttribute("class", "list-group-item list-group-item-action py-1");
            node.textContent = `${entry.name}`;
            node.setAttribute("href", `${entry.url}${currentFilePath}`);
            // on click, AJAX calls will check if the linked page exists before
            // trying to redirect, and if not, will redirect to the homepage
            // for that version of the docs.
            node.onclick = checkPageExistsAndRedirect;
            // Add dataset values for the version and name in case people want
            // to apply CSS styling based on this information.
            node.dataset["versionName"] = entry.name;
            node.dataset["version"] = entry.version;

            $("#version_switcher_menu").append(node);
            // replace dropdown button text with the preferred display name of
            // this version, rather than using sphinx's 0.20 variable.
            // also highlight the dropdown entry for the currently-viewed
            // version's entry
            if (entry.version == "0.20") {
                node.classList.add("active");
                let btn = document.getElementById("version_switcher_button");
                btn.innerText = btn.dataset["activeVersionName"] = entry.name;
                btn.dataset["activeVersion"] = entry.version;
            }
        });
    });
})();
</script>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/gammapy/gammapy" rel="noopener" target="_blank" title="Github"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">Github</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/gammapyST" rel="noopener" target="_blank" title="Twitter"><span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://gammapy.slack.com/" rel="noopener" target="_blank" title="Slack"><span><i class="fab fa-slack"></i></span>
            <label class="sr-only">Slack</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../starting/analysis_1.html">
   High level interface
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../starting/analysis_2.html">
   Low level API
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../starting/overview.html">
   Data structures
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../data/cta.html">
   CTA with Gammapy
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../data/hess.html">
   H.E.S.S. with Gammapy
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../data/fermi_lat.html">
   Fermi-LAT with Gammapy
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../analysis/1D/spectral_analysis.html">
   Spectral analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../analysis/1D/spectral_analysis_rad_max.html">
   Spectral analysis with energy-dependent directional cuts
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../analysis/1D/sed_fitting.html">
   Flux point fitting
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../analysis/1D/extended_source_spectral_analysis.html">
   Spectral analysis of extended sources
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../analysis/1D/spectrum_simulation.html">
   1D spectrum simulation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../analysis/1D/cta_sensitivity.html">
   Point source sensitivity
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../analysis/2D/ring_background.html">
   Ring background map
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../analysis/2D/modeling_2D.html">
   2D map fitting
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../analysis/2D/detect.html">
   Source detection and significance maps
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../analysis/3D/cta_data_analysis.html">
   Basic image exploration and fitting
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../analysis/3D/analysis_3d.html">
   3D detailed analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../analysis/3D/simulate_3d.html">
   3D map simulation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../analysis/3D/analysis_mwl.html">
   Multi instrument joint 3D and 1D analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../analysis/3D/event_sampling.html">
   Event sampling
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../analysis/3D/flux_profiles.html">
   Flux Profile Estimation
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../analysis/time/light_curve_simulation.html">
   Simulating and fitting a time varying source
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../analysis/time/light_curve.html">
   Light curves
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../analysis/time/light_curve_flare.html">
   Light curves for flares
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../analysis/time/pulsar_analysis.html">
   Pulsar analysis
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="makers.html">
   Makers - Data reduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="catalog.html">
   Source catalogs
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="models.html">
   Models
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="model_management.html">
   Modelling
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="fitting.html">
   Fitting
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="maps.html">
   Maps
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="mask_maps.html">
   Mask maps
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="astro_dark_matter.html">
   Dark matter spatial and spectral models
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Datasets - Reduced data, IRFs, models
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../survey_map.html">
   Survey map
  </a>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Introduction">
   Introduction
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Setup">
   Setup
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#MapDataset">
   MapDataset
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#Creating-an-empty-dataset">
     Creating an empty dataset
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Accessing-contents-of-a-dataset">
   Accessing contents of a dataset
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#Using-masks">
     Using masks
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#Resampling-datasets">
     Resampling datasets
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#SpectrumDataset">
   SpectrumDataset
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#FluxPointsDataset">
   FluxPointsDataset
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Datasets">
   Datasets
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="admonition note">
<p class="admonition-title"><strong>This is a fixed-text formatted version of a Jupyter notebook</strong></p>
<ul class="simple">
<li><p>Try online<a class="reference external" href="https://mybinder.org/v2/gh/gammapy/gammapy-webpage/v0.20?urlpath=lab/tree/tutorials/api/datasets.ipynb"><img alt="Binder" src="https://static.mybinder.org/badge.svg" /></a></p></li>
<li><p>You may download all the notebooks as a <a class="reference external" href="../../_downloads/notebooks-0.20.tar">tar file</a>.</p></li>
<li><p><strong>Source files:</strong> <a class="reference external" href="../../_static/notebooks/datasets.ipynb">datasets.ipynb</a> | <a class="reference external" href="../../_static/notebooks/datasets.py">datasets.py</a></p></li>
</ul>
</div>
<section id="Datasets---Reduced-data,-IRFs,-models">
<h1>Datasets - Reduced data, IRFs, models<a class="headerlink" href="#Datasets---Reduced-data,-IRFs,-models" title="Permalink to this headline">#</a></h1>
<section id="Introduction">
<h2>Introduction<a class="headerlink" href="#Introduction" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">gammapy.datasets</span></code> are a crucial part of the gammapy API. <code class="docutils literal notranslate"><span class="pre">datasets</span></code> constitute <code class="docutils literal notranslate"><span class="pre">DL4</span></code> data - binned counts, IRFs, models and the associated likelihoods. <code class="docutils literal notranslate"><span class="pre">Datasets</span></code> from the end product of the <code class="docutils literal notranslate"><span class="pre">makers</span></code> stage, see <a class="reference internal" href="makers.html"><span class="doc">makers notebook</span></a>, and are passed on to the <code class="docutils literal notranslate"><span class="pre">Fit</span></code> or estimator classes for modelling and fitting purposes.</p>
<p>To find the different types of <code class="docutils literal notranslate"><span class="pre">Dataset</span></code> that are supported see <a class="reference internal" href="../../userguide/dl4.html#types-of-supported-datasets"><span class="std std-ref">Datasets home</span></a></p>
</section>
<section id="Setup">
<h2>Setup<a class="headerlink" href="#Setup" title="Permalink to this headline">#</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">astropy.units</span> <span class="k">as</span> <span class="nn">u</span>
<span class="kn">from</span> <span class="nn">astropy.time</span> <span class="kn">import</span> <span class="n">Time</span>
<span class="kn">from</span> <span class="nn">regions</span> <span class="kn">import</span> <span class="n">CircleSkyRegion</span>
<span class="kn">from</span> <span class="nn">astropy.coordinates</span> <span class="kn">import</span> <span class="n">SkyCoord</span>
<span class="kn">from</span> <span class="nn">gammapy.datasets</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">MapDataset</span><span class="p">,</span>
    <span class="n">SpectrumDataset</span><span class="p">,</span>
    <span class="n">SpectrumDatasetOnOff</span><span class="p">,</span>
    <span class="n">Datasets</span><span class="p">,</span>
    <span class="n">FluxPointsDataset</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">gammapy.data</span> <span class="kn">import</span> <span class="n">DataStore</span><span class="p">,</span> <span class="n">GTI</span>
<span class="kn">from</span> <span class="nn">gammapy.maps</span> <span class="kn">import</span> <span class="n">WcsGeom</span><span class="p">,</span> <span class="n">RegionGeom</span><span class="p">,</span> <span class="n">MapAxes</span><span class="p">,</span> <span class="n">MapAxis</span><span class="p">,</span> <span class="n">Map</span>
<span class="kn">from</span> <span class="nn">gammapy.modeling.models</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">SkyModel</span><span class="p">,</span>
    <span class="n">PowerLawSpectralModel</span><span class="p">,</span>
    <span class="n">FoVBackgroundModel</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">gammapy.estimators</span> <span class="kn">import</span> <span class="n">FluxPoints</span>
<span class="kn">from</span> <span class="nn">gammapy.utils.scripts</span> <span class="kn">import</span> <span class="n">make_path</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline
</pre></div>
</div>
</div>
</section>
<section id="MapDataset">
<h2>MapDataset<a class="headerlink" href="#MapDataset" title="Permalink to this headline">#</a></h2>
<p>The counts, exposure, background, masks, and IRF maps are bundled together in a data structure named <code class="docutils literal notranslate"><span class="pre">MapDataset</span></code>. While the <code class="docutils literal notranslate"><span class="pre">counts</span></code>, and <code class="docutils literal notranslate"><span class="pre">background</span></code> maps are binned in reconstructed energy and must have the same geometry, the IRF maps can have a different spatial (coarsely binned and larger) geometry and spectral range (binned in true energies). It is usually recommended that the true energy bin should be larger and more finely sampled and the reco energy bin.</p>
<section id="Creating-an-empty-dataset">
<h3>Creating an empty dataset<a class="headerlink" href="#Creating-an-empty-dataset" title="Permalink to this headline">#</a></h3>
<p>An empty <code class="docutils literal notranslate"><span class="pre">MapDataset</span></code> can be directly instantiated from any <code class="docutils literal notranslate"><span class="pre">WcsGeom</span></code> object:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">energy_axis</span> <span class="o">=</span> <span class="n">MapAxis</span><span class="o">.</span><span class="n">from_energy_bounds</span><span class="p">(</span>
    <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">nbin</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;energy&quot;</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;TeV&quot;</span>
<span class="p">)</span>

<span class="n">geom</span> <span class="o">=</span> <span class="n">WcsGeom</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">skydir</span><span class="o">=</span><span class="p">(</span><span class="mf">83.63</span><span class="p">,</span> <span class="mf">22.01</span><span class="p">),</span>
    <span class="n">axes</span><span class="o">=</span><span class="p">[</span><span class="n">energy_axis</span><span class="p">],</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">5</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span>
    <span class="n">binsz</span><span class="o">=</span><span class="mf">0.05</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span>
    <span class="n">frame</span><span class="o">=</span><span class="s2">&quot;icrs&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">dataset_empty</span> <span class="o">=</span> <span class="n">MapDataset</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">geom</span><span class="o">=</span><span class="n">geom</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my-dataset&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>It is good practice to define a name for the dataset, such that you can identify it later by name. However if you define a name it <strong>must</strong> be unique. Now we can already print the dataset:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">dataset_empty</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
MapDataset
----------

  Name                            : my-dataset

  Total counts                    : 0
  Total background counts         : 0.00
  Total excess counts             : 0.00

  Predicted counts                : 0.00
  Predicted background counts     : 0.00
  Predicted excess counts         : nan

  Exposure min                    : 0.00e+00 m2 s
  Exposure max                    : 0.00e+00 m2 s

  Number of total bins            : 110000
  Number of fit bins              : 0

  Fit statistic type              : cash
  Fit statistic value (-2 log(L)) : nan

  Number of models                : 0
  Number of parameters            : 0
  Number of free parameters       : 0


</pre></div></div>
</div>
<p>The printout shows the key summary information of the dataset, such as total counts, fit statistics, model information etc.</p>
<p><code class="docutils literal notranslate"><span class="pre">MapDataset.from_geom</span></code> has additional keywords, that can be used to define the binning of the IRF related maps:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># choose a different true energy binning for the exposure, psf and edisp</span>
<span class="n">energy_axis_true</span> <span class="o">=</span> <span class="n">MapAxis</span><span class="o">.</span><span class="n">from_energy_bounds</span><span class="p">(</span>
    <span class="mf">0.1</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">nbin</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;energy_true&quot;</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;TeV&quot;</span><span class="p">,</span> <span class="n">per_decade</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="c1"># choose a different rad axis binning for the psf</span>
<span class="n">rad_axis</span> <span class="o">=</span> <span class="n">MapAxis</span><span class="o">.</span><span class="n">from_bounds</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">nbin</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;deg&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;rad&quot;</span><span class="p">)</span>

<span class="n">gti</span> <span class="o">=</span> <span class="n">GTI</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="mi">0</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">s</span><span class="p">,</span> <span class="mi">1000</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">s</span><span class="p">)</span>

<span class="n">dataset_empty</span> <span class="o">=</span> <span class="n">MapDataset</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">geom</span><span class="o">=</span><span class="n">geom</span><span class="p">,</span>
    <span class="n">energy_axis_true</span><span class="o">=</span><span class="n">energy_axis_true</span><span class="p">,</span>
    <span class="n">rad_axis</span><span class="o">=</span><span class="n">rad_axis</span><span class="p">,</span>
    <span class="n">binsz_irf</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
    <span class="n">gti</span><span class="o">=</span><span class="n">gti</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;dataset-empty&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>To see the geometry of each map, we can use:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataset_empty</span><span class="o">.</span><span class="n">geoms</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;geom&#39;: WcsGeom

        axes       : [&#39;lon&#39;, &#39;lat&#39;, &#39;energy&#39;]
        shape      : (100, 100, 11)
        ndim       : 3
        frame      : icrs
        projection : CAR
        center     : 83.6 deg, 22.0 deg
        width      : 5.0 deg x 5.0 deg
        wcs ref    : 83.6 deg, 22.0 deg,
 &#39;geom_exposure&#39;: WcsGeom

        axes       : [&#39;lon&#39;, &#39;lat&#39;, &#39;energy_true&#39;]
        shape      : (100, 100, 33)
        ndim       : 3
        frame      : icrs
        projection : CAR
        center     : 83.6 deg, 22.0 deg
        width      : 5.0 deg x 5.0 deg
        wcs ref    : 83.6 deg, 22.0 deg,
 &#39;geom_psf&#39;: WcsGeom

        axes       : [&#39;lon&#39;, &#39;lat&#39;, &#39;rad&#39;, &#39;energy_true&#39;]
        shape      : (50, 50, 50, 33)
        ndim       : 4
        frame      : icrs
        projection : CAR
        center     : 83.6 deg, 22.0 deg
        width      : 5.0 deg x 5.0 deg
        wcs ref    : 83.6 deg, 22.0 deg,
 &#39;geom_edisp&#39;: WcsGeom

        axes       : [&#39;lon&#39;, &#39;lat&#39;, &#39;energy&#39;, &#39;energy_true&#39;]
        shape      : (50, 50, 11, 33)
        ndim       : 4
        frame      : icrs
        projection : CAR
        center     : 83.6 deg, 22.0 deg
        width      : 5.0 deg x 5.0 deg
        wcs ref    : 83.6 deg, 22.0 deg}
</pre></div></div>
</div>
<p>Another way to create a <code class="docutils literal notranslate"><span class="pre">MapDataset</span></code> is to just read an existing one from a FITS file:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataset_cta</span> <span class="o">=</span> <span class="n">MapDataset</span><span class="o">.</span><span class="n">read</span><span class="p">(</span>
    <span class="s2">&quot;$GAMMAPY_DATA/cta-1dc-gc/cta-1dc-gc.fits.gz&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;dataset-cta&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">dataset_cta</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
MapDataset
----------

  Name                            : dataset-cta

  Total counts                    : 104317
  Total background counts         : 91507.70
  Total excess counts             : 12809.30

  Predicted counts                : 91507.69
  Predicted background counts     : 91507.70
  Predicted excess counts         : nan

  Exposure min                    : 6.28e+07 m2 s
  Exposure max                    : 1.90e+10 m2 s

  Number of total bins            : 768000
  Number of fit bins              : 691680

  Fit statistic type              : cash
  Fit statistic value (-2 log(L)) : nan

  Number of models                : 0
  Number of parameters            : 0
  Number of free parameters       : 0


</pre></div></div>
</div>
</section>
</section>
<section id="Accessing-contents-of-a-dataset">
<h2>Accessing contents of a dataset<a class="headerlink" href="#Accessing-contents-of-a-dataset" title="Permalink to this headline">#</a></h2>
<p>To further explore the contents of a <code class="docutils literal notranslate"><span class="pre">Dataset</span></code>, you can use e.g. <code class="docutils literal notranslate"><span class="pre">.info_dict()</span></code></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># For a quick info, use</span>
<span class="n">dataset_cta</span><span class="o">.</span><span class="n">info_dict</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;name&#39;: &#39;dataset-cta&#39;,
 &#39;counts&#39;: 104317,
 &#39;excess&#39;: 12809.3046875,
 &#39;sqrt_ts&#39;: 41.41009347393684,
 &#39;background&#39;: 91507.6953125,
 &#39;npred&#39;: 91507.68628538586,
 &#39;npred_background&#39;: 91507.6953125,
 &#39;npred_signal&#39;: nan,
 &#39;exposure_min&#39;: &lt;Quantity 62842028. m2 s&gt;,
 &#39;exposure_max&#39;: &lt;Quantity 1.90242058e+10 m2 s&gt;,
 &#39;livetime&#39;: &lt;Quantity 5292.00010298 s&gt;,
 &#39;ontime&#39;: &lt;Quantity 5400. s&gt;,
 &#39;counts_rate&#39;: &lt;Quantity 19.71220672 1 / s&gt;,
 &#39;background_rate&#39;: &lt;Quantity 17.29170324 1 / s&gt;,
 &#39;excess_rate&#39;: &lt;Quantity 2.42050348 1 / s&gt;,
 &#39;n_bins&#39;: 768000,
 &#39;n_fit_bins&#39;: 691680,
 &#39;stat_type&#39;: &#39;cash&#39;,
 &#39;stat_sum&#39;: nan}
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># For a quick view, use</span>
<span class="n">dataset_cta</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_api_datasets_18_0.png" src="../../_images/tutorials_api_datasets_18_0.png" />
</div>
</div>
<p>And access individual maps like:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">counts_image</span> <span class="o">=</span> <span class="n">dataset_cta</span><span class="o">.</span><span class="n">counts</span><span class="o">.</span><span class="n">sum_over_axes</span><span class="p">()</span>
<span class="n">counts_image</span><span class="o">.</span><span class="n">smooth</span><span class="p">(</span><span class="s2">&quot;0.1 deg&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;WCSAxesSubplot:xlabel=&#39;Galactic Longitude&#39;, ylabel=&#39;Galactic Latitude&#39;&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_api_datasets_20_1.png" src="../../_images/tutorials_api_datasets_20_1.png" />
</div>
</div>
<p>Of course you can also access IRF related maps, e.g. the psf as <code class="docutils literal notranslate"><span class="pre">PSFMap</span></code>:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataset_cta</span><span class="o">.</span><span class="n">psf</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;gammapy.irf.psf.map.PSFMap at 0x168219d90&gt;
</pre></div></div>
</div>
<p>And use any method on the <code class="docutils literal notranslate"><span class="pre">PSFMap</span></code> object:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataset_cta</span><span class="o">.</span><span class="n">psf</span><span class="o">.</span><span class="n">plot_containment_radius_vs_energy</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;AxesSubplot:xlabel=&#39;Energy (TeV)&#39;, ylabel=&#39;Containment radius (deg)&#39;&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_api_datasets_24_1.png" src="../../_images/tutorials_api_datasets_24_1.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">edisp_kernel</span> <span class="o">=</span> <span class="n">dataset_cta</span><span class="o">.</span><span class="n">edisp</span><span class="o">.</span><span class="n">get_edisp_kernel</span><span class="p">()</span>
<span class="n">edisp_kernel</span><span class="o">.</span><span class="n">plot_matrix</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;AxesSubplot:xlabel=&#39;True Energy [TeV]&#39;, ylabel=&#39;Energy [TeV]&#39;&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_api_datasets_25_1.png" src="../../_images/tutorials_api_datasets_25_1.png" />
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">MapDataset</span></code> typically also contains the information on the residual hadronic background, stored in <code class="docutils literal notranslate"><span class="pre">MapDataset.background</span></code> as a map:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataset_cta</span><span class="o">.</span><span class="n">background</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
WcsNDMap

        geom  : WcsGeom
        axes  : [&#39;lon&#39;, &#39;lat&#39;, &#39;energy&#39;]
        shape : (320, 240, 10)
        ndim  : 3
        unit  :
        dtype : &gt;f4
</pre></div></div>
</div>
<p>As a next step we define a minimal model on the dataset using the <code class="docutils literal notranslate"><span class="pre">.models</span></code> setter:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">SkyModel</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;pl&quot;</span><span class="p">,</span> <span class="s2">&quot;point&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;gc&quot;</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">spatial_model</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">SkyCoord</span><span class="p">(</span><span class="s2">&quot;0d&quot;</span><span class="p">,</span> <span class="s2">&quot;0d&quot;</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="s2">&quot;galactic&quot;</span><span class="p">)</span>
<span class="n">model_bkg</span> <span class="o">=</span> <span class="n">FoVBackgroundModel</span><span class="p">(</span><span class="n">dataset_name</span><span class="o">=</span><span class="s2">&quot;dataset-cta&quot;</span><span class="p">)</span>

<span class="n">dataset_cta</span><span class="o">.</span><span class="n">models</span> <span class="o">=</span> <span class="p">[</span><span class="n">model</span><span class="p">,</span> <span class="n">model_bkg</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p>Assigning models to datasets is covered in more detail in the <a class="reference internal" href="model_management.html"><span class="doc">Modeling notebook</span></a>. Printing the dataset will now show the mode components:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">dataset_cta</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
MapDataset
----------

  Name                            : dataset-cta

  Total counts                    : 104317
  Total background counts         : 91507.70
  Total excess counts             : 12809.30

  Predicted counts                : 91719.65
  Predicted background counts     : 91507.69
  Predicted excess counts         : 211.96

  Exposure min                    : 6.28e+07 m2 s
  Exposure max                    : 1.90e+10 m2 s

  Number of total bins            : 768000
  Number of fit bins              : 691680

  Fit statistic type              : cash
  Fit statistic value (-2 log(L)) : 424648.57

  Number of models                : 2
  Number of parameters            : 8
  Number of free parameters       : 5

  Component 0: SkyModel

    Name                      : gc
    Datasets names            : None
    Spectral model type       : PowerLawSpectralModel
    Spatial  model type       : PointSpatialModel
    Temporal model type       :
    Parameters:
      index                         :      2.000   +/-    0.00
      amplitude                     :   1.00e-12   +/- 0.0e+00 1 / (cm2 s TeV)
      reference             (frozen):      1.000       TeV
      lon_0                         :      4.650   +/-    0.00 rad
      lat_0                         :     -0.505   +/-    0.00 rad

  Component 1: FoVBackgroundModel

    Name                      : dataset-cta-bkg
    Datasets names            : [&#39;dataset-cta&#39;]
    Spectral model type       : PowerLawNormSpectralModel
    Parameters:
      norm                          :      1.000   +/-    0.00
      tilt                  (frozen):      0.000
      reference             (frozen):      1.000       TeV


</pre></div></div>
</div>
<p>Now we can use <code class="docutils literal notranslate"><span class="pre">.npred()</span></code> to get a map of the total predicted counts of the model:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">npred</span> <span class="o">=</span> <span class="n">dataset_cta</span><span class="o">.</span><span class="n">npred</span><span class="p">()</span>
<span class="n">npred</span><span class="o">.</span><span class="n">sum_over_axes</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;WCSAxesSubplot:xlabel=&#39;Galactic Longitude&#39;, ylabel=&#39;Galactic Latitude&#39;&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_api_datasets_33_1.png" src="../../_images/tutorials_api_datasets_33_1.png" />
</div>
</div>
<p>To get the predicted counts from an individual model component we can use:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">npred_source</span> <span class="o">=</span> <span class="n">dataset_cta</span><span class="o">.</span><span class="n">npred_signal</span><span class="p">(</span><span class="n">model_name</span><span class="o">=</span><span class="s2">&quot;gc&quot;</span><span class="p">)</span>
<span class="n">npred_source</span><span class="o">.</span><span class="n">sum_over_axes</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;WCSAxesSubplot:xlabel=&#39;Galactic Longitude&#39;, ylabel=&#39;Galactic Latitude&#39;&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_api_datasets_35_1.png" src="../../_images/tutorials_api_datasets_35_1.png" />
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">MapDataset.background</span></code> contains the background map computed from the IRF. Internally it will be combined with a <code class="docutils literal notranslate"><span class="pre">FoVBackgroundModel</span></code>, to allow for adjusting the backgroun model during a fit. To get the model corrected background, one can use <code class="docutils literal notranslate"><span class="pre">dataset.npred_background()</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">npred_background</span> <span class="o">=</span> <span class="n">dataset_cta</span><span class="o">.</span><span class="n">npred_background</span><span class="p">()</span>
<span class="n">npred_background</span><span class="o">.</span><span class="n">sum_over_axes</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;WCSAxesSubplot:xlabel=&#39;Galactic Longitude&#39;, ylabel=&#39;Galactic Latitude&#39;&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_api_datasets_37_1.png" src="../../_images/tutorials_api_datasets_37_1.png" />
</div>
</div>
<section id="Using-masks">
<h3>Using masks<a class="headerlink" href="#Using-masks" title="Permalink to this headline">#</a></h3>
<p>There are two masks that can be set on a <code class="docutils literal notranslate"><span class="pre">Dataset</span></code>, <code class="docutils literal notranslate"><span class="pre">mask_safe</span></code> and <code class="docutils literal notranslate"><span class="pre">mask_fit</span></code>.</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">mask_safe</span></code> is computed during the data reduction process according to the specified selection cuts, and should not be changed by the user.</p></li>
<li><p>During modelling and fitting, the user might want to additionally ignore some parts of a reduced dataset, e.g. to restrict the fit to a specific energy range or to ignore parts of the region of interest. This should be done by applying the <code class="docutils literal notranslate"><span class="pre">mask_fit</span></code>. To see details of applying masks, please refer to <a class="reference internal" href="mask_maps.html#Masks-for-fitting:-mask_fit"><span class="std std-ref">Masks-for-fitting</span></a></p></li>
</ul>
<p>Both the <code class="docutils literal notranslate"><span class="pre">mask_fit</span></code> and <code class="docutils literal notranslate"><span class="pre">mask_safe</span></code> must have the safe <code class="docutils literal notranslate"><span class="pre">geom</span></code> as the <code class="docutils literal notranslate"><span class="pre">counts</span></code> and <code class="docutils literal notranslate"><span class="pre">background</span></code> maps.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># eg: to see the safe data range</span>
<span class="n">dataset_cta</span><span class="o">.</span><span class="n">mask_safe</span><span class="o">.</span><span class="n">plot_grid</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_api_datasets_39_0.png" src="../../_images/tutorials_api_datasets_39_0.png" />
</div>
</div>
<p>In addition it is possible to define a custom <code class="docutils literal notranslate"><span class="pre">mask_fit</span></code>:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># To apply a mask fit - in enegy and space</span>
<span class="n">region</span> <span class="o">=</span> <span class="n">CircleSkyRegion</span><span class="p">(</span><span class="n">SkyCoord</span><span class="p">(</span><span class="s2">&quot;0d&quot;</span><span class="p">,</span> <span class="s2">&quot;0d&quot;</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="s2">&quot;galactic&quot;</span><span class="p">),</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">)</span>

<span class="n">geom</span> <span class="o">=</span> <span class="n">dataset_cta</span><span class="o">.</span><span class="n">counts</span><span class="o">.</span><span class="n">geom</span>

<span class="n">mask_space</span> <span class="o">=</span> <span class="n">geom</span><span class="o">.</span><span class="n">region_mask</span><span class="p">([</span><span class="n">region</span><span class="p">])</span>
<span class="n">mask_energy</span> <span class="o">=</span> <span class="n">geom</span><span class="o">.</span><span class="n">energy_mask</span><span class="p">(</span><span class="mf">0.3</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">TeV</span><span class="p">,</span> <span class="mi">8</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">TeV</span><span class="p">)</span>
<span class="n">dataset_cta</span><span class="o">.</span><span class="n">mask_fit</span> <span class="o">=</span> <span class="n">mask_space</span> <span class="o">&amp;</span> <span class="n">mask_energy</span>
<span class="n">dataset_cta</span><span class="o">.</span><span class="n">mask_fit</span><span class="o">.</span><span class="n">plot_grid</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">add_cbar</span><span class="o">=</span><span class="kc">True</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_api_datasets_41_0.png" src="../../_images/tutorials_api_datasets_41_0.png" />
</div>
</div>
<p>To access the energy range defined by the mask you can use: - <code class="docutils literal notranslate"><span class="pre">dataset.energy_range_safe</span></code> : energy range definedby the <code class="docutils literal notranslate"><span class="pre">mask_safe</span></code> - <code class="docutils literal notranslate"><span class="pre">dataset.energy_range_fit</span></code> : energy range defined by the <code class="docutils literal notranslate"><span class="pre">mask_fit</span></code> - <code class="docutils literal notranslate"><span class="pre">dataset.energy_range</span></code> : the final energy range used in likelihood computation</p>
<p>These methods return two maps, with the <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code> energy values at each spatial pixel</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">e_min</span><span class="p">,</span> <span class="n">e_max</span> <span class="o">=</span> <span class="n">dataset_cta</span><span class="o">.</span><span class="n">energy_range</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># To see the lower energy threshold at each point</span>
<span class="n">e_min</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">add_cbar</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;WCSAxesSubplot:xlabel=&#39;Galactic Longitude&#39;, ylabel=&#39;Galactic Latitude&#39;&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_api_datasets_44_1.png" src="../../_images/tutorials_api_datasets_44_1.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># To see the lower energy threshold at each point</span>
<span class="n">e_max</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">add_cbar</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;WCSAxesSubplot:xlabel=&#39;Galactic Longitude&#39;, ylabel=&#39;Galactic Latitude&#39;&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_api_datasets_45_1.png" src="../../_images/tutorials_api_datasets_45_1.png" />
</div>
</div>
<p>Just as for <code class="docutils literal notranslate"><span class="pre">Map</span></code> objects it is possible to cutout a whole <code class="docutils literal notranslate"><span class="pre">MapDataset</span></code>, which will perform the cutout for all maps in parallel.Optionally one can provide a new name to the resulting dataset:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cutout</span> <span class="o">=</span> <span class="n">dataset_cta</span><span class="o">.</span><span class="n">cutout</span><span class="p">(</span>
    <span class="n">position</span><span class="o">=</span><span class="n">SkyCoord</span><span class="p">(</span><span class="s2">&quot;0d&quot;</span><span class="p">,</span> <span class="s2">&quot;0d&quot;</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="s2">&quot;galactic&quot;</span><span class="p">),</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">2</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;cta-cutout&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cutout</span><span class="o">.</span><span class="n">counts</span><span class="o">.</span><span class="n">sum_over_axes</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;WCSAxesSubplot:xlabel=&#39;Galactic Longitude&#39;, ylabel=&#39;Galactic Latitude&#39;&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_api_datasets_48_1.png" src="../../_images/tutorials_api_datasets_48_1.png" />
</div>
</div>
<p>It is also possible to slice a <code class="docutils literal notranslate"><span class="pre">MapDataset</span></code> in energy:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sliced</span> <span class="o">=</span> <span class="n">dataset_cta</span><span class="o">.</span><span class="n">slice_by_energy</span><span class="p">(</span>
    <span class="n">energy_min</span><span class="o">=</span><span class="mi">1</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">TeV</span><span class="p">,</span> <span class="n">energy_max</span><span class="o">=</span><span class="mi">5</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">TeV</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;slice-energy&quot;</span>
<span class="p">)</span>
<span class="n">sliced</span><span class="o">.</span><span class="n">counts</span><span class="o">.</span><span class="n">plot_grid</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_api_datasets_50_0.png" src="../../_images/tutorials_api_datasets_50_0.png" />
</div>
</div>
<p>The same operation will be applied to all other maps contained in the datasets such as <code class="docutils literal notranslate"><span class="pre">mask_fit</span></code>:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sliced</span><span class="o">.</span><span class="n">mask_fit</span><span class="o">.</span><span class="n">plot_grid</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_api_datasets_52_0.png" src="../../_images/tutorials_api_datasets_52_0.png" />
</div>
</div>
</section>
<section id="Resampling-datasets">
<h3>Resampling datasets<a class="headerlink" href="#Resampling-datasets" title="Permalink to this headline">#</a></h3>
<p>It can often be useful to coarsely rebin an initially computed datasets by a specified factor. This can be done in either spatial or energy axes:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">downsampled</span> <span class="o">=</span> <span class="n">dataset_cta</span><span class="o">.</span><span class="n">downsample</span><span class="p">(</span><span class="n">factor</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
<span class="n">downsampled</span><span class="o">.</span><span class="n">counts</span><span class="o">.</span><span class="n">sum_over_axes</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;WCSAxesSubplot:xlabel=&#39;Galactic Longitude&#39;, ylabel=&#39;Galactic Latitude&#39;&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_api_datasets_54_1.png" src="../../_images/tutorials_api_datasets_54_1.png" />
</div>
</div>
<p>And the same downsampling process is possible along the energy axis:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">downsampled_energy</span> <span class="o">=</span> <span class="n">dataset_cta</span><span class="o">.</span><span class="n">downsample</span><span class="p">(</span>
    <span class="n">factor</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">axis_name</span><span class="o">=</span><span class="s2">&quot;energy&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;downsampled-energy&quot;</span>
<span class="p">)</span>
<span class="n">downsampled_energy</span><span class="o">.</span><span class="n">counts</span><span class="o">.</span><span class="n">plot_grid</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_api_datasets_56_0.png" src="../../_images/tutorials_api_datasets_56_0.png" />
</div>
</div>
<p>In the printout one can see that the actual number of counts is preserved during the downsampling:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">downsampled_energy</span><span class="p">,</span> <span class="n">dataset_cta</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
MapDataset
----------

  Name                            : downsampled-energy

  Total counts                    : 104317
  Total background counts         : 91507.69
  Total excess counts             : 12809.31

  Predicted counts                : 91507.69
  Predicted background counts     : 91507.69
  Predicted excess counts         : nan

  Exposure min                    : 6.28e+07 m2 s
  Exposure max                    : 1.90e+10 m2 s

  Number of total bins            : 153600
  Number of fit bins              : 22608

  Fit statistic type              : cash
  Fit statistic value (-2 log(L)) : nan

  Number of models                : 0
  Number of parameters            : 0
  Number of free parameters       : 0

 MapDataset
----------

  Name                            : dataset-cta

  Total counts                    : 104317
  Total background counts         : 91507.70
  Total excess counts             : 12809.30

  Predicted counts                : 91719.65
  Predicted background counts     : 91507.69
  Predicted excess counts         : 211.96

  Exposure min                    : 6.28e+07 m2 s
  Exposure max                    : 1.90e+10 m2 s

  Number of total bins            : 768000
  Number of fit bins              : 67824

  Fit statistic type              : cash
  Fit statistic value (-2 log(L)) : 44317.66

  Number of models                : 2
  Number of parameters            : 8
  Number of free parameters       : 5

  Component 0: SkyModel

    Name                      : gc
    Datasets names            : None
    Spectral model type       : PowerLawSpectralModel
    Spatial  model type       : PointSpatialModel
    Temporal model type       :
    Parameters:
      index                         :      2.000   +/-    0.00
      amplitude                     :   1.00e-12   +/- 0.0e+00 1 / (cm2 s TeV)
      reference             (frozen):      1.000       TeV
      lon_0                         :      4.650   +/-    0.00 rad
      lat_0                         :     -0.505   +/-    0.00 rad

  Component 1: FoVBackgroundModel

    Name                      : dataset-cta-bkg
    Datasets names            : [&#39;dataset-cta&#39;]
    Spectral model type       : PowerLawNormSpectralModel
    Parameters:
      norm                          :      1.000   +/-    0.00
      tilt                  (frozen):      0.000
      reference             (frozen):      1.000       TeV


</pre></div></div>
</div>
<p>We can also resample the finer binned datasets to an arbitrary coarser energy binning using:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">energy_axis_new</span> <span class="o">=</span> <span class="n">MapAxis</span><span class="o">.</span><span class="n">from_energy_edges</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">TeV</span><span class="p">)</span>
<span class="n">resampled</span> <span class="o">=</span> <span class="n">dataset_cta</span><span class="o">.</span><span class="n">resample_energy_axis</span><span class="p">(</span><span class="n">energy_axis</span><span class="o">=</span><span class="n">energy_axis_new</span><span class="p">)</span>
<span class="n">resampled</span><span class="o">.</span><span class="n">counts</span><span class="o">.</span><span class="n">plot_grid</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_api_datasets_60_0.png" src="../../_images/tutorials_api_datasets_60_0.png" />
</div>
</div>
<p>To squash the whole dataset into a single energy bin there is the <code class="docutils literal notranslate"><span class="pre">.to_image()</span></code> convenience method:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataset_image</span> <span class="o">=</span> <span class="n">dataset_cta</span><span class="o">.</span><span class="n">to_image</span><span class="p">()</span>
<span class="n">dataset_image</span><span class="o">.</span><span class="n">counts</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;WCSAxesSubplot:xlabel=&#39;Galactic Longitude&#39;, ylabel=&#39;Galactic Latitude&#39;&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_api_datasets_62_1.png" src="../../_images/tutorials_api_datasets_62_1.png" />
</div>
</div>
</section>
</section>
<section id="SpectrumDataset">
<h2>SpectrumDataset<a class="headerlink" href="#SpectrumDataset" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">SpectrumDataset</span></code> inherits from a <code class="docutils literal notranslate"><span class="pre">MapDataset</span></code>, and is specially adapted for 1D spectral analysis, and uses a <code class="docutils literal notranslate"><span class="pre">RegionGeom</span></code> instead of a <code class="docutils literal notranslate"><span class="pre">WcsGeom</span></code>. A <code class="docutils literal notranslate"><span class="pre">MapDatset</span></code> can be converted to a <code class="docutils literal notranslate"><span class="pre">SpectrumDataset</span></code>, by summing the <code class="docutils literal notranslate"><span class="pre">counts</span></code> and <code class="docutils literal notranslate"><span class="pre">background</span></code> inside the <code class="docutils literal notranslate"><span class="pre">on_region</span></code>, which can then be used for classical spectral analysis. Containment correction is feasible only for circular regions.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">region</span> <span class="o">=</span> <span class="n">CircleSkyRegion</span><span class="p">(</span>
    <span class="n">SkyCoord</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;deg&quot;</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="s2">&quot;galactic&quot;</span><span class="p">),</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span>
<span class="p">)</span>
<span class="n">spectrum_dataset</span> <span class="o">=</span> <span class="n">dataset_cta</span><span class="o">.</span><span class="n">to_spectrum_dataset</span><span class="p">(</span>
    <span class="n">region</span><span class="p">,</span> <span class="n">containment_correction</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;spectrum-dataset&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># For a quick look</span>
<span class="n">spectrum_dataset</span><span class="o">.</span><span class="n">peek</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_api_datasets_65_0.png" src="../../_images/tutorials_api_datasets_65_0.png" />
</div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">MapDataset</span></code> can also be integrated over the <code class="docutils literal notranslate"><span class="pre">on_region</span></code> to create a <code class="docutils literal notranslate"><span class="pre">MapDataset</span></code> with a <code class="docutils literal notranslate"><span class="pre">RegionGeom</span></code>. Complex regions can be handled and since the full IRFs are used, containment correction is not required.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">reg_dataset</span> <span class="o">=</span> <span class="n">dataset_cta</span><span class="o">.</span><span class="n">to_region_map_dataset</span><span class="p">(</span>
    <span class="n">region</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;region-map-dataset&quot;</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">reg_dataset</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
MapDataset
----------

  Name                            : region-map-dataset

  Total counts                    : 5644
  Total background counts         : 3323.66
  Total excess counts             : 2320.34

  Predicted counts                : 3323.66
  Predicted background counts     : 3323.66
  Predicted excess counts         : nan

  Exposure min                    : 4.66e+08 m2 s
  Exposure max                    : 1.89e+10 m2 s

  Number of total bins            : 10
  Number of fit bins              : 6

  Fit statistic type              : cash
  Fit statistic value (-2 log(L)) : nan

  Number of models                : 0
  Number of parameters            : 0
  Number of free parameters       : 0


</pre></div></div>
</div>
</section>
<section id="FluxPointsDataset">
<h2>FluxPointsDataset<a class="headerlink" href="#FluxPointsDataset" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">FluxPointsDataset</span></code> is a <code class="docutils literal notranslate"><span class="pre">Dataset</span></code> container for precomputed flux points, which can be then used in fitting. <code class="docutils literal notranslate"><span class="pre">FluxPointsDataset</span></code> cannot be read directly, but should be read through <code class="docutils literal notranslate"><span class="pre">FluxPoints</span></code>, with an additional <code class="docutils literal notranslate"><span class="pre">SkyModel</span></code>. Similarly, <code class="docutils literal notranslate"><span class="pre">FluxPointsDataset.write</span></code> only saves the <code class="docutils literal notranslate"><span class="pre">data</span></code> component to disk.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">flux_points</span> <span class="o">=</span> <span class="n">FluxPoints</span><span class="o">.</span><span class="n">read</span><span class="p">(</span>
    <span class="s2">&quot;$GAMMAPY_DATA/tests/spectrum/flux_points/diff_flux_points.fits&quot;</span>
<span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">SkyModel</span><span class="p">(</span><span class="n">spectral_model</span><span class="o">=</span><span class="n">PowerLawSpectralModel</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mf">2.3</span><span class="p">))</span>
<span class="n">fp_dataset</span> <span class="o">=</span> <span class="n">FluxPointsDataset</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">flux_points</span><span class="p">,</span> <span class="n">models</span><span class="o">=</span><span class="n">model</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
No reference model set for FluxMaps. Assuming point source with E^-2 spectrum.
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fp_dataset</span><span class="o">.</span><span class="n">plot_spectrum</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;AxesSubplot:xlabel=&#39;Energy [MeV]&#39;, ylabel=&#39;e2dnde [erg / (cm2 s)]&#39;&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_api_datasets_70_1.png" src="../../_images/tutorials_api_datasets_70_1.png" />
</div>
</div>
<p>The masks on <code class="docutils literal notranslate"><span class="pre">FluxPointsDataset</span></code> are <code class="docutils literal notranslate"><span class="pre">np.array</span></code> and the data is a <code class="docutils literal notranslate"><span class="pre">FluxPoints</span></code> object. The <code class="docutils literal notranslate"><span class="pre">mask_safe</span></code>, by default, masks the upper limit points</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fp_dataset</span><span class="o">.</span><span class="n">mask_safe</span>  <span class="c1"># Note: the mask here is simply a numpy array</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([ True,  True,  True,  True,  True,  True,  True,  True,  True,
        True,  True,  True,  True,  True,  True,  True,  True, False,
        True, False, False,  True, False, False])
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fp_dataset</span><span class="o">.</span><span class="n">data</span>  <span class="c1"># is a `FluxPoints` object</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;gammapy.estimators.points.core.FluxPoints at 0x16928c220&gt;
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fp_dataset</span><span class="o">.</span><span class="n">data_shape</span><span class="p">()</span>  <span class="c1"># number of data points</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(24,)
</pre></div></div>
</div>
<p>For an example of fitting <code class="docutils literal notranslate"><span class="pre">FluxPoints</span></code>, see <a class="reference internal" href="../analysis/1D/sed_fitting.html"><span class="doc">flux point fitting</span></a>, and can be used for catalog objects, eg see <a class="reference internal" href="catalog.html"><span class="doc">catalog notebook</span></a></p>
</section>
<section id="Datasets">
<h2>Datasets<a class="headerlink" href="#Datasets" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">Datasets</span></code> are a collection of <code class="docutils literal notranslate"><span class="pre">Dataset</span></code> objects. They can be of the same type, or of different types, eg: mix of <code class="docutils literal notranslate"><span class="pre">FluxPointDataset</span></code>, <code class="docutils literal notranslate"><span class="pre">MapDataset</span></code> and <code class="docutils literal notranslate"><span class="pre">SpectrumDataset</span></code>.</p>
<p>For modelling and fitting of a list of <code class="docutils literal notranslate"><span class="pre">Dataset</span></code> objects, you can either - Do a joint fitting of all the datasets together - Stack the datasets together, and then fit them.</p>
<p><code class="docutils literal notranslate"><span class="pre">Datasets</span></code> is a convenient tool to handle joint fitting of simultaneous datasets. As an example, please see the <a class="reference internal" href="../analysis/3D/analysis_mwl.html"><span class="doc">joint fitting tutorial</span></a></p>
<p>To see how stacking is performed, please see <a class="reference internal" href="../../userguide/dl4.html#stacking-multiple-datasets"><span class="std std-ref">Implementation of stacking</span></a></p>
<p>To create a <code class="docutils literal notranslate"><span class="pre">Datasets</span></code> object, pass a list of <code class="docutils literal notranslate"><span class="pre">Dataset</span></code> on init, eg</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">datasets</span> <span class="o">=</span> <span class="n">Datasets</span><span class="p">([</span><span class="n">dataset_empty</span><span class="p">,</span> <span class="n">dataset_cta</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[44]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">datasets</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Datasets
--------

Dataset 0:

  Type       : MapDataset
  Name       : dataset-empty
  Instrument :
  Models     :

Dataset 1:

  Type       : MapDataset
  Name       : dataset-cta
  Instrument :
  Models     : [&#39;gc&#39;, &#39;dataset-cta-bkg&#39;]


</pre></div></div>
</div>
<p>If all the datasets have the same type we can also print an info table, collectiong all the information from the individual casll to <code class="docutils literal notranslate"><span class="pre">Dataset.info_dict()</span></code>:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[45]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">datasets</span><span class="o">.</span><span class="n">info_table</span><span class="p">()</span>  <span class="c1"># quick info of all datasets</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[45]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><i>Table length=2</i>
<table id="table6104320032" class="table-striped table-bordered table-condensed">
<thead><tr><th>name</th><th>counts</th><th>excess</th><th>sqrt_ts</th><th>background</th><th>npred</th><th>npred_background</th><th>npred_signal</th><th>exposure_min</th><th>exposure_max</th><th>livetime</th><th>ontime</th><th>counts_rate</th><th>background_rate</th><th>excess_rate</th><th>n_bins</th><th>n_fit_bins</th><th>stat_type</th><th>stat_sum</th></tr></thead>
<thead><tr><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th>m2 s</th><th>m2 s</th><th>s</th><th>s</th><th>1 / s</th><th>1 / s</th><th>1 / s</th><th></th><th></th><th></th><th></th></tr></thead>
<thead><tr><th>str13</th><th>int64</th><th>float64</th><th>float64</th><th>float64</th><th>float64</th><th>float64</th><th>float64</th><th>float64</th><th>float64</th><th>float64</th><th>float64</th><th>float64</th><th>float64</th><th>float64</th><th>int64</th><th>int64</th><th>str4</th><th>float64</th></tr></thead>
<tr><td>dataset-empty</td><td>0</td><td>0.0</td><td>0.0</td><td>0.0</td><td>0.0</td><td>0.0</td><td>nan</td><td>0.0</td><td>0.0</td><td>nan</td><td>999.9999999999997</td><td>nan</td><td>nan</td><td>nan</td><td>110000</td><td>0</td><td>cash</td><td>nan</td></tr>
<tr><td>dataset-cta</td><td>104317</td><td>12809.3046875</td><td>41.41009347393684</td><td>91507.6953125</td><td>91719.64810194193</td><td>91507.68628538586</td><td>211.96181655608592</td><td>62842028.0</td><td>19024205824.0</td><td>5292.0001029780005</td><td>5400.0</td><td>19.712206721480793</td><td>17.291703237308198</td><td>2.4205034841725985</td><td>768000</td><td>67824</td><td>cash</td><td>44317.661091269125</td></tr>
</table></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[46]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">datasets</span><span class="o">.</span><span class="n">names</span>  <span class="c1"># unique name of each dataset</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[46]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;dataset-empty&#39;, &#39;dataset-cta&#39;]
</pre></div></div>
</div>
<p>We can access individual datasets in <code class="docutils literal notranslate"><span class="pre">Datasets</span></code> object by name:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[47]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">datasets</span><span class="p">[</span><span class="s2">&quot;dataset-empty&quot;</span><span class="p">]</span>  <span class="c1"># extracts the first dataset</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[47]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;gammapy.datasets.map.MapDataset at 0x1663fb130&gt;
</pre></div></div>
</div>
<p>Or by index:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[48]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">datasets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[48]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;gammapy.datasets.map.MapDataset at 0x1663fb130&gt;
</pre></div></div>
</div>
<p>Other list type operations work as well such as:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[49]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use python list convention to remove/add datasets, eg:</span>
<span class="n">datasets</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;dataset-empty&quot;</span><span class="p">)</span>
<span class="n">datasets</span><span class="o">.</span><span class="n">names</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[49]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;dataset-cta&#39;]
</pre></div></div>
</div>
<p>Or</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[50]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">datasets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">spectrum_dataset</span><span class="p">)</span>
<span class="n">datasets</span><span class="o">.</span><span class="n">names</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[50]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;dataset-cta&#39;, &#39;spectrum-dataset&#39;]
</pre></div></div>
</div>
<p>Let’s create a list of spectrum datasets to illustrate some more functionality:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[51]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">datasets</span> <span class="o">=</span> <span class="n">Datasets</span><span class="p">()</span>

<span class="n">path</span> <span class="o">=</span> <span class="n">make_path</span><span class="p">(</span><span class="s2">&quot;$GAMMAPY_DATA/joint-crab/spectra/hess&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">path</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;pha_*.fits&quot;</span><span class="p">):</span>
    <span class="n">dataset</span> <span class="o">=</span> <span class="n">SpectrumDatasetOnOff</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">datasets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[52]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">datasets</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Datasets
--------

Dataset 0:

  Type       : SpectrumDatasetOnOff
  Name       : 23559
  Instrument :
  Models     :

Dataset 1:

  Type       : SpectrumDatasetOnOff
  Name       : 23523
  Instrument :
  Models     :

Dataset 2:

  Type       : SpectrumDatasetOnOff
  Name       : 23592
  Instrument :
  Models     :

Dataset 3:

  Type       : SpectrumDatasetOnOff
  Name       : 23526
  Instrument :
  Models     :


</pre></div></div>
</div>
<p>Now we can stack all datasets using <code class="docutils literal notranslate"><span class="pre">.stack_reduce()</span></code>:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[53]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stacked</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">stack_reduce</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;stacked&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">stacked</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
SpectrumDatasetOnOff
--------------------

  Name                            : stacked

  Total counts                    : 459
  Total background counts         : 27.50
  Total excess counts             : 431.50

  Predicted counts                : 45.27
  Predicted background counts     : 45.27
  Predicted excess counts         : nan

  Exposure min                    : 2.13e+06 m2 s
  Exposure max                    : 2.63e+09 m2 s

  Number of total bins            : 80
  Number of fit bins              : 43

  Fit statistic type              : wstat
  Fit statistic value (-2 log(L)) : 1530.36

  Number of models                : 0
  Number of parameters            : 0
  Number of free parameters       : 0

  Total counts_off                : 645
  Acceptance                      : 80
  Acceptance off                  : 2016

</pre></div></div>
</div>
<p>Or slice all datasets by a given energy range:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[54]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">datasets_sliced</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">slice_by_energy</span><span class="p">(</span>
    <span class="n">energy_min</span><span class="o">=</span><span class="s2">&quot;1 TeV&quot;</span><span class="p">,</span> <span class="n">energy_max</span><span class="o">=</span><span class="s2">&quot;10 TeV&quot;</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">datasets_sliced</span><span class="o">.</span><span class="n">energy_ranges</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(&lt;Quantity [1.e+09, 1.e+09, 1.e+09, 1.e+09] keV&gt;, &lt;Quantity [1.e+10, 1.e+10, 1.e+10, 1.e+10] keV&gt;)
</pre></div></div>
</div>
<script type="application/vnd.jupyter.widget-state+json">
{"state": {"1917f4daf35c4796b919ddb168b23c5e": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": "initial"}}, "38bcf763c68040b2ab8d5cf3e16bf078": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "RadioButtonsModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "RadioButtonsModel", "_options_labels": ["linear", "sqrt", "log"], "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "RadioButtonsView", "description": "Select stretch:", "description_tooltip": null, "disabled": false, "index": 1, "layout": "IPY_MODEL_788b080909664efa9d65ebbf5672b941", "style": "IPY_MODEL_1917f4daf35c4796b919ddb168b23c5e"}}, "4e1cddcd65424e32b10840208ea6f5aa": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_cfa1c67fc4a54d4696bc6fed679055c9", "msg_id": "", "outputs": [{"data": {"image/png": "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\n", "text/plain": "<Figure size 432x288 with 2 Axes>"}, "metadata": {"needs_background": "light"}, "output_type": "display_data"}]}}, "788b080909664efa9d65ebbf5672b941": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "84c824807a124d259feb2d9739602f67": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "SelectionSliderModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "SelectionSliderModel", "_options_labels": ["1.00e-01 TeV - 1.58e-01 TeV", "1.58e-01 TeV - 2.51e-01 TeV", "2.51e-01 TeV - 3.98e-01 TeV", "3.98e-01 TeV - 6.31e-01 TeV", "6.31e-01 TeV - 1.00e+00 TeV", "1.00e+00 TeV - 1.58e+00 TeV", "1.58e+00 TeV - 2.51e+00 TeV", "2.51e+00 TeV - 3.98e+00 TeV", "3.98e+00 TeV - 6.31e+00 TeV", "6.31e+00 TeV - 1.00e+01 TeV"], "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "SelectionSliderView", "continuous_update": false, "description": "Select energy:", "description_tooltip": null, "disabled": false, "index": 0, "layout": "IPY_MODEL_f0e40ad7eb674574accde1e328e8129b", "orientation": "horizontal", "readout": true, "style": "IPY_MODEL_e325838252f141e2b54ef3a0fdceb0f9"}}, "86b748d309624744aa1dbf7f1bcf9cf3": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "cfa1c67fc4a54d4696bc6fed679055c9": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "e325838252f141e2b54ef3a0fdceb0f9": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": "initial"}}, "f0e40ad7eb674574accde1e328e8129b": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": "50%"}}, "f2ef87a1736e4d2186b67e4c75154285": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "VBoxModel", "state": {"_dom_classes": ["widget-interact"], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "VBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "VBoxView", "box_style": "", "children": ["IPY_MODEL_84c824807a124d259feb2d9739602f67", "IPY_MODEL_38bcf763c68040b2ab8d5cf3e16bf078", "IPY_MODEL_4e1cddcd65424e32b10840208ea6f5aa"], "layout": "IPY_MODEL_86b748d309624744aa1dbf7f1bcf9cf3"}}}, "version_major": 2, "version_minor": 0}
</script></section>
</section>


              </div>
              
              
          </main>
          

      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022, The Gammapy developers.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>