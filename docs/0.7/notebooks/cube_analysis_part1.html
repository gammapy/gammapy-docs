
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Cube analysis with Gammapy (part 1) &#8212; gammapy v0.7</title>
    <link rel="stylesheet" href="../_static/gammapy.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.7',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <link rel="shortcut icon" href="../_static/astropy_logo.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>
<script type="text/javascript" src="../_static/copybutton.js"></script>


  </head>
  <body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">gamma</span><span id="logotext2">py</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="Astropy Homepage" href="http://www.astropy.org"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li>
	<a href="../index.html">gammapy v0.7</a>
	 &#187;
      </li>
      
       
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #D84315;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 9ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }
</style>
<script type="text/javascript" src="../_static/linksdl.js"></script><div class="admonition note">
<p class="first"><strong>This is a fixed-text formatted version of a Jupyter notebook.</strong></p>
<p>You can contribute with your own notebooks in this <a class="reference external" href="https://github.com/gammapy/gammapy-extra/tree/master/notebooks">GitHub
repository</a>.</p>
<p class="last"><strong>Source files:</strong>
<a class="reference external" href="../_static/notebooks/cube_analysis_part1.ipynb">cube_analysis_part1.ipynb</a>
|
<a class="reference external" href="../_static/notebooks/cube_analysis_part1.py">cube_analysis_part1.py</a></p>
</div>
<div class="section" id="Cube-analysis-with-Gammapy-(part-1)">
<h1>Cube analysis with Gammapy (part 1)<a class="headerlink" href="#Cube-analysis-with-Gammapy-(part-1)" title="Permalink to this headline">¶</a></h1>
<div class="section" id="Introduction">
<h2>Introduction<a class="headerlink" href="#Introduction" title="Permalink to this headline">¶</a></h2>
<p>In order to run a cube likelihood analysis (combined spectrum and
morphology fitting), we first have to prepare the dataset and compute
the following inputs by stacking data from observation runs: * counts,
background and exposure cube * mean PSF * mean RMF</p>
<p>These are the inputs to the likelihood fitting step, where you assume a
parameterised gamma-ray emission model and fit it to the stacked data.</p>
<p>This notebook is part 1 of 2 of a tutorial how to use
<a class="reference external" href="http://docs.gammapy.org/0.7/cube/index.html">gammapy.cube</a> to do
cube analysis of IACT data. Part 1 is about these pre-computations, part
2 will be about the likelihood fitting.</p>
<p>We will be using the following classes: *
<a class="reference external" href="http://docs.gammapy.org/0.7/api/gammapy.data.DataStore.html">gammapy.data.DataStore</a>
to load the data to stack in the cube *
<a class="reference external" href="http://docs.gammapy.org/0.7/api/gammapy.image.SkyImage.html">gammapy.image.SkyImage</a>
to work with sky images *
<a class="reference external" href="http://docs.gammapy.org/0.7/api/gammapy.cube.SkyCube.html">gammapy.cube.SkyCube</a>
and
<a class="reference external" href="http://docs.gammapy.org/0.7/api/gammapy.cube.StackedObsCubeMaker.html">gammapy.cube.StackedObsCubeMaker</a>
to stack the data in the Cube *
<a class="reference external" href="http://docs.gammapy.org/0.7/api/gammapy.data.ObservationList.html">gammapy.data.ObservationList</a>
to make the computation of the mean PSF and mean RMF from a set of runs.</p>
<p>The data used in this tutorial is 4 Crab runs from H.E.S.S..</p>
</div>
<div class="section" id="Setup">
<h2>Setup<a class="headerlink" href="#Setup" title="Permalink to this headline">¶</a></h2>
<p>As always, we start with some setup for the notebook, and with imports.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">ERROR</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">astropy.units</span> <span class="kn">as</span> <span class="nn">u</span>
<span class="kn">from</span> <span class="nn">astropy.coordinates</span> <span class="kn">import</span> <span class="n">SkyCoord</span><span class="p">,</span> <span class="n">Angle</span>
<span class="kn">from</span> <span class="nn">astropy.visualization</span> <span class="kn">import</span> <span class="n">simple_norm</span>

<span class="kn">from</span> <span class="nn">gammapy.data</span> <span class="kn">import</span> <span class="n">DataStore</span>
<span class="kn">from</span> <span class="nn">gammapy.image</span> <span class="kn">import</span> <span class="n">SkyImage</span>
<span class="kn">from</span> <span class="nn">gammapy.cube</span> <span class="kn">import</span> <span class="n">SkyCube</span><span class="p">,</span> <span class="n">StackedObsCubeMaker</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Data-preparation">
<h2>Data preparation<a class="headerlink" href="#Data-preparation" title="Permalink to this headline">¶</a></h2>
<p>Gammapy only supports binned likelihood fits, so we start by defining
the spatial and energy grid of the data:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># define WCS specification</span>
<span class="n">WCS_SPEC</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;nxpix&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
            <span class="s1">&#39;nypix&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
            <span class="s1">&#39;binsz&#39;</span><span class="p">:</span> <span class="mf">0.05</span><span class="p">,</span>
            <span class="s1">&#39;xref&#39;</span><span class="p">:</span> <span class="mf">83.63</span><span class="p">,</span>
            <span class="s1">&#39;yref&#39;</span><span class="p">:</span> <span class="mf">22.01</span><span class="p">,</span>
            <span class="s1">&#39;proj&#39;</span><span class="p">:</span> <span class="s1">&#39;TAN&#39;</span><span class="p">,</span>
            <span class="s1">&#39;coordsys&#39;</span><span class="p">:</span> <span class="s1">&#39;CEL&#39;</span><span class="p">}</span>

<span class="c1"># define reconstructed energy binning</span>
<span class="n">ENERGY_SPEC</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;edges&#39;</span><span class="p">,</span>
               <span class="s1">&#39;enumbins&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
               <span class="s1">&#39;emin&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
               <span class="s1">&#39;emax&#39;</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span>
               <span class="s1">&#39;eunit&#39;</span><span class="p">:</span> <span class="s1">&#39;TeV&#39;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<p>From this we create an empty <code class="docutils literal"><span class="pre">SkyCube</span></code> object, that we will use as
reference for all other sky cube data:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># instanciate reference cube</span>
<span class="n">REF_CUBE</span> <span class="o">=</span> <span class="n">SkyCube</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="o">**</span><span class="n">WCS_SPEC</span><span class="p">,</span> <span class="o">**</span><span class="n">ENERGY_SPEC</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Next we create a <code class="docutils literal"><span class="pre">DataStore</span></code> object, which allows us to access and
load DL3 level data. In this case we will use four Crab runs of
simulated HESS data, which is bundled in gammapy-extra:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># setting up the data store</span>
<span class="n">data_store</span> <span class="o">=</span> <span class="n">DataStore</span><span class="o">.</span><span class="n">from_dir</span><span class="p">(</span><span class="s2">&quot;$GAMMAPY_EXTRA/test_datasets/cube/data&quot;</span><span class="p">)</span>

<span class="c1"># temporary fix for load psftable for one of the run that is not implemented yet...</span>
<span class="n">data_store</span><span class="o">.</span><span class="n">hdu_table</span><span class="o">.</span><span class="n">remove_row</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>For the later background estimation we define an exclusion mask. The
background image will normalized on the counts map outside the exclusion
region (the so called FOV background method). For convenience we use and
all-sky exclusin mask, which was created from the TeVCat catalog and
reproject it to our analysis region:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># read in TeVCat exclusion mask</span>
<span class="n">exclusion_mask</span> <span class="o">=</span> <span class="n">SkyImage</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;$GAMMAPY_EXTRA/datasets/exclusion_masks/tevcat_exclusion.fits&#39;</span><span class="p">)</span>

<span class="c1"># reproject exclusion mask to reference cube</span>
<span class="n">exclusion_mask</span> <span class="o">=</span> <span class="n">exclusion_mask</span><span class="o">.</span><span class="n">reproject</span><span class="p">(</span><span class="n">reference</span><span class="o">=</span><span class="n">REF_CUBE</span><span class="o">.</span><span class="n">sky_image_ref</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s1">&#39;nearest-neighbor&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>That’s what the exclusion mask looks like:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">exclusion_mask</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_cube_analysis_part1_15_0.png" src="../_images/notebooks_cube_analysis_part1_15_0.png" />
</div>
</div>
<p>Now we can feed all the input to the <code class="docutils literal"><span class="pre">StackedObsCubeMaker</span></code> class. In
addition we have to select a offset cut:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1">#Select the offset band on which you want to select the events in the FOV of each observation</span>
<span class="n">offset_band</span> <span class="o">=</span> <span class="n">Angle</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mf">2.49</span><span class="p">],</span> <span class="s1">&#39;deg&#39;</span><span class="p">)</span>

<span class="c1"># instanciate StackedObsCubeMaker</span>
<span class="n">cube_maker</span> <span class="o">=</span> <span class="n">StackedObsCubeMaker</span><span class="p">(</span>
    <span class="n">empty_cube_images</span><span class="o">=</span><span class="n">REF_CUBE</span><span class="p">,</span>
    <span class="n">empty_exposure_cube</span><span class="o">=</span><span class="n">REF_CUBE</span><span class="p">,</span>
    <span class="n">offset_band</span><span class="o">=</span><span class="n">offset_band</span><span class="p">,</span>
    <span class="n">data_store</span><span class="o">=</span><span class="n">data_store</span><span class="p">,</span>
    <span class="n">obs_table</span><span class="o">=</span><span class="n">data_store</span><span class="o">.</span><span class="n">obs_table</span><span class="p">,</span>
    <span class="n">exclusion_mask</span><span class="o">=</span><span class="n">exclusion_mask</span><span class="p">,</span>
    <span class="n">save_bkg_scale</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>We run the cube maker by calling <code class="docutils literal"><span class="pre">.make_cubes</span></code>. We pass an correlation
radius of 4 pixels to compute the Li&amp;Ma significance image:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># run cube maker</span>
<span class="n">cube_maker</span><span class="o">.</span><span class="n">make_cubes</span><span class="p">(</span><span class="n">make_background_image</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">4.</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Let’s take a look at the computed result cubes:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># get counts cube</span>
<span class="n">counts</span> <span class="o">=</span> <span class="n">cube_maker</span><span class="o">.</span><span class="n">counts_cube</span>

<span class="n">energies</span> <span class="o">=</span> <span class="n">counts</span><span class="o">.</span><span class="n">energies</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;edges&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Bin edges of the count cubes: </span><span class="se">\n</span><span class="s2">{0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">energies</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Bin edges of the count cubes:
[  0.5          1.20112443   2.88539981   6.93144843  16.65106415  40.        ] TeV
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># show counts image with idx = 0</span>
<span class="n">idx</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">counts</span><span class="o">.</span><span class="n">sky_image_idx</span><span class="p">(</span><span class="n">idx</span><span class="o">=</span><span class="n">idx</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Energy range: {emin:.2f} to {emax:.2f}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">emin</span><span class="o">=</span><span class="n">energies</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="n">emax</span><span class="o">=</span><span class="n">energies</span><span class="p">[</span><span class="n">idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_cube_analysis_part1_22_0.png" src="../_images/notebooks_cube_analysis_part1_22_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Energy range: 0.50 TeV to 1.20 TeV
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">idx</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">counts</span><span class="o">.</span><span class="n">sky_image_idx</span><span class="p">(</span><span class="n">idx</span><span class="o">=</span><span class="n">idx</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Energy range: {emin:.2f} to {emax:.2f}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">emin</span><span class="o">=</span><span class="n">energies</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="n">emax</span><span class="o">=</span><span class="n">energies</span><span class="p">[</span><span class="n">idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_cube_analysis_part1_23_0.png" src="../_images/notebooks_cube_analysis_part1_23_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Energy range: 6.93 TeV to 16.65 TeV
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">background</span> <span class="o">=</span> <span class="n">cube_maker</span><span class="o">.</span><span class="n">bkg_cube</span>

<span class="n">idx</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">background</span><span class="o">.</span><span class="n">sky_image_idx</span><span class="p">(</span><span class="n">idx</span><span class="o">=</span><span class="n">idx</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Energy range: {emin:.2f} to {emax:.2f}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">emin</span><span class="o">=</span><span class="n">energies</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="n">emax</span><span class="o">=</span><span class="n">energies</span><span class="p">[</span><span class="n">idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_cube_analysis_part1_24_0.png" src="../_images/notebooks_cube_analysis_part1_24_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Energy range: 0.50 TeV to 1.20 TeV
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">excess</span> <span class="o">=</span> <span class="n">cube_maker</span><span class="o">.</span><span class="n">excess_cube</span>

<span class="n">idx</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">excess</span><span class="o">.</span><span class="n">sky_image_idx</span><span class="p">(</span><span class="n">idx</span><span class="o">=</span><span class="n">idx</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Energy range: {emin:.2f} to {emax:.2f}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">emin</span><span class="o">=</span><span class="n">energies</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="n">emax</span><span class="o">=</span><span class="n">energies</span><span class="p">[</span><span class="n">idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_cube_analysis_part1_25_0.png" src="../_images/notebooks_cube_analysis_part1_25_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Energy range: 0.50 TeV to 1.20 TeV
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">significance</span> <span class="o">=</span> <span class="n">cube_maker</span><span class="o">.</span><span class="n">significance_cube</span>

<span class="n">idx</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">significance</span><span class="o">.</span><span class="n">sky_image_idx</span><span class="p">(</span><span class="n">idx</span><span class="o">=</span><span class="n">idx</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Energy range: {emin:.2f} to {emax:.2f}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">emin</span><span class="o">=</span><span class="n">energies</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="n">emax</span><span class="o">=</span><span class="n">energies</span><span class="p">[</span><span class="n">idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_cube_analysis_part1_26_0.png" src="../_images/notebooks_cube_analysis_part1_26_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Energy range: 0.50 TeV to 1.20 TeV
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">exposure</span> <span class="o">=</span> <span class="n">cube_maker</span><span class="o">.</span><span class="n">exposure_cube</span>

<span class="n">idx</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">exposure</span><span class="o">.</span><span class="n">sky_image_idx</span><span class="p">(</span><span class="n">idx</span><span class="o">=</span><span class="n">idx</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Energy range: {emin:.2f} to {emax:.2f}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">emin</span><span class="o">=</span><span class="n">energies</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="n">emax</span><span class="o">=</span><span class="n">energies</span><span class="p">[</span><span class="n">idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_cube_analysis_part1_27_0.png" src="../_images/notebooks_cube_analysis_part1_27_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Energy range: 0.50 TeV to 1.20 TeV
</pre></div></div>
</div>
<p>As a last step we’de like to compute a mean PSF across all observations
in the list. For this purpose we use the <code class="docutils literal"><span class="pre">.make_mean_psf_cube()</span></code>
method on the <code class="docutils literal"><span class="pre">StackedObsCubeMaker</span></code> object. We only have to specify a
reference cube, which is used to evaluate the PSF model:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="k">with</span> <span class="n">np</span><span class="o">.</span><span class="n">errstate</span><span class="p">(</span><span class="n">divide</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="n">invalid</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">):</span>
    <span class="n">mean_psf_cube</span> <span class="o">=</span> <span class="n">cube_maker</span><span class="o">.</span><span class="n">make_mean_psf_cube</span><span class="p">(</span><span class="n">REF_CUBE</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Let’s take a quick look a the resulting PSF:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">idx</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">psf_image</span> <span class="o">=</span> <span class="n">mean_psf_cube</span><span class="o">.</span><span class="n">sky_image_idx</span><span class="p">(</span><span class="n">idx</span><span class="o">=</span><span class="n">idx</span><span class="p">)</span>
<span class="n">norm</span> <span class="o">=</span> <span class="n">simple_norm</span><span class="p">(</span><span class="n">psf_image</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">stretch</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">)</span>
<span class="n">psf_image</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Energy range: {emin:.2f} to {emax:.2f}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">emin</span><span class="o">=</span><span class="n">energies</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="n">emax</span><span class="o">=</span><span class="n">energies</span><span class="p">[</span><span class="n">idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_cube_analysis_part1_31_0.png" src="../_images/notebooks_cube_analysis_part1_31_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Energy range: 6.93 TeV to 16.65 TeV
</pre></div></div>
</div>
<p>Now we repeat the computation but assume a different energy binning for
the “true” energy:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># define true energy binning</span>
<span class="n">ENERGY_TRUE_SPEC</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;edges&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;enumbins&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
                    <span class="s1">&#39;emin&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
                    <span class="s1">&#39;emax&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
                    <span class="s1">&#39;eunit&#39;</span><span class="p">:</span> <span class="s1">&#39;TeV&#39;</span><span class="p">}</span>

<span class="c1"># init refereence cube</span>
<span class="n">REF_CUBE_TRUE</span> <span class="o">=</span> <span class="n">SkyCube</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="o">**</span><span class="n">WCS_SPEC</span><span class="p">,</span> <span class="o">**</span><span class="n">ENERGY_TRUE_SPEC</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The reference cube is now passed to the <code class="docutils literal"><span class="pre">empty_exposure_cube</span></code>
argument:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">cube_maker</span> <span class="o">=</span> <span class="n">StackedObsCubeMaker</span><span class="p">(</span>
    <span class="n">empty_cube_images</span><span class="o">=</span><span class="n">REF_CUBE</span><span class="p">,</span>
    <span class="n">empty_exposure_cube</span><span class="o">=</span><span class="n">REF_CUBE_TRUE</span><span class="p">,</span>
    <span class="n">offset_band</span><span class="o">=</span><span class="n">offset_band</span><span class="p">,</span>
    <span class="n">data_store</span><span class="o">=</span><span class="n">data_store</span><span class="p">,</span>
    <span class="n">obs_table</span><span class="o">=</span><span class="n">data_store</span><span class="o">.</span><span class="n">obs_table</span><span class="p">,</span>
    <span class="n">exclusion_mask</span><span class="o">=</span><span class="n">exclusion_mask</span><span class="p">,</span>
    <span class="n">save_bkg_scale</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">cube_maker</span><span class="o">.</span><span class="n">make_cubes</span><span class="p">(</span><span class="n">make_background_image</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">10.</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The PSF can computed using the “true” energy reference cube as well:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="k">with</span> <span class="n">np</span><span class="o">.</span><span class="n">errstate</span><span class="p">(</span><span class="n">divide</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="n">invalid</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">):</span>
    <span class="n">mean_psf_cube</span> <span class="o">=</span> <span class="n">cube_maker</span><span class="o">.</span><span class="n">make_mean_psf_cube</span><span class="p">(</span><span class="n">REF_CUBE_TRUE</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">e_reco</span> <span class="o">=</span> <span class="n">cube_maker</span><span class="o">.</span><span class="n">counts_cube</span><span class="o">.</span><span class="n">energies</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;edges&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Energy bin edges of the count cube: </span><span class="se">\n</span><span class="s2">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e_reco</span><span class="p">))</span>

<span class="n">e_true</span> <span class="o">=</span> <span class="n">cube_maker</span><span class="o">.</span><span class="n">exposure_cube</span><span class="o">.</span><span class="n">energies</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;edges&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Energy bin edges of the exposure cube: </span><span class="se">\n</span><span class="s2">{}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e_true</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Energy bin edges of the count cube:
[  0.5          1.20112443   2.88539981   6.93144843  16.65106415  40.        ] TeV

Energy bin edges of the exposure cube:
[  1.00000000e-01   1.41253754e-01   1.99526231e-01   2.81838293e-01
   3.98107171e-01   5.62341325e-01   7.94328235e-01   1.12201845e+00
   1.58489319e+00   2.23872114e+00   3.16227766e+00   4.46683592e+00
   6.30957344e+00   8.91250938e+00   1.25892541e+01   1.77827941e+01
   2.51188643e+01   3.54813389e+01   5.01187234e+01   7.07945784e+01
   1.00000000e+02] TeV
</pre></div></div>
</div>
<p>Finally we compute the mean RMF (energy dispersion matrix) across
multiple observations:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># get reference energies</span>
<span class="n">obs_list</span> <span class="o">=</span> <span class="n">data_store</span><span class="o">.</span><span class="n">obs_list</span><span class="p">(</span><span class="n">data_store</span><span class="o">.</span><span class="n">obs_table</span><span class="p">[</span><span class="s1">&#39;OBS_ID&#39;</span><span class="p">])</span>
<span class="n">position</span> <span class="o">=</span> <span class="n">REF_CUBE</span><span class="o">.</span><span class="n">sky_image_ref</span><span class="o">.</span><span class="n">center</span>
<span class="n">e_true</span> <span class="o">=</span> <span class="n">REF_CUBE_TRUE</span><span class="o">.</span><span class="n">energies</span><span class="p">(</span><span class="s1">&#39;edges&#39;</span><span class="p">)</span>
<span class="n">e_reco</span> <span class="o">=</span> <span class="n">REF_CUBE</span><span class="o">.</span><span class="n">energies</span><span class="p">(</span><span class="s1">&#39;edges&#39;</span><span class="p">)</span>

<span class="k">with</span> <span class="n">np</span><span class="o">.</span><span class="n">errstate</span><span class="p">(</span><span class="n">divide</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="n">invalid</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">):</span>
    <span class="n">mean_rmf</span> <span class="o">=</span> <span class="n">obs_list</span><span class="o">.</span><span class="n">make_mean_edisp</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="n">e_true</span><span class="o">=</span><span class="n">e_true</span><span class="p">,</span> <span class="n">e_reco</span><span class="o">=</span><span class="n">e_reco</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">mean_rmf</span><span class="o">.</span><span class="n">plot_matrix</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="stderr output_area docutils container">
<div class="highlight"><pre>
/opt/local/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/site-packages/matplotlib/colors.py:1152: UserWarning: Power-law scaling on negative values is ill-defined, clamping to 0.
  warnings.warn(&#34;Power-law scaling on negative values is &#34;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[25]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x10e0ecef0&gt;
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="stderr output_area docutils container">
<div class="highlight"><pre>
/opt/local/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/site-packages/matplotlib/colors.py:1113: RuntimeWarning: invalid value encountered in power
  np.power(resdat, gamma, resdat)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_cube_analysis_part1_41_3.png" src="../_images/notebooks_cube_analysis_part1_41_3.png" />
</div>
</div>
</div>
<div class="section" id="Exercises">
<h2>Exercises<a class="headerlink" href="#Exercises" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Take another dataset</li>
<li>Change the Cube binning</li>
</ul>
<p>Now that we created some cubes for counts, background, exposure, psf
from a set of runs we will learn in the future tutorials how to use it
for a 3D analysis (morphological and spectral)</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">Cube analysis with Gammapy (part 1)</a><ul>
<li><a class="reference internal" href="#Introduction">Introduction</a></li>
<li><a class="reference internal" href="#Setup">Setup</a></li>
<li><a class="reference internal" href="#Data-preparation">Data preparation</a></li>
<li><a class="reference internal" href="#Exercises">Exercises</a></li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../_sources/notebooks/cube_analysis_part1.ipynb.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2018, The Gammapy developers.<br/>
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.6.7. &nbsp;
    Last built 01 Mar 2018. <br/>
  </p>
</footer>
  </body>
</html>