
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>How To &#8212; gammapy v1.0.1</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gammapy.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <link rel="shortcut icon" href="../_static/gammapy_logo.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Model gallery" href="model-gallery/index.html" />
    <link rel="prev" title="Utility functions" href="utils.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../index.html">
  <img src="../_static/gammapy_logo_nav.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../getting-started/index.html">
  Getting started
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  User guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../tutorials/index.html">
  Tutorials
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../api-reference/index.html">
  API reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../development/index.html">
  Developer guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../release-notes/index.html">
  Release notes
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <div class="dropdown" id="version_switcher">
    <button type="button" class="btn btn-primary btn-sm navbar-btn dropdown-toggle" id="version_switcher_button" data-toggle="dropdown">
        1.0.1  <!-- this text may get changed later by javascript -->
        <span class="caret"></span>
    </button>
    <div id="version_switcher_menu" class="dropdown-menu list-group-flush py-0" aria-labelledby="version_switcher_button">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
</div>

<!-- NOTE: this JS must live here (not in our global JS file) because it relies
     on being processed by Jinja before it is run (specifically for replacing
     variables user-guide/howto and {'json_url': 'https://docs.gammapy.org/stable/switcher.json', 'version_match': '1.0.1'}.
-->

<script type="text/javascript">
// Check if corresponding page path exists in other version of docs
// and, if so, go there instead of the homepage of the other docs version
function checkPageExistsAndRedirect(event) {
    const currentFilePath = "user-guide/howto.html",
          tryUrl = event.target.getAttribute("href");
    let otherDocsHomepage = tryUrl.replace(currentFilePath, "");
    $.ajax({
        type: 'HEAD',
        url: tryUrl,
        // if the page exists, go there
        success: function() {
            location.href = tryUrl;
        }
    }).fail(function() {
        location.href = otherDocsHomepage;
    });
    // this prevents the browser from following the href of the clicked node
    // (which is fine because this function takes care of redirecting)
    return false;
}

// Populate the version switcher from the JSON config file
(function () {
    $.getJSON("https://docs.gammapy.org/stable/switcher.json", function(data, textStatus, jqXHR) {
        const currentFilePath = "user-guide/howto.html";
        // create links to the corresponding page in the other docs versions
        $.each(data, function(index, entry) {
            // if no custom name specified (e.g., "latest"), use version string
            if (!("name" in entry)) {
                entry.name = entry.version;
            }
            // create the node
            const node = document.createElement("a");
            node.setAttribute("class", "list-group-item list-group-item-action py-1");
            node.textContent = `${entry.name}`;
            node.setAttribute("href", `${entry.url}${currentFilePath}`);
            // on click, AJAX calls will check if the linked page exists before
            // trying to redirect, and if not, will redirect to the homepage
            // for that version of the docs.
            node.onclick = checkPageExistsAndRedirect;
            // Add dataset values for the version and name in case people want
            // to apply CSS styling based on this information.
            node.dataset["versionName"] = entry.name;
            node.dataset["version"] = entry.version;

            $("#version_switcher_menu").append(node);
            // replace dropdown button text with the preferred display name of
            // this version, rather than using sphinx's 1.0.1 variable.
            // also highlight the dropdown entry for the currently-viewed
            // version's entry
            if (entry.version == "1.0.1") {
                node.classList.add("active");
                let btn = document.getElementById("version_switcher_button");
                btn.innerText = btn.dataset["activeVersionName"] = entry.name;
                btn.dataset["activeVersion"] = entry.version;
            }
        });
    });
})();
</script>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/gammapy/gammapy" rel="noopener" target="_blank" title="Github"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">Github</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/gammapyST" rel="noopener" target="_blank" title="Twitter"><span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://gammapy.slack.com/" rel="noopener" target="_blank" title="Slack"><span><i class="fab fa-slack"></i></span>
            <label class="sr-only">Slack</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="package.html">
   Gammapy analysis workflow and package structure
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="dl3.html">
     Data access and selection (DL3)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="irf/index.html">
     Instrument Response Functions (DL3)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="makers/index.html">
     Data reduction (DL3 to DL4)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="maps/index.html">
     Sky maps (DL4)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="datasets/index.html">
     Datasets (DL4)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="modeling.html">
     Modeling and Fitting (DL4 to DL5)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="estimators.html">
     Estimators (DL4 to DL5, and DL6)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="hli.html">
     High Level Analysis Interface
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="scripts/index.html">
     Command line tools
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="catalog.html">
     Source catalogs
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="astro/index.html">
     Astrophysics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="stats/index.html">
     Statistical utility functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="visualization/index.html">
     Visualization
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="utils.html">
     Utility functions
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   How To
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="model-gallery/index.html">
   Model gallery
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/spatial/plot_constant.html">
     Constant spatial model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/spatial/plot_disk.html">
     Disk spatial model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/spatial/plot_gauss.html">
     Gaussian spatial model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/spatial/plot_gen_gauss.html">
     Generalized gaussian spatial model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/spatial/plot_point.html">
     Point spatial model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/spatial/plot_shell.html">
     Shell spatial model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/spatial/plot_shell2.html">
     Shell2 spatial model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/spatial/plot_template.html">
     Template spatial model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/spectral/plot_absorbed.html">
     EBL absorbption spectral model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/spectral/plot_broken_powerlaw.html">
     Broken power law spectral model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/spectral/plot_compound.html">
     Compound spectral model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/spectral/plot_constant_spectral.html">
     Constant spectral model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/spectral/plot_exp_cutoff_powerlaw.html">
     Exponential cutoff power law spectral model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/spectral/plot_exp_cutoff_powerlaw_3fgl.html">
     Exponential cutoff power law spectral model used for 3FGL
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/spectral/plot_gauss_spectral.html">
     Gaussian spectral model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/spectral/plot_logparabola.html">
     Log parabola spectral model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/spectral/plot_naima.html">
     Naima spectral model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/spectral/plot_piecewise_norm_spectral.html">
     Piecewise  norm spectral model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/spectral/plot_powerlaw.html">
     Power law spectral model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/spectral/plot_powerlaw2.html">
     Power law 2 spectral model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/spectral/plot_smooth_broken_powerlaw.html">
     Smooth broken power law spectral model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/spectral/plot_super_exp_cutoff_powerlaw_3fgl.html">
     Super exponential cutoff power law model used for 3FGL
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/spectral/plot_super_exp_cutoff_powerlaw_4fgl.html">
     Super Exponential Cutoff Power Law Model used for 4FGL-DR3
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/spectral/plot_super_exp_cutoff_powerlaw_4fgl_dr1.html">
     Super Exponential Cutoff Power Law Model used for 4FGL-DR1 (and DR2)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/spectral/plot_template_spectral.html">
     Template spectral model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/temporal/plot_constant_temporal.html">
     Constant temporal model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/temporal/plot_expdecay_temporal.html">
     ExpDecay temporal model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/temporal/plot_gaussian_temporal.html">
     Gaussian temporal model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/temporal/plot_generalized_gaussian_temporal.html">
     Generalized Gaussian temporal model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/temporal/plot_linear_temporal.html">
     Linear temporal model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/temporal/plot_powerlaw_temporal.html">
     PowerLaw temporal model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/temporal/plot_sine_temporal.html">
     Sine temporal model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/temporal/plot_template_phase_temporal.html">
     Phase curve temporal model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model-gallery/temporal/plot_template_temporal.html">
     Light curve temporal model
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://gammapy.github.io/gammapy-recipes">
   Gammapy recipes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="references.html">
   Glossary and references
  </a>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                

<nav id="bd-toc-nav">
    
</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="how-to">
<span id="id1"></span><h1>How To<a class="headerlink" href="#how-to" title="Permalink to this headline">#</a></h1>
<p>This page contains short “how to” or “frequently asked question” entries for
Gammapy. Each entry is for a very specific task, with a short answer, and links
to examples and documentation.</p>
<p>If you’re new to Gammapy, please check the <a class="reference internal" href="../getting-started/index.html#getting-started"><span class="std std-ref">Getting started</span></a> section and
the <a class="reference internal" href="index.html#user-guide"><span class="std std-ref">User guide</span></a> and have a look at the list of <a class="reference internal" href="../tutorials/index.html#tutorials"><span class="std std-ref">Tutorials</span></a>.
The information below is in addition to those pages, it’s not a complete list of
how to do everything in Gammapy.</p>
<p>Please give feedback and suggest additions to this page!</p>

            <div id="accordion" class="shadow tutorial-accordion">
        <div class="card tutorial-card">
            <div class="card-header collapsed card-link" data-toggle="collapse"
             data-target="#collapseHowToOne">
                <div class="d-flex flex-row tutorial-card-header-1">
                    <div class="d-flex flex-row tutorial-card-header-2">
                        <button class="btn btn-dark btn-sm"></button>
                        Spell and pronounce Gammapy
                    </div>
        

                </div>
            </div>
            <div id="collapseHowToOne" class="collapse" data-parent="#accordion">
                <div class="card-body">
        <p>The recommended spelling is “Gammapy” as proper name. The recommended
pronunciation is [ɡæməpaɪ] where the syllable “py” is pronounced like
the english word “pie”. You can listen to it <a class="reference external" href="http://ipa-reader.xyz/?text=ˈ%C9%A1æməpaɪ&amp;voice=Amy">here</a>.</p>

                    </div>
                </div>
            </div>
        </div>
        
            <div id="accordion" class="shadow tutorial-accordion">
        <div class="card tutorial-card">
            <div class="card-header collapsed card-link" data-toggle="collapse"
             data-target="#collapseHowToTwo">
                <div class="d-flex flex-row tutorial-card-header-1">
                    <div class="d-flex flex-row tutorial-card-header-2">
                        <button class="btn btn-dark btn-sm"></button>
                        Select observations
                    </div>
        
             <span class="badge gs-badge-link">
             <a class="reference external" href="../tutorials/starting/analysis_2.html#defining-the-datastore-and-selecting-observations">Straight to tutorial…</a>
             </span>
             

                </div>
            </div>
            <div id="collapseHowToTwo" class="collapse" data-parent="#accordion">
                <div class="card-body">
        <p>The <a class="reference internal" href="../api/gammapy.data.DataStore.html#gammapy.data.DataStore" title="gammapy.data.DataStore"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DataStore</span></code></a> provides access to a summary table of all observations available.
It can be used to select observations with various criterion. You can for instance apply a cone search
or also select observations based on other information available using the <a class="reference internal" href="../api/gammapy.data.ObservationTable.html#gammapy.data.ObservationTable.select_observations" title="gammapy.data.ObservationTable.select_observations"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_observations</span></code></a> method.</p>

                    </div>
                </div>
            </div>
        </div>
        
            <div id="accordion" class="shadow tutorial-accordion">
        <div class="card tutorial-card">
            <div class="card-header collapsed card-link" data-toggle="collapse"
             data-target="#collapseHowToThree">
                <div class="d-flex flex-row tutorial-card-header-1">
                    <div class="d-flex flex-row tutorial-card-header-2">
                        <button class="btn btn-dark btn-sm"></button>
                        Make an on-axis equivalent livetime map
                    </div>
        
             <span class="badge gs-badge-link">
             <a class="reference external" href="../tutorials/data/hess.html#on-axis-equivalent-livetime">Straight to tutorial…</a>
             </span>
             

                </div>
            </div>
            <div id="collapseHowToThree" class="collapse" data-parent="#accordion">
                <div class="card-body">
        <p>The <a class="reference internal" href="../api/gammapy.data.DataStore.html#gammapy.data.DataStore" title="gammapy.data.DataStore"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DataStore</span></code></a> provides access to a summary table of all observations available.
It can be used to select observations with various criterion. You can for instance apply a cone search
or also select observations based on other information available using the <a class="reference internal" href="../api/gammapy.data.ObservationTable.html#gammapy.data.ObservationTable.select_observations" title="gammapy.data.ObservationTable.select_observations"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_observations</span></code></a> method.</p>

                    </div>
                </div>
            </div>
        </div>
        
            <div id="accordion" class="shadow tutorial-accordion">
        <div class="card tutorial-card">
            <div class="card-header collapsed card-link" data-toggle="collapse"
             data-target="#collapseHowToFour">
                <div class="d-flex flex-row tutorial-card-header-1">
                    <div class="d-flex flex-row tutorial-card-header-2">
                        <button class="btn btn-dark btn-sm"></button>
                        Check IRFs
                    </div>
        
             <span class="badge gs-badge-link">
             <a class="reference external" href="../tutorials/data/cta.html#irfs">Straight to tutorial…</a>
             </span>
             

                </div>
            </div>
            <div id="collapseHowToFour" class="collapse" data-parent="#accordion">
                <div class="card-body">
        <p>Gammapy offers a number of methods to explore the content of the various IRFs
contained in an observation. This is usually done thanks to their <code class="docutils literal notranslate"><span class="pre">peek()</span></code>
methods.</p>

                    </div>
                </div>
            </div>
        </div>
        
            <div id="accordion" class="shadow tutorial-accordion">
        <div class="card tutorial-card">
            <div class="card-header collapsed card-link" data-toggle="collapse"
             data-target="#collapseHowToFive">
                <div class="d-flex flex-row tutorial-card-header-1">
                    <div class="d-flex flex-row tutorial-card-header-2">
                        <button class="btn btn-dark btn-sm"></button>
                        Choose units for plotting
                    </div>
        

                </div>
            </div>
            <div id="collapseHowToFive" class="collapse" data-parent="#accordion">
                <div class="card-body">
        <p>Units for plotting are handled with a combination of <a class="reference external" href="https://matplotlib.org/stable/index.html#module-matplotlib" title="(in Matplotlib v3.7.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">matplotlib</span></code></a> and <a class="reference external" href="https://docs.astropy.org/en/latest/units/index.html#module-astropy.units" title="(in Astropy v5.3)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.units</span></code></a>.
The methods <code class="xref py py-obj docutils literal notranslate"><span class="pre">ax.xaxis.set_units()</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">ax.yaxis.set_units()</span></code> allow
you to define the x and y axis units using <a class="reference external" href="https://docs.astropy.org/en/latest/units/index.html#module-astropy.units" title="(in Astropy v5.3)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.units</span></code></a>. Here is a minimal example:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">gammapy.estimators</span> <span class="kn">import</span> <span class="n">FluxPoints</span>
<span class="kn">from</span> <span class="nn">astropy</span> <span class="kn">import</span> <span class="n">units</span> <span class="k">as</span> <span class="n">u</span>

<span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;$GAMMAPY_DATA/hawc_crab/HAWC19_flux_points.fits&quot;</span>
<span class="n">fp</span> <span class="o">=</span> <span class="n">FluxPoints</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_units</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">eV</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_units</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">Unit</span><span class="p">(</span><span class="s2">&quot;erg cm-2 s-1&quot;</span><span class="p">))</span>
<span class="n">fp</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">sed_type</span><span class="o">=</span><span class="s2">&quot;e2dnde&quot;</span><span class="p">)</span>
</pre></div>
</div>

                    </div>
                </div>
            </div>
        </div>
        
            <div id="accordion" class="shadow tutorial-accordion">
        <div class="card tutorial-card">
            <div class="card-header collapsed card-link" data-toggle="collapse"
             data-target="#collapseHowToSix">
                <div class="d-flex flex-row tutorial-card-header-1">
                    <div class="d-flex flex-row tutorial-card-header-2">
                        <button class="btn btn-dark btn-sm"></button>
                        Compute source significance
                    </div>
        

                </div>
            </div>
            <div id="collapseHowToSix" class="collapse" data-parent="#accordion">
                <div class="card-body">
        <p>Estimate the significance of a source, or more generally of an additional model
component (such as e.g. a spectral line on top of a power-law spectrum), is done
via a hypothesis test. You fit two models, with and without the extra source or
component, then use the test statistic values from both fits to compute the
significance or p-value. To obtain the test statistic, call
<code class="xref py py-obj docutils literal notranslate"><span class="pre">stat_sum</span></code> for the model corresponding to your two
hypotheses (or take this value from the print output when running the fit), and
take the difference. Note that in Gammapy, the fit statistic is defined as <code class="docutils literal notranslate"><span class="pre">S</span> <span class="pre">=</span>
<span class="pre">-</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">log(L)</span></code> for likelihood <code class="docutils literal notranslate"><span class="pre">L</span></code>, such that <code class="docutils literal notranslate"><span class="pre">TS</span> <span class="pre">=</span> <span class="pre">S_0</span> <span class="pre">-</span> <span class="pre">S_1</span></code>. See
<a class="reference internal" href="datasets/index.html#datasets"><span class="std std-ref">Datasets (DL4)</span></a> for an overview of fit statistics used.</p>

                    </div>
                </div>
            </div>
        </div>
        
            <div id="accordion" class="shadow tutorial-accordion">
        <div class="card tutorial-card">
            <div class="card-header collapsed card-link" data-toggle="collapse"
             data-target="#collapseHowToSeven">
                <div class="d-flex flex-row tutorial-card-header-1">
                    <div class="d-flex flex-row tutorial-card-header-2">
                        <button class="btn btn-dark btn-sm"></button>
                        Compute cumulative significance
                    </div>
        
             <span class="badge gs-badge-link">
             <a class="reference external" href="../tutorials/analysis-1d/spectral_analysis.html#source-statistic">Straight to tutorial…</a>
             </span>
             

                </div>
            </div>
            <div id="collapseHowToSeven" class="collapse" data-parent="#accordion">
                <div class="card-body">
        <p>A classical plot in gamma-ray astronomy is the cumulative significance of a
source as a function of observing time. In Gammapy, you can produce it with 1D
(spectral) analysis. Once datasets are produced for a given ON region, you can
access the total statistics with the <code class="docutils literal notranslate"><span class="pre">info_table(cumulative=True)</span></code> method of
<a class="reference internal" href="../api/gammapy.datasets.Datasets.html#gammapy.datasets.Datasets" title="gammapy.datasets.Datasets"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Datasets</span></code></a>.</p>

                    </div>
                </div>
            </div>
        </div>
        
            <div id="accordion" class="shadow tutorial-accordion">
        <div class="card tutorial-card">
            <div class="card-header collapsed card-link" data-toggle="collapse"
             data-target="#collapseHowToEight">
                <div class="d-flex flex-row tutorial-card-header-1">
                    <div class="d-flex flex-row tutorial-card-header-2">
                        <button class="btn btn-dark btn-sm"></button>
                        Implement a custom model
                    </div>
        
             <span class="badge gs-badge-link">
             <a class="reference external" href="../tutorials/api/models.html#implementing-a-custom-model">Straight to tutorial…</a>
             </span>
             

                </div>
            </div>
            <div id="collapseHowToEight" class="collapse" data-parent="#accordion">
                <div class="card-body">
        <p>Gammapy allows the flexibility of using user-defined models for analysis.</p>

                    </div>
                </div>
            </div>
        </div>
        
            <div id="accordion" class="shadow tutorial-accordion">
        <div class="card tutorial-card">
            <div class="card-header collapsed card-link" data-toggle="collapse"
             data-target="#collapseHowToNine">
                <div class="d-flex flex-row tutorial-card-header-1">
                    <div class="d-flex flex-row tutorial-card-header-2">
                        <button class="btn btn-dark btn-sm"></button>
                        Implement energy dependent spatial models
                    </div>
        
             <span class="badge gs-badge-link">
             <a class="reference external" href="../tutorials/api/models.html#models-with-energy-dependent-morphology">Straight to tutorial…</a>
             </span>
             

                </div>
            </div>
            <div id="collapseHowToNine" class="collapse" data-parent="#accordion">
                <div class="card-body">
        <p>While Gammapy does not ship energy dependent spatial models, it is possible to define
such models within the modeling framework.</p>

                    </div>
                </div>
            </div>
        </div>
        
            <div id="accordion" class="shadow tutorial-accordion">
        <div class="card tutorial-card">
            <div class="card-header collapsed card-link" data-toggle="collapse"
             data-target="#collapseHowToTen">
                <div class="d-flex flex-row tutorial-card-header-1">
                    <div class="d-flex flex-row tutorial-card-header-2">
                        <button class="btn btn-dark btn-sm"></button>
                        Model astrophysical source spectra
                    </div>
        

                </div>
            </div>
            <div id="collapseHowToTen" class="collapse" data-parent="#accordion">
                <div class="card-body">
        <p>It is possible to combine Gammapy with astrophysical modeling codes, if they
provide a Python interface. Usually this requires some glue code to be written,
e.g. <a class="reference internal" href="../api/gammapy.modeling.models.NaimaSpectralModel.html#gammapy.modeling.models.NaimaSpectralModel" title="gammapy.modeling.models.NaimaSpectralModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NaimaSpectralModel</span></code></a> is an example of a Gammapy
wrapper class around the Naima spectral model and radiation classes, which then
allows modeling and fitting of Naima models within Gammapy (e.g. using CTA,
H.E.S.S. or Fermi-LAT data).</p>

                    </div>
                </div>
            </div>
        </div>
        
            <div id="accordion" class="shadow tutorial-accordion">
        <div class="card tutorial-card">
            <div class="card-header collapsed card-link" data-toggle="collapse"
             data-target="#collapseSHowToEleven">
                <div class="d-flex flex-row tutorial-card-header-1">
                    <div class="d-flex flex-row tutorial-card-header-2">
                        <button class="btn btn-dark btn-sm"></button>
                        Model temporal profiles
                    </div>
        
             <span class="badge gs-badge-link">
             <a class="reference external" href="../tutorials/analysis-time/light_curve_simulation.html#fitting-temporal-models">Straight to tutorial…</a>
             </span>
             

                </div>
            </div>
            <div id="collapseSHowToEleven" class="collapse" data-parent="#accordion">
                <div class="card-body">
        <p>Temporal models can be directly fit on available lightcurves,
or on the reduced datasets. This is done through a joint fitting of the datasets,
one for each time bin.</p>

                    </div>
                </div>
            </div>
        </div>
        
            <div id="accordion" class="shadow tutorial-accordion">
        <div class="card tutorial-card">
            <div class="card-header collapsed card-link" data-toggle="collapse"
             data-target="#collapseHowToOne">
                <div class="d-flex flex-row tutorial-card-header-1">
                    <div class="d-flex flex-row tutorial-card-header-2">
                        <button class="btn btn-dark btn-sm"></button>
                        Improve fit convergence with constraints on the source position
                    </div>
        

                </div>
            </div>
            <div id="collapseHowToOne" class="collapse" data-parent="#accordion">
                <div class="card-body">
        <p>It happens that a 3D fit does not converge with warning messages indicating that the
scanned positions of the model are outside the valid IRF map range. The type of warning message is:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">Position</span> <span class="o">&lt;</span><span class="n">SkyCoord</span> <span class="p">(</span><span class="n">ICRS</span><span class="p">):</span> <span class="p">(</span><span class="n">ra</span><span class="p">,</span> <span class="n">dec</span><span class="p">)</span> <span class="ow">in</span> <span class="n">deg</span>
  <span class="p">(</span><span class="mf">329.71693826</span><span class="p">,</span> <span class="o">-</span><span class="mf">33.18392464</span><span class="p">)</span><span class="o">&gt;</span> <span class="ow">is</span> <span class="n">outside</span> <span class="n">valid</span> <span class="n">IRF</span> <span class="nb">map</span> <span class="nb">range</span><span class="p">,</span> <span class="n">using</span> <span class="n">nearest</span> <span class="n">IRF</span> <span class="n">defined</span> <span class="n">within</span>
</pre></div>
</div>
<p>This issue might happen when the position of a model has no defined range. The minimizer
might scan positions outside the spatial range in which the IRFs are computed and then it gets lost.</p>
<p>The simple solution is to add a physically-motivated range on the model’s position, e.g. within
the field of view or around an excess position. Most of the time, this tip solves the issue.
The documentation of the
<a class="reference external" href="https://docs.gammapy.org/1.0/tutorials/api/models.html#modifying-model-parameters">models sub-package</a>
explains how to add a validity range of a model parameter.</p>

                    </div>
                </div>
            </div>
        </div>
        
            <div id="accordion" class="shadow tutorial-accordion">
        <div class="card tutorial-card">
            <div class="card-header collapsed card-link" data-toggle="collapse"
             data-target="#collapseHowToTwelve">
                <div class="d-flex flex-row tutorial-card-header-1">
                    <div class="d-flex flex-row tutorial-card-header-2">
                        <button class="btn btn-dark btn-sm"></button>
                        Reduce memory budget for large datasets
                    </div>
        

                </div>
            </div>
            <div id="collapseHowToTwelve" class="collapse" data-parent="#accordion">
                <div class="card-body">
        <p>When dealing with surveys and large sky regions, the amount of memory required might become
problematic, in particular because of the default settings of the IRF maps stored in the
<a class="reference internal" href="../api/gammapy.datasets.MapDataset.html#gammapy.datasets.MapDataset" title="gammapy.datasets.MapDataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MapDataset</span></code></a> used for the data reduction. Several options can be used to reduce
the required memory:
- Reduce the spatial sampling of the <a class="reference internal" href="../api/gammapy.irf.PSFMap.html#gammapy.irf.PSFMap" title="gammapy.irf.PSFMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PSFMap</span></code></a> and the <a class="reference internal" href="../api/gammapy.irf.EDispKernelMap.html#gammapy.irf.EDispKernelMap" title="gammapy.irf.EDispKernelMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">EDispKernelMap</span></code></a>
using the <code class="xref py py-obj docutils literal notranslate"><span class="pre">binsz_irf</span></code> argument of the <a class="reference internal" href="../api/gammapy.datasets.MapDataset.html#gammapy.datasets.MapDataset.create" title="gammapy.datasets.MapDataset.create"><code class="xref py py-obj docutils literal notranslate"><span class="pre">create</span></code></a> method. This will reduce
the accuracy of the IRF kernels used for model counts predictions.
- Change the default IRFMap axes, in particular the <code class="xref py py-obj docutils literal notranslate"><span class="pre">rad_axis</span></code> argument of <a class="reference internal" href="../api/gammapy.datasets.MapDataset.html#gammapy.datasets.MapDataset.create" title="gammapy.datasets.MapDataset.create"><code class="xref py py-obj docutils literal notranslate"><span class="pre">create</span></code></a>
This axis is used to define the geometry of the <a class="reference internal" href="../api/gammapy.irf.PSFMap.html#gammapy.irf.PSFMap" title="gammapy.irf.PSFMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PSFMap</span></code></a> and controls the distribution of error angles
used to sample the PSF. This will reduce the quality of the PSF description.
- If one or several IRFs are not required for the study at hand, it is possible not to build them
by removing it from the list of options passed to the <a class="reference internal" href="../api/gammapy.makers.MapDatasetMaker.html#gammapy.makers.MapDatasetMaker" title="gammapy.makers.MapDatasetMaker"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MapDatasetMaker</span></code></a>.</p>

                    </div>
                </div>
            </div>
        </div>
        
            <div id="accordion" class="shadow tutorial-accordion">
        <div class="card tutorial-card">
            <div class="card-header collapsed card-link" data-toggle="collapse"
             data-target="#collapseHowToThirteen">
                <div class="d-flex flex-row tutorial-card-header-1">
                    <div class="d-flex flex-row tutorial-card-header-2">
                        <button class="btn btn-dark btn-sm"></button>
                        Copy part of a data store
                    </div>
        

                </div>
            </div>
            <div id="collapseHowToThirteen" class="collapse" data-parent="#accordion">
                <div class="card-body">
        <p>To share specific data from a database, it might be necessary to create a new data storage with
a limited set of observations and summary files following the scheme described in <a class="reference external" href="https://gamma-astro-data-formats.readthedocs.io/">gadf</a>.
This is possible with the method <a class="reference internal" href="../api/gammapy.data.DataStore.html#gammapy.data.DataStore.copy_obs" title="gammapy.data.DataStore.copy_obs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy_obs</span></code></a> provided by the
<a class="reference internal" href="../api/gammapy.data.DataStore.html#gammapy.data.DataStore" title="gammapy.data.DataStore"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DataStore</span></code></a>. It allows to copy individual observations files in a given directory
and build the associated observation and HDU tables.</p>

                    </div>
                </div>
            </div>
        </div>
        
            <div id="accordion" class="shadow tutorial-accordion">
        <div class="card tutorial-card">
            <div class="card-header collapsed card-link" data-toggle="collapse"
             data-target="#collapseHowToFourteen">
                <div class="d-flex flex-row tutorial-card-header-1">
                    <div class="d-flex flex-row tutorial-card-header-2">
                        <button class="btn btn-dark btn-sm"></button>
                        Interpolate onto a different geometry
                    </div>
        
             <span class="badge gs-badge-link">
             <a class="reference external" href="../tutorials/api/maps.html#filling-maps-from-interpolation">Straight to tutorial…</a>
             </span>
             

                </div>
            </div>
            <div id="collapseHowToFourteen" class="collapse" data-parent="#accordion">
                <div class="card-body">
        <p>To interpolate maps onto a different geometry use <a class="reference internal" href="../api/gammapy.maps.Map.html#gammapy.maps.Map.interp_to_geom" title="gammapy.maps.Map.interp_to_geom"><code class="xref py py-obj docutils literal notranslate"><span class="pre">interp_to_geom</span></code></a>.</p>

                    </div>
                </div>
            </div>
        </div>
        
            <div id="accordion" class="shadow tutorial-accordion">
        <div class="card tutorial-card">
            <div class="card-header collapsed card-link" data-toggle="collapse"
             data-target="#collapseHowToFifteen">
                <div class="d-flex flex-row tutorial-card-header-1">
                    <div class="d-flex flex-row tutorial-card-header-2">
                        <button class="btn btn-dark btn-sm"></button>
                        Suppress warnings
                    </div>
        

                </div>
            </div>
            <div id="collapseHowToFifteen" class="collapse" data-parent="#accordion">
                <div class="card-body">
        <p>In general it is not recommended to suppress warnings from code because they
might point to potential issues or help debugging a non-working script. However
in some cases the cause of the warning is known and the warnings clutter the
logging output. In this case it can be useful to locally suppress a specific
warning like so:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">astropy.io.fits.verify</span> <span class="kn">import</span> <span class="n">VerifyWarning</span>
<span class="kn">import</span> <span class="nn">warnings</span>

<span class="k">with</span> <span class="n">warnings</span><span class="o">.</span><span class="n">catch_warnings</span><span class="p">():</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="n">VerifyWarning</span><span class="p">)</span>
    <span class="c1"># do stuff here</span>
</pre></div>
</div>

                    </div>
                </div>
            </div>
        </div>
        
            <div id="accordion" class="shadow tutorial-accordion">
        <div class="card tutorial-card">
            <div class="card-header collapsed card-link" data-toggle="collapse"
             data-target="#collapseHowToSixteen">
                <div class="d-flex flex-row tutorial-card-header-1">
                    <div class="d-flex flex-row tutorial-card-header-2">
                        <button class="btn btn-dark btn-sm"></button>
                        Display a progress bar
                    </div>
        

                </div>
            </div>
            <div id="collapseHowToSixteen" class="collapse" data-parent="#accordion">
                <div class="card-body">
        <p>Gammapy provides the possibility of displaying a
progress bar to monitor the advancement of time-consuming processes. To activate this
functionality, make sure that <code class="xref py py-obj docutils literal notranslate"><span class="pre">tqdm</span></code> is installed and add the following code snippet
to your code:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gammapy.utils</span> <span class="kn">import</span> <span class="n">pbar</span>
<span class="n">pbar</span><span class="o">.</span><span class="n">SHOW_PROGRESS_BAR</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>

                    </div>
                </div>
            </div>
        </div>
        
            <div id="accordion" class="shadow tutorial-accordion">
        <div class="card tutorial-card">
            <div class="card-header collapsed card-link" data-toggle="collapse"
             data-target="#collapseHowToSeventeen">
                <div class="d-flex flex-row tutorial-card-header-1">
                    <div class="d-flex flex-row tutorial-card-header-2">
                        <button class="btn btn-dark btn-sm"></button>
                        Change plotting style and color-blind friendly visualizations
                    </div>
        

                </div>
            </div>
            <div id="collapseHowToSeventeen" class="collapse" data-parent="#accordion">
                <div class="card-body">
        <p>As the Gammapy visualisations are using the library <a class="reference external" href="https://matplotlib.org/stable/index.html#module-matplotlib" title="(in Matplotlib v3.7.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">matplotlib</span></code></a> that provides color styles, it is possible to change the
default colors map of the Gammapy plots. Using using the
<a class="reference external" href="https://matplotlib.org/stable/gallery/style_sheets/style_sheets_reference.html">style sheet of matplotlib</a>, you
should add into your notebooks or scripts the following lines after the Gammapy imports:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.style</span> <span class="k">as</span> <span class="nn">style</span>
<span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;XXXX&#39;</span><span class="p">)</span>
<span class="c1"># with XXXX from `print(plt.style.available)`</span>
</pre></div>
</div>
<p>Note that you can create your own style with matplotlib (see
<a class="reference external" href="https://matplotlib.org/stable/tutorials/introductory/customizing.html">here</a> and
<a class="reference external" href="https://matplotlib.org/stable/tutorials/colors/colormaps.html">here</a>)</p>
<p>The CTA observatory released a document describing best practices for <strong>data visualisation in a way friendly to
color-blind people</strong>:
<a class="reference external" href="https://www.cta-observatory.org/wp-content/uploads/2020/10/CTA_ColourBlindness_BestPractices2.pdf">CTAO document</a>. To
use them, you should add into your notebooks or scripts the following lines after the Gammapy imports:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.style</span> <span class="k">as</span> <span class="nn">style</span>
<span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;tableau-colorblind10&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.style</span> <span class="k">as</span> <span class="nn">style</span>
<span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;seaborn-colorblind&#39;</span><span class="p">)</span>
</pre></div>
</div>

                    </div>
                </div>
            </div>
        </div>
        
            <div id="accordion" class="shadow tutorial-accordion">
        <div class="card tutorial-card">
            <div class="card-header collapsed card-link" data-toggle="collapse"
             data-target="#collapseHowToEighteen">
                <div class="d-flex flex-row tutorial-card-header-1">
                    <div class="d-flex flex-row tutorial-card-header-2">
                        <button class="btn btn-dark btn-sm"></button>
                        Add PHASE information to your data
                    </div>
        

                </div>
            </div>
            <div id="collapseHowToEighteen" class="collapse" data-parent="#accordion">
                <div class="card-body">
        <p>For doing pulsar analysis, you must compute the phase associated
to each event and then create a new <code class="xref py py-obj docutils literal notranslate"><span class="pre">EventList</span></code> and a new <code class="xref py py-obj docutils literal notranslate"><span class="pre">Observation</span></code>.
Modifying the <code class="xref py py-obj docutils literal notranslate"><span class="pre">EventList</span></code> of an <code class="xref py py-obj docutils literal notranslate"><span class="pre">Observation</span></code> in-place is prohibited because of the
underlying lazy loading implemented in reading observations.
Code for computing phases is NOT provided within gammapy,
and you must use an external s/w like PINT or TEMPO2. For brevity,
this code example shows the only technical implementation
using a dummy phase column.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">gammapy.data</span> <span class="kn">import</span> <span class="n">DataStore</span><span class="p">,</span> <span class="n">Observation</span><span class="p">,</span> <span class="n">EventList</span>

<span class="c1"># read the observation</span>
<span class="n">datastore</span> <span class="o">=</span> <span class="n">DataStore</span><span class="o">.</span><span class="n">from_dir</span><span class="p">(</span><span class="s2">&quot;$GAMMAPY_DATA/hess-dl3-dr1/&quot;</span><span class="p">)</span>
<span class="n">obs</span> <span class="o">=</span> <span class="n">datastore</span><span class="o">.</span><span class="n">obs</span><span class="p">(</span><span class="mi">23523</span><span class="p">)</span>

<span class="c1"># use the phase information - dummy in this example</span>
<span class="n">phase</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">obs</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">table</span><span class="p">))</span>

<span class="c1"># create a new `EventList`</span>
<span class="n">table</span> <span class="o">=</span> <span class="n">obs</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">table</span>
<span class="n">table</span><span class="p">[</span><span class="s2">&quot;PHASE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">phase</span>
<span class="n">events_new</span> <span class="o">=</span> <span class="n">EventList</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>

<span class="c1"># copy the observation in memory, changing the events</span>
<span class="n">o2</span> <span class="o">=</span> <span class="n">obs</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">events</span><span class="o">=</span><span class="n">events_new</span><span class="p">,</span> <span class="n">in_memory</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># The new observation and the new events table can be serialised independently</span>
<span class="n">o2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;new_obs.fits.gz&quot;</span><span class="p">)</span>
<span class="n">events_new</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;events.fits.gz&quot;</span><span class="p">,</span> <span class="n">gti</span><span class="o">=</span><span class="n">obs</span><span class="o">.</span><span class="n">gti</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>

                    </div>
                </div>
            </div>
        </div>
        </section>


              </div>
              
              
          </main>
          

      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2023, The Gammapy developers.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>