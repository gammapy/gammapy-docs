
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Sky maps (DL4) &#8212; gammapy v1.0rc1</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gammapy.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <link rel="shortcut icon" href="../../_static/gammapy_logo.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="HEALPix-based maps" href="hpxmap.html" />
    <link rel="prev" title="Ring background" href="../makers/ring.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../../index.html">
  <img src="../../_static/gammapy_logo_nav.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../getting-started/index.html">
  Getting started
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../index.html">
  User guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../tutorials/index.html">
  Tutorials
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../api-reference/index.html">
  API reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../development/index.html">
  Developer guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../release-notes/index.html">
  Release notes
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <div class="dropdown" id="version_switcher">
    <button type="button" class="btn btn-primary btn-sm navbar-btn dropdown-toggle" id="version_switcher_button" data-toggle="dropdown">
        1.0rc1  <!-- this text may get changed later by javascript -->
        <span class="caret"></span>
    </button>
    <div id="version_switcher_menu" class="dropdown-menu list-group-flush py-0" aria-labelledby="version_switcher_button">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
</div>

<!-- NOTE: this JS must live here (not in our global JS file) because it relies
     on being processed by Jinja before it is run (specifically for replacing
     variables user-guide/maps/index and {'json_url': 'https://docs.gammapy.org/stable/switcher.json', 'version_match': '1.0rc1'}.
-->

<script type="text/javascript">
// Check if corresponding page path exists in other version of docs
// and, if so, go there instead of the homepage of the other docs version
function checkPageExistsAndRedirect(event) {
    const currentFilePath = "user-guide/maps/index.html",
          tryUrl = event.target.getAttribute("href");
    let otherDocsHomepage = tryUrl.replace(currentFilePath, "");
    $.ajax({
        type: 'HEAD',
        url: tryUrl,
        // if the page exists, go there
        success: function() {
            location.href = tryUrl;
        }
    }).fail(function() {
        location.href = otherDocsHomepage;
    });
    // this prevents the browser from following the href of the clicked node
    // (which is fine because this function takes care of redirecting)
    return false;
}

// Populate the version switcher from the JSON config file
(function () {
    $.getJSON("https://docs.gammapy.org/stable/switcher.json", function(data, textStatus, jqXHR) {
        const currentFilePath = "user-guide/maps/index.html";
        // create links to the corresponding page in the other docs versions
        $.each(data, function(index, entry) {
            // if no custom name specified (e.g., "latest"), use version string
            if (!("name" in entry)) {
                entry.name = entry.version;
            }
            // create the node
            const node = document.createElement("a");
            node.setAttribute("class", "list-group-item list-group-item-action py-1");
            node.textContent = `${entry.name}`;
            node.setAttribute("href", `${entry.url}${currentFilePath}`);
            // on click, AJAX calls will check if the linked page exists before
            // trying to redirect, and if not, will redirect to the homepage
            // for that version of the docs.
            node.onclick = checkPageExistsAndRedirect;
            // Add dataset values for the version and name in case people want
            // to apply CSS styling based on this information.
            node.dataset["versionName"] = entry.name;
            node.dataset["version"] = entry.version;

            $("#version_switcher_menu").append(node);
            // replace dropdown button text with the preferred display name of
            // this version, rather than using sphinx's 1.0rc1 variable.
            // also highlight the dropdown entry for the currently-viewed
            // version's entry
            if (entry.version == "1.0rc1") {
                node.classList.add("active");
                let btn = document.getElementById("version_switcher_button");
                btn.innerText = btn.dataset["activeVersionName"] = entry.name;
                btn.dataset["activeVersion"] = entry.version;
            }
        });
    });
})();
</script>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/gammapy/gammapy" rel="noopener" target="_blank" title="Github"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">Github</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/gammapyST" rel="noopener" target="_blank" title="Twitter"><span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://gammapy.slack.com/" rel="noopener" target="_blank" title="Slack"><span><i class="fab fa-slack"></i></span>
            <label class="sr-only">Slack</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../package.html">
   Gammapy analysis workflow and package structure
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="../dl3.html">
     Data access and selection (DL3)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../irf/index.html">
     Instrument Response Functions (DL3)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../makers/index.html">
     Data reduction (DL3 to DL4)
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Sky maps (DL4)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../datasets/index.html">
     Datasets (DL4)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../modeling.html">
     Modeling and Fitting (DL4 to DL5)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../estimators.html">
     Estimators (DL4 to DL5, and DL6)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../hli.html">
     High Level Analysis Interface
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../scripts/index.html">
     Command line tools
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../catalog.html">
     Source catalogs
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../astro/index.html">
     Astrophysics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../stats/index.html">
     Statistical utility functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../visualization/index.html">
     Visualization
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../utils.html">
     Utility functions
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../howto.html">
   How To
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../model-gallery/index.html">
   Model gallery
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/spatial/plot_constant.html">
     Constant spatial model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/spatial/plot_disk.html">
     Disk spatial model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/spatial/plot_gauss.html">
     Gaussian spatial model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/spatial/plot_gen_gauss.html">
     Generalized gaussian spatial model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/spatial/plot_point.html">
     Point spatial model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/spatial/plot_shell.html">
     Shell spatial model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/spatial/plot_shell2.html">
     Shell2 spatial model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/spatial/plot_template.html">
     Template spatial model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/spectral/plot_absorbed.html">
     EBL absorbption spectral model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/spectral/plot_broken_powerlaw.html">
     Broken power law spectral model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/spectral/plot_compound.html">
     Compound spectral model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/spectral/plot_constant_spectral.html">
     Constant spectral model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/spectral/plot_exp_cutoff_powerlaw.html">
     Exponential cutoff power law spectral model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/spectral/plot_exp_cutoff_powerlaw_3fgl.html">
     Exponential cutoff power law spectral model used for 3FGL
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/spectral/plot_gauss_spectral.html">
     Gaussian spectral model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/spectral/plot_logparabola.html">
     Log parabola spectral model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/spectral/plot_naima.html">
     Naima spectral model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/spectral/plot_piecewise_norm_spectral.html">
     Piecewise  norm spectral model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/spectral/plot_powerlaw.html">
     Power law spectral model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/spectral/plot_powerlaw2.html">
     Power law 2 spectral model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/spectral/plot_smooth_broken_powerlaw.html">
     Smooth broken power law spectral model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/spectral/plot_super_exp_cutoff_powerlaw_3fgl.html">
     Super exponential cutoff power law model used for 3FGL
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/spectral/plot_super_exp_cutoff_powerlaw_4fgl.html">
     Super Exponential Cutoff Power Law Model used for 4FGL-DR3
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/spectral/plot_super_exp_cutoff_powerlaw_4fgl_dr1.html">
     Super Exponential Cutoff Power Law Model used for 4FGL-DR1 (and DR2)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/spectral/plot_template_spectral.html">
     Template spectral model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/temporal/plot_constant_temporal.html">
     Constant temporal model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/temporal/plot_expdecay_temporal.html">
     ExpDecay temporal model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/temporal/plot_gaussian_temporal.html">
     Gaussian temporal model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/temporal/plot_generalized_gaussian_temporal.html">
     Generalized Gaussian temporal model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/temporal/plot_linear_temporal.html">
     Linear temporal model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/temporal/plot_powerlaw_temporal.html">
     PowerLaw temporal model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/temporal/plot_sine_temporal.html">
     Sine temporal model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/temporal/plot_template_phase_temporal.html">
     Phase curve temporal model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model-gallery/temporal/plot_template_temporal.html">
     Light curve temporal model
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://gammapy.github.io/gammapy-recipes">
   Gammapy recipes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../references.html">
   Glossary and references
  </a>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#getting-started-with-maps">
   Getting started with maps
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#differential-and-integral-maps">
   Differential and integral maps
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#accessor-methods">
   Accessor methods
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#interface-with-mapcoord-and-skycoord">
   Interface with MapCoord and SkyCoord
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#mapcoord">
   MapCoord
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#using-gammapy-maps">
   Using gammapy.maps
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#examples-using-gammapy-maps-wcsndmap">
     Examples using
     <code class="docutils literal notranslate">
      <span class="pre">
       gammapy.maps.WcsNDMap
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#examples-using-gammapy-maps-regionndmap">
     Examples using
     <code class="docutils literal notranslate">
      <span class="pre">
       gammapy.maps.RegionNDMap
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#examples-using-gammapy-maps-hpxndmap">
     Examples using
     <code class="docutils literal notranslate">
      <span class="pre">
       gammapy.maps.HpxNDMap
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="sky-maps-dl4">
<span id="maps"></span><h1>Sky maps (DL4)<a class="headerlink" href="#sky-maps-dl4" title="Permalink to this headline">#</a></h1>
<p><a class="reference internal" href="../../api-reference/maps.html#module-gammapy.maps" title="gammapy.maps"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gammapy.maps</span></code></a> contains classes for representing pixelized data structures with
at least two spatial dimensions representing coordinates on a sphere (e.g. an
image in celestial coordinates).  These classes support an arbitrary number of
non-spatial dimensions and can represent images (2D), cubes (3D), or hypercubes
(4+D).  Multiple pixelization schemes are supported:</p>
<ul class="simple">
<li><p>WCS : Projection onto a 2D cartesian grid following the conventions
of the World Coordinate System (WCS).  Pixels are square in projected
coordinates and as such are not equal area in spherical coordinates.</p></li>
<li><p>HEALPix : Hierarchical Equal Area Iso Latitude pixelation of the
sphere. Pixels are equal area but have irregular shapes.
Documentation specific to HEALPix-based maps is provided in <a class="reference internal" href="hpxmap.html"><span class="doc">HEALPix-based maps</span></a>.</p></li>
<li><p>Region : A single spatial pixel with arbitrary shape defined by a region on the sky.
Documentation specific to region-based maps is provided in <a class="reference internal" href="regionmap.html"><span class="doc">RegionGeom and RegionNDMap</span></a>.</p></li>
</ul>
<p><a class="reference internal" href="../../api-reference/maps.html#module-gammapy.maps" title="gammapy.maps"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gammapy.maps</span></code></a> is organized around two data structures: <em>geometry</em> classes
inheriting from <code class="xref py py-obj docutils literal notranslate"><span class="pre">Geom</span></code> and <em>map</em> classes inheriting from <code class="xref py py-obj docutils literal notranslate"><span class="pre">Map</span></code>. A geometry
defines the map boundaries, pixelization scheme, and provides methods for
converting to/from map and pixel coordinates. A map owns a <code class="xref py py-obj docutils literal notranslate"><span class="pre">Geom</span></code> instance
as well as a data array containing map values. Where possible it is recommended
to use the abstract <code class="xref py py-obj docutils literal notranslate"><span class="pre">Map</span></code> interface for accessing or updating the contents of a
map as this allows algorithms to be used interchangeably with different map
representations. The following reviews methods of the abstract map interface.</p>
<section id="getting-started-with-maps">
<h2>Getting started with maps<a class="headerlink" href="#getting-started-with-maps" title="Permalink to this headline">#</a></h2>
<p>All map objects have an abstract interface provided through the methods of the
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Map</span></code>. These methods can be used for accessing and manipulating the contents of
a map without reference to the underlying data representation (e.g. whether a
map uses WCS or HEALPix pixelization). For applications which do depend on the
specific representation one can also work directly with the classes derived from
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Map</span></code>. In the following we review some of the basic methods for working with
map objects, more details are given in the <a class="reference internal" href="../../tutorials/api/maps.html"><span class="doc">Maps</span></a>
tutorial.</p>
</section>
<section id="differential-and-integral-maps">
<span id="node-types"></span><h2>Differential and integral maps<a class="headerlink" href="#differential-and-integral-maps" title="Permalink to this headline">#</a></h2>
<p><a class="reference internal" href="../../api-reference/maps.html#module-gammapy.maps" title="gammapy.maps"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gammapy.maps</span></code></a> supports both differential and integral maps, representing
differential values at specific coordinates, or integral values within bins.
This is achieved by specifying the <code class="docutils literal notranslate"><span class="pre">node_type</span></code> of a <a class="reference internal" href="../../api/gammapy.maps.MapAxis.html#gammapy.maps.MapAxis" title="gammapy.maps.MapAxis"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MapAxis</span></code></a>. Quantities
defined at bin centers should have a node_type of “center”, and quantities
integrated in bins should have node_type of <code class="docutils literal notranslate"><span class="pre">edges</span></code>. Interpolation is defined
only for differential quantities.</p>
<p>For the specific case of the energy axis, conventionally, true energies are have
node_type “center” (usually used for IRFs and exposure) whereas the
reconstructed energy axis has node_type “edges” (usually used for counts and
background). Model evaluations are first computed on differential bins, and then
multiplied by the bin volumes to finally return integrated maps, so the output
predicted counts maps are integral with node_type “edges”.</p>
</section>
<section id="accessor-methods">
<h2>Accessor methods<a class="headerlink" href="#accessor-methods" title="Permalink to this headline">#</a></h2>
<p>All map objects have a set of accessor methods provided through the abstract
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Map</span></code> class. These methods can be used to access or update the contents of the
map irrespective of its underlying representation. Four types of accessor
methods are provided:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">get</span></code> : Return the value of the map at the pixel containing the
given coordinate (<code class="xref py py-obj docutils literal notranslate"><span class="pre">get_by_idx</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">get_by_pix</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">get_by_coord</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">interp</span></code> : Interpolate or extrapolate the value of the map at an arbitrary
coordinate.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set</span></code> : Set the value of the map at the pixel containing the
given coordinate (<code class="xref py py-obj docutils literal notranslate"><span class="pre">set_by_idx</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">set_by_pix</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">set_by_coord</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fill</span></code> : Increment the value of the map at the pixel containing
the given coordinate with a unit weight or the value in the optional
<code class="docutils literal notranslate"><span class="pre">weights</span></code> argument (<code class="xref py py-obj docutils literal notranslate"><span class="pre">fill_by_idx</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">fill_by_pix</span></code>,
<code class="xref py py-obj docutils literal notranslate"><span class="pre">fill_by_coord</span></code>).</p></li>
</ul>
<p>Accessor methods accept as their first argument a coordinate tuple containing
scalars, lists, or numpy arrays with one tuple element for each dimension of the
map. <code class="docutils literal notranslate"><span class="pre">coord</span></code> methods optionally support a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">MapCoord</span></code> argument.</p>
<p>When using tuple input the first two elements in the tuple should be longitude
and latitude followed by one element for each non-spatial dimension. Map
coordinates can be expressed in one of three coordinate systems:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">idx</span></code> : Pixel indices.  These are explicit (integer) pixel indices into the
map.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pix</span></code> : Coordinates in pixel space.  Pixel coordinates are continuous defined
on the interval [0,N-1] where N is the number of pixels along a given map
dimension with pixel centers at integer values.  For methods that reference a
discrete pixel, pixel coordinates will be rounded to the nearest pixel index
and passed to the corresponding <code class="docutils literal notranslate"><span class="pre">idx</span></code> method.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">coord</span></code> : The true map coordinates including angles on the sky (longitude
and latitude).  This coordinate system supports three coordinate
representations: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tuple</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a>, and <code class="xref py py-obj docutils literal notranslate"><span class="pre">MapCoord</span></code>.  The tuple representation
should contain longitude and latitude in degrees followed by one coordinate
array for each non-spatial dimension.</p></li>
</ul>
<p>The coordinate system accepted by a given accessor method can be inferred from
the suffix of the method name (e.g. <code class="xref py py-obj docutils literal notranslate"><span class="pre">get_by_idx</span></code>).  The following
demonstrates how one can access the same pixels of a WCS map using each of the
three coordinate systems:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gammapy.maps</span> <span class="kn">import</span> <span class="n">Map</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">Map</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">binsz</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">map_type</span><span class="o">=</span><span class="s1">&#39;wcs&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">10.0</span><span class="p">)</span>

<span class="n">vals</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">get_by_idx</span><span class="p">(</span> <span class="p">([</span><span class="mi">49</span><span class="p">,</span><span class="mi">50</span><span class="p">],[</span><span class="mi">49</span><span class="p">,</span><span class="mi">50</span><span class="p">])</span> <span class="p">)</span>
<span class="n">vals</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">get_by_pix</span><span class="p">(</span> <span class="p">([</span><span class="mf">49.0</span><span class="p">,</span><span class="mf">50.0</span><span class="p">],[</span><span class="mf">49.0</span><span class="p">,</span><span class="mf">50.0</span><span class="p">])</span> <span class="p">)</span>
<span class="n">vals</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">get_by_coord</span><span class="p">(</span> <span class="p">([</span><span class="o">-</span><span class="mf">0.05</span><span class="p">,</span><span class="o">-</span><span class="mf">0.05</span><span class="p">],[</span><span class="mf">0.05</span><span class="p">,</span><span class="mf">0.05</span><span class="p">])</span> <span class="p">)</span>
</pre></div>
</div>
<p>Coordinate arguments obey normal numpy broadcasting rules.  The coordinate tuple
may contain any combination of scalars, lists or numpy arrays as long as they
have compatible shapes.  For instance a combination of scalar and vector
arguments can be used to perform an operation along a slice of the map at a
fixed value along that dimension. Multi-dimensional arguments can be use to
broadcast a given operation across a grid of coordinate values.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">gammapy.maps</span> <span class="kn">import</span> <span class="n">Map</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">Map</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">binsz</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">map_type</span><span class="o">=</span><span class="s1">&#39;wcs&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">10.0</span><span class="p">)</span>
<span class="n">coords</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mf">4.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>

<span class="c1"># Equivalent calls for accessing value at pixel (49,49)</span>
<span class="n">vals</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">get_by_idx</span><span class="p">(</span> <span class="p">(</span><span class="mi">49</span><span class="p">,</span><span class="mi">49</span><span class="p">)</span> <span class="p">)</span>
<span class="n">vals</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">get_by_idx</span><span class="p">(</span> <span class="p">([</span><span class="mi">49</span><span class="p">],[</span><span class="mi">49</span><span class="p">])</span> <span class="p">)</span>
<span class="n">vals</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">get_by_idx</span><span class="p">(</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">49</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">49</span><span class="p">]))</span> <span class="p">)</span>

<span class="c1"># Retrieve map values along latitude at fixed longitude=0.0</span>
<span class="n">vals</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">get_by_coord</span><span class="p">(</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">coords</span><span class="p">)</span> <span class="p">)</span>
<span class="c1"># Retrieve map values on a 2D grid of latitude/longitude points</span>
<span class="n">vals</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">get_by_coord</span><span class="p">(</span> <span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="kc">None</span><span class="p">,:],</span> <span class="n">coords</span><span class="p">[:,</span><span class="kc">None</span><span class="p">])</span> <span class="p">)</span>
<span class="c1"># Set map values along slice at longitude=0.0 to twice their existing value</span>
<span class="n">m</span><span class="o">.</span><span class="n">set_by_coord</span><span class="p">((</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">coords</span><span class="p">),</span> <span class="mf">2.0</span><span class="o">*</span><span class="n">m</span><span class="o">.</span><span class="n">get_by_coord</span><span class="p">((</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">coords</span><span class="p">)))</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">set</span></code> and <code class="docutils literal notranslate"><span class="pre">fill</span></code> methods can both be used to set pixel values. The
following demonstrates how one can set pixel values:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gammapy.maps</span> <span class="kn">import</span> <span class="n">Map</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">Map</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">binsz</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">map_type</span><span class="o">=</span><span class="s1">&#39;wcs&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">10.0</span><span class="p">)</span>

<span class="n">m</span><span class="o">.</span><span class="n">set_by_coord</span><span class="p">(([</span><span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">]),</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">])</span>
<span class="n">m</span><span class="o">.</span><span class="n">fill_by_coord</span><span class="p">(</span> <span class="p">([</span><span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">]),</span> <span class="n">weights</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">]))</span>
</pre></div>
</div>
</section>
<section id="interface-with-mapcoord-and-skycoord">
<h2>Interface with MapCoord and SkyCoord<a class="headerlink" href="#interface-with-mapcoord-and-skycoord" title="Permalink to this headline">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">coord</span></code> accessor methods accept <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">MapCoord</span></code>, and
<a class="reference external" href="https://docs.astropy.org/en/latest/api/astropy.coordinates.SkyCoord.html#astropy.coordinates.SkyCoord" title="(in Astropy v5.2)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SkyCoord</span></code></a> arguments in addition to the standard <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tuple</span></code></a> of
<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.23)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ndarray</span></code></a> argument.  When using a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tuple</span></code></a> argument a
<a class="reference external" href="https://docs.astropy.org/en/latest/api/astropy.coordinates.SkyCoord.html#astropy.coordinates.SkyCoord" title="(in Astropy v5.2)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SkyCoord</span></code></a> can be used instead of longitude and latitude
arrays.  The coordinate frame of the <a class="reference external" href="https://docs.astropy.org/en/latest/api/astropy.coordinates.SkyCoord.html#astropy.coordinates.SkyCoord" title="(in Astropy v5.2)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SkyCoord</span></code></a> will be
transformed to match the coordinate system of the map.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">astropy.coordinates</span> <span class="kn">import</span> <span class="n">SkyCoord</span>
<span class="kn">from</span> <span class="nn">gammapy.maps</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">MapCoord</span><span class="p">,</span> <span class="n">MapAxis</span>

<span class="n">lon</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">lat</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">energy</span> <span class="o">=</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">1000</span><span class="p">]</span>
<span class="n">energy_axis</span> <span class="o">=</span> <span class="n">MapAxis</span><span class="o">.</span><span class="n">from_bounds</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mf">1E5</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="n">interp</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;energy&#39;</span><span class="p">)</span>

<span class="n">skycoord</span> <span class="o">=</span> <span class="n">SkyCoord</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;deg&#39;</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="s1">&#39;galactic&#39;</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">Map</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">binsz</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">map_type</span><span class="o">=</span><span class="s1">&#39;wcs&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span>
              <span class="n">frame</span><span class="o">=</span><span class="s2">&quot;galactic&quot;</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="p">[</span><span class="n">energy_axis</span><span class="p">])</span>

<span class="n">m</span><span class="o">.</span><span class="n">set_by_coord</span><span class="p">((</span><span class="n">skycoord</span><span class="p">,</span> <span class="n">energy</span><span class="p">),</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">])</span>
<span class="n">m</span><span class="o">.</span><span class="n">get_by_coord</span><span class="p">((</span><span class="n">skycoord</span><span class="p">,</span> <span class="n">energy</span><span class="p">))</span>
</pre></div>
</div>
<p>A <code class="xref py py-obj docutils literal notranslate"><span class="pre">MapCoord</span></code> or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a> argument can be used to interact with a map object
without reference to the axis ordering of the map geometry:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">coord</span> <span class="o">=</span> <span class="n">MapCoord</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">lon</span><span class="o">=</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="o">=</span><span class="n">lat</span><span class="p">,</span> <span class="n">energy</span><span class="o">=</span><span class="n">energy</span><span class="p">))</span>
<span class="n">m</span><span class="o">.</span><span class="n">set_by_coord</span><span class="p">(</span><span class="n">coord</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">])</span>
<span class="n">m</span><span class="o">.</span><span class="n">get_by_coord</span><span class="p">(</span><span class="n">coord</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">set_by_coord</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">lon</span><span class="o">=</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="o">=</span><span class="n">lat</span><span class="p">,</span> <span class="n">energy</span><span class="o">=</span><span class="n">energy</span><span class="p">),</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">])</span>
<span class="n">m</span><span class="o">.</span><span class="n">get_by_coord</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">lon</span><span class="o">=</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="o">=</span><span class="n">lat</span><span class="p">,</span> <span class="n">energy</span><span class="o">=</span><span class="n">energy</span><span class="p">))</span>
</pre></div>
</div>
<p>However when using the named axis interface the axis name string (e.g. as given
by <code class="xref py py-obj docutils literal notranslate"><span class="pre">MapAxis.name</span></code>) must match the name given in the method argument.  The two
spatial axes must always be named <code class="docutils literal notranslate"><span class="pre">lon</span></code> and <code class="docutils literal notranslate"><span class="pre">lat</span></code>.</p>
</section>
<section id="mapcoord">
<span id="id1"></span><h2>MapCoord<a class="headerlink" href="#mapcoord" title="Permalink to this headline">#</a></h2>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">MapCoord</span></code> is an N-dimensional coordinate object that stores both spatial and
non-spatial coordinates and is accepted by all <code class="docutils literal notranslate"><span class="pre">coord</span></code> methods. A <code class="xref py py-obj docutils literal notranslate"><span class="pre">MapCoord</span></code>
can be created with or without explicitly named axes with <code class="xref py py-obj docutils literal notranslate"><span class="pre">MapCoord.create</span></code>.
Axes of a <code class="xref py py-obj docutils literal notranslate"><span class="pre">MapCoord</span></code> can be accessed by index, name, or attribute.  A <code class="xref py py-obj docutils literal notranslate"><span class="pre">MapCoord</span></code>
without explicit axis names can be created by calling <code class="xref py py-obj docutils literal notranslate"><span class="pre">MapCoord.create</span></code> with a
<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tuple</span></code></a> argument:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">astropy.coordinates</span> <span class="kn">import</span> <span class="n">SkyCoord</span>
<span class="kn">from</span> <span class="nn">gammapy.maps</span> <span class="kn">import</span> <span class="n">MapCoord</span>

<span class="n">lon</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]</span>
<span class="n">lat</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">]</span>
<span class="n">energy</span> <span class="o">=</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">1000</span><span class="p">]</span>
<span class="n">skycoord</span> <span class="o">=</span> <span class="n">SkyCoord</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;deg&#39;</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="s1">&#39;galactic&#39;</span><span class="p">)</span>

<span class="c1"># Create a MapCoord from a tuple (no explicit axis names)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">MapCoord</span><span class="o">.</span><span class="n">create</span><span class="p">((</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">energy</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">],</span> <span class="n">c</span><span class="o">.</span><span class="n">lon</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">],</span> <span class="n">c</span><span class="o">.</span><span class="n">lat</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="s1">&#39;axis0&#39;</span><span class="p">])</span>

<span class="c1"># Create a MapCoord from a tuple + SkyCoord (no explicit axis names)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">MapCoord</span><span class="o">.</span><span class="n">create</span><span class="p">((</span><span class="n">skycoord</span><span class="p">,</span> <span class="n">energy</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">],</span> <span class="n">c</span><span class="o">.</span><span class="n">lon</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">],</span> <span class="n">c</span><span class="o">.</span><span class="n">lat</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="s1">&#39;axis0&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>The first two elements of the tuple argument must contain longitude and
latitude.  Non-spatial axes are assigned a default name <code class="docutils literal notranslate"><span class="pre">axis{I}</span></code> where
<code class="docutils literal notranslate"><span class="pre">{I}</span></code> is the index of the non-spatial dimension. <code class="xref py py-obj docutils literal notranslate"><span class="pre">MapCoord</span></code> objects created
without named axes must have the same axis ordering as the map geometry.</p>
<p>A <code class="xref py py-obj docutils literal notranslate"><span class="pre">MapCoord</span></code> with named axes can be created by calling <code class="xref py py-obj docutils literal notranslate"><span class="pre">MapCoord.create</span></code> with a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">MapCoord</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">lon</span><span class="o">=</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="o">=</span><span class="n">lat</span><span class="p">,</span> <span class="n">energy</span><span class="o">=</span><span class="n">energy</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">],</span> <span class="n">c</span><span class="o">.</span><span class="n">lon</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">],</span> <span class="n">c</span><span class="o">.</span><span class="n">lat</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="s1">&#39;energy&#39;</span><span class="p">])</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">MapCoord</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;energy&#39;</span><span class="p">:</span> <span class="n">energy</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">:</span> <span class="n">lon</span><span class="p">,</span> <span class="s1">&#39;lat&#39;</span><span class="p">:</span> <span class="n">lat</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="s1">&#39;energy&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">],</span> <span class="n">c</span><span class="o">.</span><span class="n">lon</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">],</span> <span class="n">c</span><span class="o">.</span><span class="n">lat</span><span class="p">)</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">MapCoord</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">skycoord</span><span class="o">=</span><span class="n">skycoord</span><span class="p">,</span> <span class="n">energy</span><span class="o">=</span><span class="n">energy</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">],</span> <span class="n">c</span><span class="o">.</span><span class="n">lon</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">],</span> <span class="n">c</span><span class="o">.</span><span class="n">lat</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="s1">&#39;energy&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Spatial axes must be named <code class="docutils literal notranslate"><span class="pre">lon</span></code> and <code class="docutils literal notranslate"><span class="pre">lat</span></code>. <code class="xref py py-obj docutils literal notranslate"><span class="pre">MapCoord</span></code> objects created with
named axes do not need to have the same axis ordering as the map geometry.
However the name of the axis must match the name of the corresponding map
geometry axis.</p>
</section>
<section id="using-gammapy-maps">
<h2>Using gammapy.maps<a class="headerlink" href="#using-gammapy-maps" title="Permalink to this headline">#</a></h2>
<section id="examples-using-gammapy-maps-wcsndmap">
<h3>Examples using <code class="docutils literal notranslate"><span class="pre">gammapy.maps.WcsNDMap</span></code><a class="headerlink" href="#examples-using-gammapy-maps-wcsndmap" title="Permalink to this headline">#</a></h3>
<div class="sphx-glr-thumbnails"><div class="sphx-glr-thumbcontainer" tooltip="Introduction to 3D analysis using the Gammapy high level interface."><img alt="High level interface" src="../../_images/sphx_glr_analysis_1_thumb.png" />
<p><a class="reference internal" href="../../tutorials/starting/analysis_1.html#sphx-glr-tutorials-starting-analysis-1-py"><span class="std std-ref">High level interface</span></a></p>
  <div class="sphx-glr-thumbnail-title">High level interface</div>
</div><div class="sphx-glr-thumbcontainer" tooltip="Introduction to Gammapy analysis using the low level API."><img alt="Low level API" src="../../_images/sphx_glr_analysis_2_thumb.png" />
<p><a class="reference internal" href="../../tutorials/starting/analysis_2.html#sphx-glr-tutorials-starting-analysis-2-py"><span class="std std-ref">Low level API</span></a></p>
  <div class="sphx-glr-thumbnail-title">Low level API</div>
</div><div class="sphx-glr-thumbcontainer" tooltip="Introduction to basic data structures handling."><img alt="Data structures" src="../../_images/sphx_glr_overview_thumb.png" />
<p><a class="reference internal" href="../../tutorials/starting/overview.html#sphx-glr-tutorials-starting-overview-py"><span class="std std-ref">Data structures</span></a></p>
  <div class="sphx-glr-thumbnail-title">Data structures</div>
</div><div class="sphx-glr-thumbcontainer" tooltip="Data inspection and preliminary analysis with Fermi-LAT data."><img alt="Fermi-LAT with Gammapy" src="../../_images/sphx_glr_fermi_lat_thumb.png" />
<p><a class="reference internal" href="../../tutorials/data/fermi_lat.html#sphx-glr-tutorials-data-fermi-lat-py"><span class="std std-ref">Fermi-LAT with Gammapy</span></a></p>
  <div class="sphx-glr-thumbnail-title">Fermi-LAT with Gammapy</div>
</div><div class="sphx-glr-thumbcontainer" tooltip="`H.E.S.S. &lt;https://www.mpi-hd.mpg.de/hfm/HESS/&gt;`__ is an array of gamma-ray telescopes located ..."><img alt="H.E.S.S. with Gammapy" src="../../_images/sphx_glr_hess_thumb.png" />
<p><a class="reference internal" href="../../tutorials/data/hess.html#sphx-glr-tutorials-data-hess-py"><span class="std std-ref">H.E.S.S. with Gammapy</span></a></p>
  <div class="sphx-glr-thumbnail-title">H.E.S.S. with Gammapy</div>
</div><div class="sphx-glr-thumbcontainer" tooltip="Perform a point like spectral analysis with energy dependent offset cut."><img alt="Spectral analysis with energy-dependent directional cuts" src="../../_images/sphx_glr_spectral_analysis_rad_max_thumb.png" />
<p><a class="reference internal" href="../../tutorials/analysis-1d/spectral_analysis_rad_max.html#sphx-glr-tutorials-analysis-1d-spectral-analysis-rad-max-py"><span class="std std-ref">Spectral analysis with energy-dependent directional cuts</span></a></p>
  <div class="sphx-glr-thumbnail-title">Spectral analysis with energy-dependent directional cuts</div>
</div><div class="sphx-glr-thumbcontainer" tooltip="Perform detailed 3D stacked and joint analysis."><img alt="3D detailed analysis" src="../../_images/sphx_glr_analysis_3d_thumb.png" />
<p><a class="reference internal" href="../../tutorials/analysis-3d/analysis_3d.html#sphx-glr-tutorials-analysis-3d-analysis-3d-py"><span class="std std-ref">3D detailed analysis</span></a></p>
  <div class="sphx-glr-thumbnail-title">3D detailed analysis</div>
</div></div></section>
<section id="examples-using-gammapy-maps-regionndmap">
<h3>Examples using <code class="docutils literal notranslate"><span class="pre">gammapy.maps.RegionNDMap</span></code><a class="headerlink" href="#examples-using-gammapy-maps-regionndmap" title="Permalink to this headline">#</a></h3>
<div class="sphx-glr-thumbnails"><div class="sphx-glr-thumbcontainer" tooltip="Data inspection and preliminary analysis with Fermi-LAT data."><img alt="Fermi-LAT with Gammapy" src="../../_images/sphx_glr_fermi_lat_thumb.png" />
<p><a class="reference internal" href="../../tutorials/data/fermi_lat.html#sphx-glr-tutorials-data-fermi-lat-py"><span class="std std-ref">Fermi-LAT with Gammapy</span></a></p>
  <div class="sphx-glr-thumbnail-title">Fermi-LAT with Gammapy</div>
</div><div class="sphx-glr-thumbcontainer" tooltip="Perform a point like spectral analysis with energy dependent offset cut."><img alt="Spectral analysis with energy-dependent directional cuts" src="../../_images/sphx_glr_spectral_analysis_rad_max_thumb.png" />
<p><a class="reference internal" href="../../tutorials/analysis-1d/spectral_analysis_rad_max.html#sphx-glr-tutorials-analysis-1d-spectral-analysis-rad-max-py"><span class="std std-ref">Spectral analysis with energy-dependent directional cuts</span></a></p>
  <div class="sphx-glr-thumbnail-title">Spectral analysis with energy-dependent directional cuts</div>
</div></div></section>
<section id="examples-using-gammapy-maps-hpxndmap">
<h3>Examples using <code class="docutils literal notranslate"><span class="pre">gammapy.maps.HpxNDMap</span></code><a class="headerlink" href="#examples-using-gammapy-maps-hpxndmap" title="Permalink to this headline">#</a></h3>
<div class="sphx-glr-thumbnails"><div class="sphx-glr-thumbcontainer" tooltip="Data inspection and preliminary analysis with Fermi-LAT data."><img alt="Fermi-LAT with Gammapy" src="../../_images/sphx_glr_fermi_lat_thumb.png" />
<p><a class="reference internal" href="../../tutorials/data/fermi_lat.html#sphx-glr-tutorials-data-fermi-lat-py"><span class="std std-ref">Fermi-LAT with Gammapy</span></a></p>
  <div class="sphx-glr-thumbnail-title">Fermi-LAT with Gammapy</div>
</div></div><div class="toctree-wrapper compound">
</div>
</section>
</section>
</section>


              </div>
              
              
          </main>
          

      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022, The Gammapy developers.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>