
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>PIG 4 - Setup for tutorial notebooks and data &#8212; gammapy v1.1rc1</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gammapy.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <link rel="shortcut icon" href="../../_static/gammapy_logo.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="PIG 5 - Gammapy 1.0 roadmap" href="pig-005.html" />
    <link rel="prev" title="PIG 3 - Plan for dropping Python 2.7 support" href="pig-003.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../../index.html">
  <img src="../../_static/gammapy_logo_nav.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../getting-started/index.html">
  Getting started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../user-guide/index.html">
  User guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../tutorials/index.html">
  Tutorials
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../api-reference/index.html">
  API reference
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../index.html">
  Developer guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../release-notes/index.html">
  Release notes
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <div class="dropdown" id="version_switcher">
    <button type="button" class="btn btn-primary btn-sm navbar-btn dropdown-toggle" id="version_switcher_button" data-toggle="dropdown">
        1.1rc1  <!-- this text may get changed later by javascript -->
        <span class="caret"></span>
    </button>
    <div id="version_switcher_menu" class="dropdown-menu list-group-flush py-0" aria-labelledby="version_switcher_button">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
</div>

<!-- NOTE: this JS must live here (not in our global JS file) because it relies
     on being processed by Jinja before it is run (specifically for replacing
     variables development/pigs/pig-004 and {'json_url': 'https://docs.gammapy.org/stable/switcher.json', 'version_match': '1.1rc1'}.
-->

<script type="text/javascript">
// Check if corresponding page path exists in other version of docs
// and, if so, go there instead of the homepage of the other docs version
function checkPageExistsAndRedirect(event) {
    const currentFilePath = "development/pigs/pig-004.html",
          tryUrl = event.target.getAttribute("href");
    let otherDocsHomepage = tryUrl.replace(currentFilePath, "");
    $.ajax({
        type: 'HEAD',
        url: tryUrl,
        // if the page exists, go there
        success: function() {
            location.href = tryUrl;
        }
    }).fail(function() {
        location.href = otherDocsHomepage;
    });
    // this prevents the browser from following the href of the clicked node
    // (which is fine because this function takes care of redirecting)
    return false;
}

// Populate the version switcher from the JSON config file
(function () {
    $.getJSON("https://docs.gammapy.org/stable/switcher.json", function(data, textStatus, jqXHR) {
        const currentFilePath = "development/pigs/pig-004.html";
        // create links to the corresponding page in the other docs versions
        $.each(data, function(index, entry) {
            // if no custom name specified (e.g., "latest"), use version string
            if (!("name" in entry)) {
                entry.name = entry.version;
            }
            // create the node
            const node = document.createElement("a");
            node.setAttribute("class", "list-group-item list-group-item-action py-1");
            node.textContent = `${entry.name}`;
            node.setAttribute("href", `${entry.url}${currentFilePath}`);
            // on click, AJAX calls will check if the linked page exists before
            // trying to redirect, and if not, will redirect to the homepage
            // for that version of the docs.
            node.onclick = checkPageExistsAndRedirect;
            // Add dataset values for the version and name in case people want
            // to apply CSS styling based on this information.
            node.dataset["versionName"] = entry.name;
            node.dataset["version"] = entry.version;

            $("#version_switcher_menu").append(node);
            // replace dropdown button text with the preferred display name of
            // this version, rather than using sphinx's 1.1rc1 variable.
            // also highlight the dropdown entry for the currently-viewed
            // version's entry
            if (entry.version == "1.1rc1") {
                node.classList.add("active");
                let btn = document.getElementById("version_switcher_button");
                btn.innerText = btn.dataset["activeVersionName"] = entry.name;
                btn.dataset["activeVersion"] = entry.version;
            }
        });
    });
})();
</script>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/gammapy/gammapy" rel="noopener" target="_blank" title="Github"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">Github</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/gammapyST" rel="noopener" target="_blank" title="Twitter"><span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://gammapy.slack.com/" rel="noopener" target="_blank" title="Slack"><span><i class="fab fa-slack"></i></span>
            <label class="sr-only">Slack</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../setup.html">
   Project setup
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../dependencies.html">
   Dependencies
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   How to contribute to Gammapy
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../release.html">
   How to make a Gammapy release
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../doc_howto.html">
   Documentation How To
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../dev_howto.html">
   Developer How To
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   PIGs
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="pig-001.html">
     PIG 1 - PIG purpose and guidelines
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pig-002.html">
     PIG 2 - Organization of low level analysis code
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pig-003.html">
     PIG 3 - Plan for dropping Python 2.7 support
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     PIG 4 - Setup for tutorial notebooks and data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pig-005.html">
     PIG 5 - Gammapy 1.0 roadmap
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pig-006.html">
     PIG 6 - CTA observation handling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pig-007.html">
     PIG 7 - Models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pig-008.html">
     PIG 8 - Datasets
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pig-009.html">
     PIG 9 - Event sampling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pig-010.html">
     PIG 10 - Regions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pig-011.html">
     PIG 11 - Light curves
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pig-012.html">
     PIG 12 - High level interface
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pig-013.html">
     PIG 13 - Gammapy dependencies and distribution
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pig-014.html">
     PIG 14 - Uncertainty estimation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pig-016.html">
     PIG 16 - Gammapy package structure
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pig-018.html">
     PIG 18 - Documentation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pig-019.html">
     PIG 19 - Gammapy package structure follow up
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pig-020.html">
     PIG 20 - Global Model API
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pig-021.html">
     PIG 21 - Models improvements
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pig-022.html">
     PIG 22 - Unified flux estimators API
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pig-023.html">
     PIG 23 - Gammapy release cycle and version numbering
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pig-024.html">
     PIG 24 - Authorship policy
    </a>
   </li>
  </ul>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#abstract">
   Abstract
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#what-we-have">
   What we have
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#proposal">
   Proposal
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#alternatives">
   Alternatives
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#decision">
   Decision
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="pig-4-setup-for-tutorial-notebooks-and-data">
<span id="pig-004"></span><h1>PIG 4 - Setup for tutorial notebooks and data<a class="headerlink" href="#pig-4-setup-for-tutorial-notebooks-and-data" title="Permalink to this headline">#</a></h1>
<ul class="simple">
<li><p>Author: José Enrique Ruiz, Christoph Deil</p></li>
<li><p>Created: May 16, 2018</p></li>
<li><p>Accepted: Oct 4, 2018</p></li>
<li><p>Status: accepted</p></li>
<li><p>Discussion: <a class="reference external" href="https://github.com/gammapy/gammapy/pull/1419">GH 1419</a></p></li>
</ul>
<section id="abstract">
<h2>Abstract<a class="headerlink" href="#abstract" title="Permalink to this headline">#</a></h2>
<p>For the past years, we have had tutorial notebooks and example datasets in a
second <code class="docutils literal notranslate"><span class="pre">gammapy-extra</span></code> repository, as well as others example datasets placed
in differente repositories like <code class="docutils literal notranslate"><span class="pre">gamma-cat</span></code> and <code class="docutils literal notranslate"><span class="pre">gammapy-fermi-lat-data</span></code>.
The motivation was to keep the main <code class="docutils literal notranslate"><span class="pre">gammapy</span></code> code repository small. But we
always had problems with code, tutorials and data changing and versions not
being linked.</p>
<p>We propose to move the notebooks to the <code class="docutils literal notranslate"><span class="pre">gammapy</span></code> repository so that code and
tutorials can be version-coupled, and to only use stable datasets in tutorials
to mostly save the versioning issues. The datasets will remain in
<code class="docutils literal notranslate"><span class="pre">gammapy-extra</span></code> repository.</p>
<p>To ship tutorials and datasets to users, we propose to add a <code class="docutils literal notranslate"><span class="pre">gammapy</span>
<span class="pre">download</span></code> command. The <code class="docutils literal notranslate"><span class="pre">gammapy-extra</span></code> repository will remain as a repository
for developers and as one place where datasets can be put, but it will not be
mentioned to users.</p>
</section>
<section id="what-we-have">
<h2>What we have<a class="headerlink" href="#what-we-have" title="Permalink to this headline">#</a></h2>
<p>We have the <a class="reference external" href="https://github.com/gammapy/gammapy">gammapy</a> repository for code, and the <a class="reference external" href="https://github.com/gammapy/gammapy-extra">gammapy-extra</a> repository
for tutorial notebooks, example datasets and a few other things.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">gammapy</span></code> repository currently is 12 MB and the <code class="docutils literal notranslate"><span class="pre">gammapy-extra</span></code>
repository is 161 MB. In <code class="docutils literal notranslate"><span class="pre">gammapy-extra/notebooks</span></code>, we have ~ 30 tutorial
notebooks, each 20 kB to 1 MB in size, i.e. a few MB in total. Most of the size
comes from PNG output images in the notebooks, and they usually change on
re-run, i.e. even though git compresses a bit, the repo grows by up to 1 MB
every time a notebook is edited. The datasets we access from the tutorials are
maybe 20 or 30 MB, a lot of the datasets we have there are old and should be
cleaned up / removed. The reason the notebooks and datasets were split out from
the code was to keep the code repository small and avoid it growing to 100 MB or
even 1 GB  over time.</p>
<p>This separation of code vs. notebooks and datasets has been a problem in Gammapy
for years.</p>
<p>Given that Gammapy code changes (and probably always will, even if the pace will
become slower and slower over the years), the tutorials have to be
version-coupled to the code. A related question is how tutorial notebooks,
datasets used in tutorials and other datasets not used in the tutorials are
shipped to users.  Some related discussions may be found in the following
references, see e.g. <a class="reference external" href="https://github.com/gammapy/gammapy/issues/1237">GH 1237</a>, <a class="reference external" href="https://github.com/gammapy/gammapy/pull/1369">GH 1369</a>, <a class="reference external" href="https://github.com/gammapy/gammapy/pull/700">GH 700</a>, <a class="reference external" href="https://github.com/gammapy/gammapy/pull/431">GH 431</a>, <a class="reference external" href="https://github.com/gammapy/gammapy/issues/405">GH 405</a>,
<a class="reference external" href="https://github.com/gammapy/gammapy/issues/288">GH 228</a>, <a class="reference external" href="https://github.com/gammapy/gammapy/issues/1131">GH 1131</a> (probably missed a few).</p>
</section>
<section id="proposal">
<h2>Proposal<a class="headerlink" href="#proposal" title="Permalink to this headline">#</a></h2>
<p>This proposal is limited. It outlines a few key changes in the setup for
notebooks and example data that mostly solve the versioning and shipping issue
of tutorials and datasets. Other related issues that may appear will be faced
iteratively with or without an extra PIG.</p>
<p>To solve the versioning issue for notebooks, we propose to move the notebooks
from <code class="docutils literal notranslate"><span class="pre">gammapy-extra/notebooks</span></code> to <code class="docutils literal notranslate"><span class="pre">gammapy/notebooks</span></code>. We propose to store
the notebooks in the repository without output cells filled. Removing output
cells before committing has the advantage that the files are small, and that the
diff in the pull request is also small and review becomes possible. On the other
hand, the output is not directly visible on GitHub. Note that in any case, a
rendered version of the notebooks will be available via the docs, that is
already in place.  We count on developer documentation and code review to
guarantee empty-output notebooks stored in <code class="docutils literal notranslate"><span class="pre">gammapy/notebooks</span></code>, though we can
also explore <a class="reference external" href="https://github.com/kynan/nbstripout">nbstripout</a> for a potential implementation of an automated
mechanism to remove outputs from notebooks in the GitHub repository.</p>
<p>In the process of documentation building the notebooks will be texted and
executed automatically, so the static HTML-formatted notebooks will contain
output cells rendered in the the documentation. On the contrary, links to Binder
notebooks and download links to .ipynb files will point to empty-output
notebooks.</p>
<p>To solve the versioning issue for datasets, we propose to only use stable
example datasets. Examples are <a class="reference external" href="https://github.com/gammapy/gammapy-fermi-lat-data">gammapy-fermi-lat-data</a> or
<code class="docutils literal notranslate"><span class="pre">gammapy-extra/datasets/cta-1dc</span></code> or the upcoming <a class="reference external" href="https://www.mpi-hd.mpg.de/hfm/HESS/pages/dl3-dr1/">HESS DL3 DR1</a> or
<code class="docutils literal notranslate"><span class="pre">joint-crab</span></code> datasets. Datasets can be in <code class="docutils literal notranslate"><span class="pre">gammapy-extra</span></code> or at any other
URL, but even if they are in <code class="docutils literal notranslate"><span class="pre">gammapy-extra</span></code>, they should not be ‘’live’’
datasets. If an issue is found or something is improved, a separate new dataset
should be added, instead of changing the existing one. So versioning of example
datasets is not needed.</p>
<p>To ship notebooks and example data to users, we propose to introduce a <code class="docutils literal notranslate"><span class="pre">gammapy</span>
<span class="pre">download</span></code> command. This work and discussion how it should work in detail has
started in <a class="reference external" href="https://github.com/gammapy/gammapy/pull/1369">GH 1369</a>. Roughly, the idea is that users will use <code class="docutils literal notranslate"><span class="pre">gammapy</span>
<span class="pre">download</span></code> to download a version of the notebooks matching the version of the
Gammapy code, by fetching the files from GitHub. A <code class="docutils literal notranslate"><span class="pre">gammapy</span> <span class="pre">download</span>
<span class="pre">tutorials</span></code> command will download all notebooks and the input datasets related.
Not output datasets from the notebooks will be downloaded. All files will be
copied into a <code class="docutils literal notranslate"><span class="pre">$CWD/gammapy-tutorials</span></code> folder, the datasets placed in a
<code class="docutils literal notranslate"><span class="pre">datasets</span></code> subfolder and the notebooks into a <code class="docutils literal notranslate"><span class="pre">notebooks-x.x</span></code> subfolder
accounting for the version downloaded. The management of  updating the
<code class="docutils literal notranslate"><span class="pre">gammapy-tutorials</span></code> folder after a local update of <code class="docutils literal notranslate"><span class="pre">gammapy</span></code> is left up to
the user.</p>
<p>The URLs of the input files used by the notebooks should be noted in the
<code class="docutils literal notranslate"><span class="pre">tutorials/notebooks.yaml</span></code> file in the Gammapy repository, also accounting for
the list of notebooks to download as tutorials. For the different stable
releases, the list of tutorials to download, their locations and datasets used
are declared in YAML files placed in the <code class="docutils literal notranslate"><span class="pre">download/tutorials</span></code> folder of the
<a class="reference external" href="https://github.com/gammapy/gammapy-webpage">gammapy-webpage</a> GitHub repository. The same happens for conda working
environments of stable releases declared in files placed in the
<code class="docutils literal notranslate"><span class="pre">download/install</span></code> folder of that repository. The datasets are not versioned
and are similarly declared in the <code class="docutils literal notranslate"><span class="pre">download/data</span></code> folder.</p>
<p>As far as we can see, for testing and online Binder these changes don’t
introduce significant improvements or new problems, though a Dockerfile in the
<code class="docutils literal notranslate"><span class="pre">gammapy</span></code> repository will be needed to have these notebooks running in Binder.
This is a change that will just affect developers and users on their local
machines.</p>
</section>
<section id="alternatives">
<h2>Alternatives<a class="headerlink" href="#alternatives" title="Permalink to this headline">#</a></h2>
<p>One alternative would be to keep the notebooks in <code class="docutils literal notranslate"><span class="pre">gammapy-extra</span></code>, and to
couple the version with <code class="docutils literal notranslate"><span class="pre">gammapy</span></code> somehow, e.g. via a git submodule pointer,
or via a config file in one of the repos or on gammapy.org with the version to
be used. The mono repo approach seems simpler and better.</p>
<p>For shipping the notebooks, one option is to include them in the source and
binary distribution as package data, instead of downloading the from the web.
For datasets this is not a good option, it would limit us to 10 - 30 MB max,
i.e. we would get a split between some datasets distributed this way, and larger
ones still via <code class="docutils literal notranslate"><span class="pre">gammapy</span> <span class="pre">download</span></code>. Overall it doesn’t seem useful; note that
we also don’t ship HTML documentation with the code, but separately.</p>
</section>
<section id="decision">
<h2>Decision<a class="headerlink" href="#decision" title="Permalink to this headline">#</a></h2>
<p>This PIG was extensively discussed on GitHub, as well as online and in-person
meetings. It was then implemented in summer 2018, and we shipped the new setup
with Gammapy v0.8 and tried the development workflow for a few weeks. The
solution works well so far and does solve the notebook and dataset issues that
motivated the work. It was finally approved during the Gammapy coding sprint on
Oct 4, 2018.</p>
</section>
</section>


              </div>
              
              
          </main>
          

      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2023, The Gammapy developers.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>