
<!DOCTYPE html>


<html lang="en" data-content_root="../" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>How to contribute to Gammapy &#8212; gammapy vX.Y.Z</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=947a6bef" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=1f75dfce"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=30646c52"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'development/intro';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.0';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://docs.gammapy.org/stable/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'dev';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <script src="../_static/matomo.js?v=52704cab"></script>
    <link rel="icon" href="../_static/gammapy_logo.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How to make a Gammapy release" href="release.html" />
    <link rel="prev" title="Dependencies" href="dependencies.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="2.0.dev100+gdfd7116c9" />
    <meta name="docbuild:last-update" content="26 Nov 2024"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
    
    <img src="../_static/gammapy_logo_nav.png" class="logo__image only-light" alt="gammapy vX.Y.Z - Home"/>
    <img src="../_static/gammapy_logo_nav.png" class="logo__image only-dark pst-js-only" alt="gammapy vX.Y.Z - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../getting-started/index.html">
    Getting started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../user-guide/index.html">
    User guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../tutorials/index.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api-reference/index.html">
    API reference
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Developer guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../release-notes/index.html">
    Release notes
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/gammapy/gammapy" title="Github" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github-square fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Github</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/gammapyST" title="Twitter" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-square-x-twitter fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://gammapy.slack.com/" title="Slack" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-slack fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Slack</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../getting-started/index.html">
    Getting started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../user-guide/index.html">
    User guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../tutorials/index.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api-reference/index.html">
    API reference
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Developer guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../release-notes/index.html">
    Release notes
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/gammapy/gammapy" title="Github" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github-square fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Github</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/gammapyST" title="Twitter" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-square-x-twitter fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://gammapy.slack.com/" title="Slack" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-slack fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Slack</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="setup.html">Project setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="dependencies.html">Dependencies</a></li>
</ul>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">How to contribute to Gammapy</a></li>
<li class="toctree-l1"><a class="reference internal" href="release.html">How to make a Gammapy release</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="doc_howto.html">Documentation How To</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev_howto.html">Developer How To</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="pigs/index.html">PIGs</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Developer guide</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">How to contribute to Gammapy</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="how-to-contribute-to-gammapy">
<span id="dev-intro"></span><h1>How to contribute to Gammapy<a class="headerlink" href="#how-to-contribute-to-gammapy" title="Link to this heading">#</a></h1>
<section id="what-is-this">
<h2>What is this?<a class="headerlink" href="#what-is-this" title="Link to this heading">#</a></h2>
<p><strong>This page is an overview of how to make a change or addition to the Gammapy
code, tests or documentation. It’s partly an introduction to the process, partly
a guide to some technical aspects.</strong></p>
<p>It is <em>not</em> a tutorial introduction explaining all the tools (git, GitHub,
Sphinx, pytest) or code (Python, Numpy, Scipy, Astropy) in detail. In the
Gammapy docs, we don’t have such a tutorial introduction written up, but we’re
happy to point out other tutorials or help you get started at any skill level
anytime if you ask.</p>
<p>Before attempting to make a contribution, you should <em>use</em> Gammapy a bit at least:</p>
<ul class="simple">
<li><p>Install Gammapy.</p></li>
<li><p>Execute one or two of the tutorial notebooks for Gammapy and do the exercises there.</p></li>
<li><p>Ask questions or complain about issues on the Gammapy <a class="reference external" href="https://gammapy.slack.com/">slack channel</a>, <a class="reference external" href="https://github.com/gammapy/gammapy/discussions">GitHub discussions</a> or <a class="reference external" href="https://github.com/gammapy/gammapy/issues">GitHub issues tracker</a>.</p></li>
</ul>
<p>We’d like to note that there are many ways to contribute to the Gammapy project.
For example if you mention it to a colleague or suggest it to a student, or if
you use it and <a class="reference external" href="https://gammapy.org/acknowledging.html">acknowledge Gammapy</a>
in a presentation, poster or publication, or if you report an issue on the mailing list,
those are contributions we value. The rest of this page though is concerned only with
the process and technical steps how to contribute a code or documentation change via a
<strong>pull request</strong> against the Gammapy repository.</p>
<p>So let’s assume you’ve used Gammapy for a while, and now you’d like to fix or
add something to the Gammapy code, tests or docs. Here are the steps and commands
to do it …</p>
</section>
<section id="acceptation-of-the-developer-certificate-of-origin-dco">
<h2>Acceptation of the Developer Certificate of Origin (DCO)<a class="headerlink" href="#acceptation-of-the-developer-certificate-of-origin-dco" title="Link to this heading">#</a></h2>
<p>As described in the <a class="reference external" href="https://github.com/gammapy/gammapy/blob/master/docs/development/pigs/pig-024.rst">PIG 24</a> and
the <a class="reference external" href="https://github.com/gammapy/gammapy/blob/master/README.rst">README.rst</a> file, each contributor shall accept the
DCO based stored in the file <a class="reference external" href="https://github.com/gammapy/gammapy/blob/main/CONTRIBUTING.md#gammapy-developer-certification-of-origin">CONTRIBUTING.md</a>:
this is a binding statement that asserts that you are the creator of your contribution, and that you wish to allow
Gammapy to use your work to cite you as contributor.</p>
<p><strong>If you are willing to agree to these terms, the following agreement line should be added to every commit message:</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">Signed-off-by:</span> <span class="pre">Random</span> <span class="pre">J</span> <span class="pre">Developer</span> <span class="pre">&lt;random&#64;developer.example.org&gt;</span></code></p>
<p>Four solutions exist:</p>
<ol class="arabic simple">
<li><p>You add this message by hand into each of your commit messages (not recommended)</p></li>
<li><p>You can sign each of your commits with the command: “<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">-s</span></code>”.</p></li>
</ol>
<p>If you have authored a commit that is missing its ‘Signed-off-by’ line, you can amend your commits and push them to
GitHub: “<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">--amend</span> <span class="pre">--no-edit</span> <span class="pre">--signoff</span></code>”
(see also this <a class="reference external" href="https://github.com/src-d/guide/blob/master/developer-community/fix-DCO.md#how-to-add-sign-offs-retroactively">How To</a>).</p>
<ol class="arabic simple" start="3">
<li><p>You can make an alias of the command “<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">-s</span></code>”, e.g.</p></li>
</ol>
<p><code class="docutils literal notranslate"><span class="pre">alias</span> <span class="pre">gcs</span> <span class="pre">'git</span> <span class="pre">commit</span> <span class="pre">-s'</span></code></p>
<p>4. You can create a so-called <code class="xref py py-obj docutils literal notranslate"><span class="pre">git</span> <span class="pre">hooks</span></code> allowing to automatically sign all your commits (recommended option). This
method is described in detail <a class="reference external" href="https://github.com/src-d/guide/blob/master/developer-community/fix-DCO.md#how-to-prevent-missing-sign-offs-in-the-future">here</a>.</p>
<p>For each of these solutions, it is <strong>mandatory</strong> to correctly set your <code class="xref py py-obj docutils literal notranslate"><span class="pre">user.name</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">user.email</span></code> as part of your git
configuration (see <a class="reference external" href="https://docs.github.com/en/account-and-profile/setting-up-and-managing-your-personal-account-on-github/managing-email-preferences/setting-your-commit-email-address">this page</a> to configure it).
You have to use <strong>your real name</strong> (i.e., pseudonyms or anonymous contributions cannot be made) when using git. This is
because the DCO is a binding document, granting the Gammapy project to be an open source project.</p>
</section>
<section id="get-in-touch-early">
<h2>Get in touch early<a class="headerlink" href="#get-in-touch-early" title="Link to this heading">#</a></h2>
<p><strong>Usually the first step, before doing any work, is to get in touch with the
Gammapy developers!</strong></p>
<p>Especially if you’re new to the project, and don’t have an overview of ongoing
activities, there’s a risk that your work will be in vain if you don’t talk to
us early. E.g. it could happen that someone else is currently working on similar
functionality, or that you’ve found a code or documentation bug and are willing
to fix it, but it then turns out that this was for some part of Gammapy that we
wanted to re-write or remove soon anyway.</p>
<p>Also, it’s usually more fun if you get a <em>mentor</em> or <em>reviewer</em> early in the
process, so that you have someone to bug with questions and issues that come up
while executing the steps outlined below.</p>
<p>After you’ve done a few contributions to Gammapy and know about the status of
ongoing work, the best way to proceed is to file an issue or pull request on
GitHub at the stage where you want feedback or review. Sometimes you’re not sure
how to best do something, and you start by discussing it on the mailing list or
in a GitHub issue. Sometimes you know how you’d like to do it, and you just code
or write it up and make a pull request when it’s basically finished.</p>
<p>In any case, please keep the following point also in mind …</p>
</section>
<section id="make-small-pull-requests">
<h2>Make small pull requests<a class="headerlink" href="#make-small-pull-requests" title="Link to this heading">#</a></h2>
<p><strong>Contributions to Gammapy happen via pull requests on GitHub. We like them small.</strong></p>
<p>So as we’ll explain in more detail below, the contribution cycle to Gammapy is roughly:</p>
<ol class="arabic simple">
<li><p>Get the latest development version (<code class="docutils literal notranslate"><span class="pre">main</span></code> branch) of Gammapy</p></li>
<li><p>Make fixes, changes and additions locally</p></li>
<li><p>Make a pull request</p></li>
<li><p>Someone else reviews the pull request, you iterate, others can chime in</p></li>
<li><p>Someone else signs off on or merges your pull request</p></li>
<li><p>You update to the latest <code class="docutils literal notranslate"><span class="pre">main</span></code> branch</p></li>
</ol>
<p>Then you’re done, and can start using the new version, or start a new pull request
with further developments. It is possible and common to work on things in parallel
using git branches.</p>
<p>So how large should one pull request be?</p>
<p>Our experience in Gammapy (and others confirm, see e.g. <a class="reference external" href="https://alexgaynor.net/2015/dec/29/shrinking-code-review/">here</a>) is that smaller
is better. Working on a pull request for an hour or maximum a day, and having a
diff of a few to maximum a few 100 lines to review and discuss is pleasant.</p>
<p>A pull request that drags on for more than a few days, or that contains a diff
or 1000 lines, is almost always painful and inefficient for the person making
it, but even more so for the person reviewing it.</p>
<p>The worst case is if you start a pull request, put in a lot of hours, but
then don’t have time to “finish” it, and it’s sitting there for a week or a
month without getting merged. Then it’s either blocking others that want to work
on the same part of the code or docs, or they do it, and then you have merged
conflicts to resolve when you come back to it. And coming back to a large pull
request after a long time always means a large investment of time for the
reviewer, because they probably have to re-read the previous discussion, and
look through the large diff again.</p>
<p>So pull requests that are small, e.g. one bug fix with the addition of one
regression test, or one new function or class or file, or one documentation
example, and that get reviewed and merged quickly (ideally the same day,
certainly the same week), are best.</p>
</section>
<section id="get-set-up">
<span id="dev-setup"></span><h2>Get set up<a class="headerlink" href="#get-set-up" title="Link to this heading">#</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The rest of this page isn’t written yet. It’s almost identical to
<a class="reference external" href="https://ctapipe.readthedocs.io/en/latest/developer-guide/getting-started.html">https://ctapipe.readthedocs.io/en/latest/developer-guide/getting-started.html</a> so for
now, see there. Also, we shouldn’t duplicate content from
<a class="reference external" href="https://docs.astropy.org/en/latest/development/index.html">https://docs.astropy.org/en/latest/development/index.html</a> but link
there instead.</p>
</div>
<p>The first steps are basically identical to
<a class="reference external" href="https://ctapipe.readthedocs.io/en/latest/developer-guide/getting-started.html">https://ctapipe.readthedocs.io/en/latest/developer-guide/getting-started.html</a> (until
section <em>Setting up the development environment</em>) and
<a class="reference external" href="http://astropy.readthedocs.io/en/latest/development/workflow/get_devel_version.html">http://astropy.readthedocs.io/en/latest/development/workflow/get_devel_version.html</a>
(up to <em>Create your own private workspace</em>). The following is a quick summary of
commands to set up an environment for Gammapy development:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Fork the gammapy repository on GitHub, https://github.com/gammapy/gammapy</span>
<span class="nb">cd</span><span class="w"> </span>code<span class="w"> </span><span class="c1"># Go somewhere on your machine where you want to code</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/<span class="o">[</span>your-github-username<span class="o">]</span>/gammapy.git
<span class="nb">cd</span><span class="w"> </span>gammapy
conda<span class="w"> </span>env<span class="w"> </span>create<span class="w"> </span>-f<span class="w"> </span>environment-dev.yml

<span class="c1"># To speed up the environment solving you can use mamba instead of conda</span>
<span class="c1"># mamba env create -f environment-dev.yml</span>
conda<span class="w"> </span>activate<span class="w"> </span>gammapy-dev

<span class="c1"># for conda versions &lt;4.4.0 you may have to execute</span>
<span class="c1"># &#39;source activate gammapy-dev&#39; instead</span>
git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>gammapy<span class="w"> </span>git@github.com:gammapy/gammapy.git
git<span class="w"> </span>remote<span class="w"> </span>rename<span class="w"> </span>origin<span class="w"> </span><span class="o">[</span>your-user-name<span class="o">]</span>
</pre></div>
</div>
<p><a class="reference external" href="https://mamba.readthedocs.io/">Mamba</a> is an alternative package manager that offers higher installation
speed and more reliable environment solutions.</p>
<p>It is also common to stick with the name <code class="docutils literal notranslate"><span class="pre">origin</span></code> for your repository and to
use <code class="docutils literal notranslate"><span class="pre">upstream</span></code> for the repository you forked from. In any case, you can use
<code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">git</span> <span class="pre">remote</span> <span class="pre">-v</span></code> to list all your configured remotes.</p>
<p>In case you are working with the development version environment and you want to update this
environment with the content present in <code class="xref py py-obj docutils literal notranslate"><span class="pre">environment-dev.yml</span></code> see below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>env<span class="w"> </span>update<span class="w"> </span>--file<span class="w"> </span>environment-dev.yml<span class="w"> </span>--prune
</pre></div>
</div>
<p>When developing Gammapy you never want to work on the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch, but
always on a dedicated feature branch.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>branch<span class="w"> </span><span class="o">[</span>branch-name<span class="o">]</span>
git<span class="w"> </span>checkout<span class="w"> </span><span class="o">[</span>branch-name<span class="o">]</span>
</pre></div>
</div>
<p>To <em>activate</em> your development version (branch) of Gammapy in your environment:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>.
</pre></div>
</div>
<p>This build is necessary to compile the few Cython code (<code class="docutils literal notranslate"><span class="pre">*.pyx</span></code>). If you skip
this step, some imports depending on Cython code will fail. If you want to remove the generated
files run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">clean</span></code>.</p>
<p>For the development it is also convenient to have declared <code class="docutils literal notranslate"><span class="pre">$GAMMAPY_DATA</span></code> environment variable.
You can download the Gammapy datasets with <code class="docutils literal notranslate"><span class="pre">gammapy</span> <span class="pre">download</span> <span class="pre">datasets</span></code> and then point
your <code class="docutils literal notranslate"><span class="pre">$GAMMAPY_DATA</span></code> to the local path you have chosen.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Download GAMMAPY_DATA</span>
gammapy<span class="w"> </span>download<span class="w"> </span>datasets<span class="w"> </span>--out<span class="w"> </span>GAMMAPY_DATA
<span class="nb">export</span><span class="w"> </span><span class="nv">GAMMAPY_DATA</span><span class="o">=</span><span class="nv">$PWD</span>/GAMMAPY_DATA
</pre></div>
</div>
<p>We adhere to the PEP8 coding style. To enforce this, setup the
<a class="reference external" href="https://pre-commit.com/">pre-commit hook</a>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pre-commit<span class="w"> </span>install
</pre></div>
</div>
</section>
<section id="running-tests-building-documentation">
<h2>Running tests &amp; building Documentation<a class="headerlink" href="#running-tests-building-documentation" title="Link to this heading">#</a></h2>
<p>To run tests and build documentation we use tool <a class="reference external" href="https://tox.wiki/en/latest/">tox</a>.
It is a virtual environment management tool which allows you to test Gammapy locally
in mutltiple test environments with different versions of Python and our dependencies.
It is also used to build the documentation and check the codestyle in a specific environment.
The same setup based on <code class="xref py py-obj docutils literal notranslate"><span class="pre">tox</span></code> is used in our CI build.</p>
<p>Once you have created and activated the <code class="xref py py-obj docutils literal notranslate"><span class="pre">gammapy-dev</span></code> environment, made some modification
to the code, you should run the tests:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tox<span class="w"> </span>-e<span class="w"> </span><span class="nb">test</span>
</pre></div>
</div>
<p>This will execute the tests in the standard <code class="xref py py-obj docutils literal notranslate"><span class="pre">test`</span></code> environment. If you would like
to test with a different environment you can use:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tox<span class="w"> </span>-e<span class="w"> </span>py310-test-numpy121
</pre></div>
</div>
<p>Which will test the code with Python 3.10 and numpy 1.21. All available pre-defined
environments can be listed using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tox<span class="w"> </span>--listenvs
</pre></div>
</div>
<p>However for most contributions testing with the standard <code class="xref py py-obj docutils literal notranslate"><span class="pre">tox</span> <span class="pre">-e</span> <span class="pre">test</span></code> command is sufficient.
Additional arguments for <code class="xref py py-obj docutils literal notranslate"><span class="pre">pytest</span></code> can be passed after <code class="xref py py-obj docutils literal notranslate"><span class="pre">--</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tox<span class="w"> </span>-e<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--<span class="w"> </span>-n<span class="w"> </span>auto
</pre></div>
</div>
<p>Of course you can always use <a class="reference external" href="https://docs.pytest.org/en/7.1.x/">pytest</a> directly to
run tests, e.g. to run tests in a specific sub-package:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest<span class="w"> </span>gammapy/maps
</pre></div>
</div>
<p>To build the documentation locally you can use:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tox<span class="w"> </span>-e<span class="w"> </span>build_docs
</pre></div>
</div>
<p>And use <code class="xref py py-obj docutils literal notranslate"><span class="pre">make</span> <span class="pre">docs-show</span></code> to open a browser and preview the result.</p>
<p>The codestyle can be checked using the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tox<span class="w"> </span>-e<span class="w"> </span>codestyle
</pre></div>
</div>
<p>Which will run the tool <code class="xref py py-obj docutils literal notranslate"><span class="pre">flake8</span></code> to check for code style issues.</p>
</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-this">What is this?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#acceptation-of-the-developer-certificate-of-origin-dco">Acceptation of the Developer Certificate of Origin (DCO)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-in-touch-early">Get in touch early</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#make-small-pull-requests">Make small pull requests</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-set-up">Get set up</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-tests-building-documentation">Running tests &amp; building Documentation</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/development/intro.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024, The Gammapy developers.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
    
     <a href="https://gammapy.org/DataPrivacy.html">Data Privacy.</a>
</div>
      
    </div>
  
  
    <div class="footer-items__center">
      
        <div class="footer-item"><p class="last-updated">
  Last updated on 26 Nov 2024.
  <br/>
</p></div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    <br/>
  </p>
</div>
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.0.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>