
<!DOCTYPE html>


<html lang="en" data-content_root="../../" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>PIG 21 - Models improvements &#8212; gammapy vX.Y.Z</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=947a6bef" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="../../_static/jquery.js?v=5d32c60e"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../../_static/documentation_options.js?v=1f75dfce"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=30646c52"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'development/pigs/pig-021';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.0';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://docs.gammapy.org/stable/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'dev';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <script src="../../_static/matomo.js?v=52704cab"></script>
    <link rel="icon" href="../../_static/gammapy_logo.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="PIG 22 - Unified flux estimators API" href="pig-022.html" />
    <link rel="prev" title="PIG 20 - Global Model API" href="pig-020.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="2.0.dev100+gdfd7116c9" />
    <meta name="docbuild:last-update" content="26 Nov 2024"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
    
    <img src="../../_static/gammapy_logo_nav.png" class="logo__image only-light" alt="gammapy vX.Y.Z - Home"/>
    <img src="../../_static/gammapy_logo_nav.png" class="logo__image only-dark pst-js-only" alt="gammapy vX.Y.Z - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../getting-started/index.html">
    Getting started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../user-guide/index.html">
    User guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../tutorials/index.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../api-reference/index.html">
    API reference
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    Developer guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../release-notes/index.html">
    Release notes
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/gammapy/gammapy" title="Github" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github-square fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Github</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/gammapyST" title="Twitter" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-square-x-twitter fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://gammapy.slack.com/" title="Slack" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-slack fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Slack</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../getting-started/index.html">
    Getting started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../user-guide/index.html">
    User guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../tutorials/index.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../api-reference/index.html">
    API reference
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    Developer guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../release-notes/index.html">
    Release notes
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/gammapy/gammapy" title="Github" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github-square fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Github</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/gammapyST" title="Twitter" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-square-x-twitter fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://gammapy.slack.com/" title="Slack" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-slack fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Slack</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../setup.html">Project setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dependencies.html">Dependencies</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">How to contribute to Gammapy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">How to make a Gammapy release</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../doc_howto.html">Documentation How To</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_howto.html">Developer How To</a></li>
</ul>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">PIGs</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="pig-001.html">PIG 1 - PIG purpose and guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-002.html">PIG 2 - Organization of low level analysis code</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-003.html">PIG 3 - Plan for dropping Python 2.7 support</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-004.html">PIG 4 - Setup for tutorial notebooks and data</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-005.html">PIG 5 - Gammapy 1.0 roadmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-006.html">PIG 6 - CTA observation handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-007.html">PIG 7 - Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-008.html">PIG 8 - Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-009.html">PIG 9 - Event sampling</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-010.html">PIG 10 - Regions</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-011.html">PIG 11 - Light curves</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-012.html">PIG 12 - High level interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-013.html">PIG 13 - Gammapy dependencies and distribution</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-014.html">PIG 14 - Uncertainty estimation</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-016.html">PIG 16 - Gammapy package structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-018.html">PIG 18 - Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-019.html">PIG 19 - Gammapy package structure follow up</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-020.html">PIG 20 - Global Model API</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">PIG 21 - Models improvements</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-022.html">PIG 22 - Unified flux estimators API</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-023.html">PIG 23 - Gammapy release cycle and version numbering</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-024.html">PIG 24 - Authorship policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-025.html">PIG 25 - Metadata container for Gammapy</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-026.html">PIG 26 - Model Priors API</a></li>
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">Developer guide</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">PIGs</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">PIG 21 - Models improvements</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="pig-21-models-improvements">
<span id="pig-021"></span><h1>PIG 21 - Models improvements<a class="headerlink" href="#pig-21-models-improvements" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Author: Axel Donath, Régis Terrier and Quentin Remy</p></li>
<li><p>Created: Jun 10, 2020</p></li>
<li><p>Accepted: July 31, 2020</p></li>
<li><p>Status: accepted</p></li>
<li><p>Discussion: <a class="reference external" href="https://github.com/gammapy/gammapy/pull/2944">GH 2944</a></p></li>
</ul>
<section id="abstract">
<h2>Abstract<a class="headerlink" href="#abstract" title="Link to this heading">#</a></h2>
<p>This PIG outlines further minor improvements to the modeling framework of Gammapy.
This includes introduction of a spectra models with norm parameters, minimal
support for energy dependent spatial models as well as simplifications of the
YAML serialisation.</p>
</section>
<section id="proposal">
<h2>Proposal<a class="headerlink" href="#proposal" title="Link to this heading">#</a></h2>
<section id="spectral-norm-models">
<h3>Spectral Norm Models<a class="headerlink" href="#spectral-norm-models" title="Link to this heading">#</a></h3>
<p>For the purpose of adjusting template based models we propose to introduce a new
class of spectral models. Those spectral models feature a norm parameter instead
of amplitude and are named using the <code class="docutils literal notranslate"><span class="pre">NormSpectralModel</span></code> suffix:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gammapy.modeling.models</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">PowerLawNormSpectralModel</span><span class="p">,</span>
    <span class="n">LogParabolaNormSpectralModel</span><span class="p">,</span>
    <span class="n">PiecewiseBrokenPowerlawNormSpectralModel</span><span class="p">,</span>
    <span class="n">ConstantNormSpectralModel</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">pwl_norm</span> <span class="o">=</span> <span class="n">PowerLawNormSpectralModel</span><span class="p">(</span><span class="n">norm</span><span class="o">=</span><span class="p">,</span> <span class="n">tilt</span><span class="o">=</span><span class="p">,</span> <span class="n">reference</span><span class="o">=</span><span class="p">)</span>
<span class="n">log_parabola_norm</span> <span class="o">=</span> <span class="n">LogParabolaNormSpectralModel</span><span class="p">(</span><span class="n">norm</span><span class="o">=</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="p">,</span> <span class="n">beta</span><span class="o">=</span><span class="p">)</span>
<span class="n">bpwl_norm</span> <span class="o">=</span> <span class="n">PiecewiseBrokenPowerlawNormSpectralModel</span><span class="p">(</span><span class="n">norms</span><span class="o">=</span><span class="p">,</span> <span class="n">energies</span><span class="o">=</span><span class="p">)</span>
<span class="n">const_norm</span> <span class="o">=</span> <span class="n">ConstantNormSpectralModel</span><span class="p">(</span><span class="n">norm</span><span class="o">=</span><span class="p">)</span>

<span class="c1"># typically used like</span>
    <span class="n">template</span> <span class="o">=</span> <span class="n">TemplateSpectralModel</span><span class="p">()</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">template</span> <span class="o">*</span> <span class="n">pwl_norm</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">BackgroundModel</span><span class="p">(</span>
            <span class="nb">map</span><span class="o">=</span><span class="nb">map</span><span class="p">,</span>
            <span class="n">spectral_model</span><span class="o">=</span><span class="n">pwl_norm</span>
    <span class="p">)</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">SkyDiffuseCube</span><span class="p">(</span>
            <span class="nb">map</span><span class="o">=</span><span class="nb">map</span><span class="p">,</span>
            <span class="n">spectral_model</span><span class="o">=</span><span class="n">pwl_norm</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>This requires removing the hard-coded parameters of the <code class="xref py py-obj docutils literal notranslate"><span class="pre">TemplateSpectralModel</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">BackgroundModel</span></code>.</p>
</section>
<section id="energy-dependent-spatial-models">
<h3>Energy Dependent Spatial Models<a class="headerlink" href="#energy-dependent-spatial-models" title="Link to this heading">#</a></h3>
<p>A very common use-case in scientific analyses is to look for energy dependent
morphology of extended sources. In the past this kind of analysis has been typically
done by splitting the data into energy bands and doing individual fits of the
morphology in these energy bands. In a combined spectral and spatial (“cube”) analysis
this can be naturally achieved by allowing for an energy dependent spatial model,
where the energy dependence is e.g. described by a parametric model expression with
energy dependent parameters.</p>
<p>In the current model scheme we use a “factorised” representation of the source model,
where the spatial, energy and time dependence are independent model components and
not correlated:</p>
<div class="math notranslate nohighlight">
\[f(l, b, E, t) = A \cdot F(l, b) \cdot G(E) \cdot H(t)\]</div>
<p>To represent energy dependent morphology we propose to introduce energy
dependent spatial models:</p>
<div class="math notranslate nohighlight">
\[f(l, b, E, t) = A \cdot F(l, b, E) \cdot G(E) \cdot H(t)\]</div>
<p>In general the energy dependence is optional. If the spatial model does not declare
an energy dependence it assumes the same morphology for all energies. This also ensures backwards
compatibility with the current behaviour.</p>
<p>To limit the implementation effort in this PIG we propose to only add an example energy dependent
custom model to our documentation. We do not propose to introduce general dependence of arbitrary
model parameters for any spatial model, such as <code class="docutils literal notranslate"><span class="pre">GaussianSpatialModel</span></code> or <code class="docutils literal notranslate"><span class="pre">DiskSpatialModel</span></code>.
An example of how this can be achieved with a custom implemented model is given below:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gammapy.modeling.models</span> <span class="kn">import</span> <span class="n">SpatialModel</span>
<span class="kn">from</span> <span class="nn">astropy.coordinates</span> <span class="kn">import</span> <span class="n">angular_separation</span>

<span class="k">class</span> <span class="nc">MyCustomGaussianModel</span><span class="p">(</span><span class="n">SpatialModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;My custom gaussian model.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    lon_0, lat_0 : `~astropy.coordinates.Angle`</span>
<span class="sd">        Center position</span>
<span class="sd">    sigma_1TeV : `~astropy.coordinates.Angle`</span>
<span class="sd">        Width of the Gaussian at 1 TeV</span>
<span class="sd">    sigma_10TeV : `~astropy.coordinates.Angle`</span>
<span class="sd">        Width of the Gaussian at 10 TeV</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">tag</span> <span class="o">=</span> <span class="s2">&quot;MyCustomGaussianModel&quot;</span>
    <span class="n">lon_0</span> <span class="o">=</span> <span class="n">Parameter</span><span class="p">(</span><span class="s2">&quot;lon_0&quot;</span><span class="p">,</span> <span class="s2">&quot;0 deg&quot;</span><span class="p">)</span>
    <span class="n">lat_0</span> <span class="o">=</span> <span class="n">Parameter</span><span class="p">(</span><span class="s2">&quot;lat_0&quot;</span><span class="p">,</span> <span class="s2">&quot;0 deg&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=-</span><span class="mi">90</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>

    <span class="n">sigma_1TeV</span> <span class="o">=</span> <span class="n">Parameter</span><span class="p">(</span><span class="s2">&quot;sigma_1TeV&quot;</span><span class="p">,</span> <span class="s2">&quot;1 deg&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">sigma_10TeV</span> <span class="o">=</span> <span class="n">Parameter</span><span class="p">(</span><span class="s2">&quot;sigma_10TeV&quot;</span><span class="p">,</span> <span class="s2">&quot;0.5 deg&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="nd">@staticmethod</span><span class="p">:</span>
<span class="k">def</span> <span class="nf">evaluate</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">energy</span><span class="p">,</span> <span class="n">lon_0</span><span class="p">,</span> <span class="n">lat_0</span><span class="p">,</span> <span class="n">sigma_1TeV</span><span class="p">,</span> <span class="n">sigma_10TeV</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Evaluate custom Gaussian model&quot;&quot;&quot;</span>
    <span class="n">sigmas</span> <span class="o">=</span> <span class="n">u</span><span class="o">.</span><span class="n">Quantity</span><span class="p">([</span><span class="n">sigma_1TeV</span><span class="p">,</span> <span class="n">sigma_10TeV</span><span class="p">])</span>
    <span class="n">energy_nodes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">TeV</span>
    <span class="n">sigma</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="n">energy</span><span class="p">,</span> <span class="n">energy_nodes</span><span class="p">,</span> <span class="n">sigmas</span><span class="p">)</span>

    <span class="n">sep</span> <span class="o">=</span> <span class="n">angular_separation</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">lon_0</span><span class="p">,</span> <span class="n">lat_0</span><span class="p">)</span>

    <span class="n">exponent</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">sep</span> <span class="o">/</span> <span class="n">sigma</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>
    <span class="n">norm</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">sigma</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">norm</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">exponent</span><span class="p">)</span>

<span class="nd">@property</span>
<span class="k">def</span> <span class="nf">evaluation_radius</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Evaluation radius (`~astropy.coordinates.Angle`).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="mi">5</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">sigma_1TeV</span><span class="o">.</span><span class="n">quantity</span>
</pre></div>
</div>
</section>
<section id="spectral-absorption-model">
<h3>Spectral Absorption Model<a class="headerlink" href="#spectral-absorption-model" title="Link to this heading">#</a></h3>
<p>In the current handling of absorbed spectral models we have a very special
<code class="docutils literal notranslate"><span class="pre">Absorption</span></code> model, which is not a spectral model. To resolve this special
case, we propose to refactor the existing code and handle the absorbed case
using a <code class="docutils literal notranslate"><span class="pre">CompoundSpectralModel</span></code>. The new implementation is used as follows:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gammapy.modeling.models</span> <span class="kn">import</span> <span class="n">EBLAbsorptionNormSpectralModel</span><span class="p">,</span> <span class="n">PowerLawSpectralModel</span>

<span class="n">absorption</span> <span class="o">=</span> <span class="n">EBLAbsorptionNormSpectralModel</span><span class="o">.</span><span class="n">from_reference</span><span class="p">(</span>
    <span class="n">redshift</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">alpha_norm</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">reference</span><span class="o">=</span><span class="s2">&quot;dominguez&quot;</span>
<span class="p">)</span>

<span class="n">pwl</span> <span class="o">=</span> <span class="n">PowerLawSpectralModel</span><span class="p">()</span>

<span class="n">spectral_model</span> <span class="o">=</span> <span class="n">absorption</span> <span class="o">*</span> <span class="n">pwl</span>

<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">spectral_model</span><span class="p">,</span> <span class="n">CompoundSpectralModel</span><span class="p">)</span>
</pre></div>
</div>
<p>In addition we propose to rename <code class="docutils literal notranslate"><span class="pre">.table_model</span></code> to <code class="docutils literal notranslate"><span class="pre">.to_template_spectral_model(redshift,</span> <span class="pre">alpha_norm)</span></code>.</p>
</section>
<section id="additional-models">
<h3>Additional Models<a class="headerlink" href="#additional-models" title="Link to this heading">#</a></h3>
<p>In addition we propose to implement the following models in <code class="docutils literal notranslate"><span class="pre">gammapy.modeling.models</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SersicSpatialModel</span></code> following the parametrisation of the Astropy <code class="docutils literal notranslate"><span class="pre">Sersic2D</span></code> model.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BrokenPowerLaw</span></code> with the following parametrisation:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{split}\phi(E) = \phi_0 \times \left \{
    \begin{eqnarray}
            \left( \frac{E}{E_b} \right)^{\gamma_1} &amp; {\rm if\,\,} E &lt; E_b \\
            \left( \frac{E}{E_b} \right)^{\gamma_2} &amp; {\rm otherwise}
    \end{eqnarray}
    \right .\end{split}\end{split}\]</div>
<ul class="simple">
<li><p>We propose to re-introduce the <code class="docutils literal notranslate"><span class="pre">PhaseCurveModel</span></code> to compute mean fluxes over time</p></li>
</ul>
</section>
<section id="simplify-yaml-representation">
<h3>Simplify YAML Representation<a class="headerlink" href="#simplify-yaml-representation" title="Link to this heading">#</a></h3>
<section id="introduce-shorter-yaml-alias-tags">
<h4>Introduce Shorter YAML Alias Tags<a class="headerlink" href="#introduce-shorter-yaml-alias-tags" title="Link to this heading">#</a></h4>
<p>To simplify the definition of models in YAML files as well as for interactive
model creation we propose to introduce shorter YAML tags for all models in Gammapy.
For backwards compatibility we propose to support the class name as well. We
require that the short YAML tag is only unique within the model class, so that
the same tag such as “gauss” can be re-used by spectral, spatial as well as
temporal components. The uniqueness is guaranteed in the YAML file, because
of the different sections for the model types. For writing the models the
verbose class name is used by default.</p>
<p>We propose to introduce the following YAML tags:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Class Name</p></th>
<th class="head"><p>YAML Tag</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ConstantSpectralModel</p></td>
<td><p>const</p></td>
</tr>
<tr class="row-odd"><td><p>ConstantNormSpectralModel</p></td>
<td><p>const-norm</p></td>
</tr>
<tr class="row-even"><td><p>CompoundSpectralModel</p></td>
<td><p>compound</p></td>
</tr>
<tr class="row-odd"><td><p>PowerLawSpectralModel</p></td>
<td><p>pl</p></td>
</tr>
<tr class="row-even"><td><p>PowerLawNormSpectralModel</p></td>
<td><p>pl-norm</p></td>
</tr>
<tr class="row-odd"><td><p>PowerLaw2SpectralModel</p></td>
<td><p>pl-2</p></td>
</tr>
<tr class="row-even"><td><p>SmoothBrokenPowerLawSpectralModel</p></td>
<td><p>sbpl</p></td>
</tr>
<tr class="row-odd"><td><p>BrokenPowerLawSpectralModel</p></td>
<td><p>bpl</p></td>
</tr>
<tr class="row-even"><td><p>PiecewiseBrokenPowerLawNormSpectraModel</p></td>
<td><p>pwbpl-norm</p></td>
</tr>
<tr class="row-odd"><td><p>ExpCutoffPowerLawSpectralModel</p></td>
<td><p>ecpl</p></td>
</tr>
<tr class="row-even"><td><p>ExpCutoffPowerLaw3FGLSpectralModel</p></td>
<td><p>ecpl-3fgl</p></td>
</tr>
<tr class="row-odd"><td><p>SuperExpCutoffPowerLaw3FGLSpectralModel</p></td>
<td><p>secpl-3fgl</p></td>
</tr>
<tr class="row-even"><td><p>SuperExpCutoffPowerLaw4FGLSpectralModel</p></td>
<td><p>secpl-4fgl</p></td>
</tr>
<tr class="row-odd"><td><p>LogParabolaSpectralModel</p></td>
<td><p>lp</p></td>
</tr>
<tr class="row-even"><td><p>LogParabolaNormSpectralModel</p></td>
<td><p>lp-norm</p></td>
</tr>
<tr class="row-odd"><td><p>TemplateSpectralModel</p></td>
<td><p>template</p></td>
</tr>
<tr class="row-even"><td><p>GaussianSpectralModel</p></td>
<td><p>gauss</p></td>
</tr>
<tr class="row-odd"><td><p>EBLAbsorbtionNormSpectralModel</p></td>
<td><p>ebl-absorbtion-norm</p></td>
</tr>
<tr class="row-even"><td><p>NaimaSpectralModel</p></td>
<td><p>naima</p></td>
</tr>
<tr class="row-odd"><td><p>ScaleSpectralModel</p></td>
<td><p>scale</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Class Name</p></th>
<th class="head"><p>YAML Tag</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ConstantSpatialModel</p></td>
<td><p>const</p></td>
</tr>
<tr class="row-odd"><td><p>TemplateSpatialModel</p></td>
<td><p>template</p></td>
</tr>
<tr class="row-even"><td><p>GaussianSpatialModel</p></td>
<td><p>gauss</p></td>
</tr>
<tr class="row-odd"><td><p>DiskSpatialModel</p></td>
<td><p>disk</p></td>
</tr>
<tr class="row-even"><td><p>PointSpatialModel</p></td>
<td><p>point</p></td>
</tr>
<tr class="row-odd"><td><p>ShellSpatialModel</p></td>
<td><p>shell</p></td>
</tr>
<tr class="row-even"><td><p>SersicSpatialModel</p></td>
<td><p>sersic</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Class Name</p></th>
<th class="head"><p>YAML Tag</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ConstantTemporalModel</p></td>
<td><p>const</p></td>
</tr>
<tr class="row-odd"><td><p>LightCurveTemplateTemporalModel</p></td>
<td><p>template</p></td>
</tr>
<tr class="row-even"><td><p>GaussianTemporalModel</p></td>
<td><p>gauss</p></td>
</tr>
<tr class="row-odd"><td><p>ExpDecayTemporalModel</p></td>
<td><p>exp-decay</p></td>
</tr>
</tbody>
</table>
</div>
<p>To simplify the interactive model creation we propose to introduce:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gammapy.modeling.models</span> <span class="kn">import</span> <span class="n">SkyModel</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">SkyModel</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">spectral_type</span><span class="o">=</span><span class="s2">&quot;pl&quot;</span><span class="p">,</span>
            <span class="n">spectral_pars</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span>
            <span class="n">spatial_type</span><span class="o">=</span><span class="s2">&quot;gauss&quot;</span><span class="p">,</span>
            <span class="n">spatial_pars</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;sigma&quot;</span><span class="p">:</span> <span class="s2">&quot;0.1 deg&quot;</span><span class="p">},</span>
            <span class="n">temporal_type</span><span class="o">=</span><span class="s2">&quot;const&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>In addition the <code class="docutils literal notranslate"><span class="pre">Model.create()</span></code> factory function should be
adapted to:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gammapy.modeling.models</span> <span class="kn">import</span> <span class="n">Model</span>

<span class="n">pwl</span> <span class="o">=</span> <span class="n">Model</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">tag</span><span class="o">=</span><span class="s2">&quot;gauss&quot;</span><span class="p">,</span> <span class="n">model_type</span><span class="o">=</span><span class="s2">&quot;spectral&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">pars</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="simplify-yaml-parameter-representation">
<h4>Simplify YAML Parameter Representation<a class="headerlink" href="#simplify-yaml-parameter-representation" title="Link to this heading">#</a></h4>
<p>To further simplify the structure of the YAML file we propose to remove parameter
properties if they are equivalent to the default values. The current representation
looks like:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">spectral</span><span class="p">:</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">PowerLawSpectralModel</span>
    <span class="n">parameters</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">index</span>
      <span class="n">value</span><span class="p">:</span> <span class="mf">2.0</span>
      <span class="n">unit</span><span class="p">:</span> <span class="s1">&#39;&#39;</span>
      <span class="nb">min</span><span class="p">:</span> <span class="o">.</span><span class="n">nan</span>
      <span class="nb">max</span><span class="p">:</span> <span class="o">.</span><span class="n">nan</span>
      <span class="n">frozen</span><span class="p">:</span> <span class="n">false</span>
      <span class="n">error</span><span class="p">:</span> <span class="mi">0</span>
    <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">amplitude</span>
      <span class="n">value</span><span class="p">:</span> <span class="mf">1.0e-12</span>
      <span class="n">unit</span><span class="p">:</span> <span class="n">cm</span><span class="o">-</span><span class="mi">2</span> <span class="n">s</span><span class="o">-</span><span class="mi">1</span> <span class="n">TeV</span><span class="o">-</span><span class="mi">1</span>
      <span class="nb">min</span><span class="p">:</span> <span class="o">.</span><span class="n">nan</span>
      <span class="nb">max</span><span class="p">:</span> <span class="o">.</span><span class="n">nan</span>
      <span class="n">frozen</span><span class="p">:</span> <span class="n">false</span>
      <span class="n">error</span><span class="p">:</span> <span class="mi">0</span>
    <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">reference</span>
      <span class="n">value</span><span class="p">:</span> <span class="mf">1.0</span>
      <span class="n">unit</span><span class="p">:</span> <span class="n">TeV</span>
      <span class="nb">min</span><span class="p">:</span> <span class="o">.</span><span class="n">nan</span>
      <span class="nb">max</span><span class="p">:</span> <span class="o">.</span><span class="n">nan</span>
      <span class="n">frozen</span><span class="p">:</span> <span class="n">true</span>
      <span class="n">error</span><span class="p">:</span> <span class="mi">0</span>
</pre></div>
</div>
<p>After the simplification:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">spectral</span><span class="p">:</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">PowerLawSpectralModel</span>
    <span class="n">parameters</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">index</span>
      <span class="n">value</span><span class="p">:</span> <span class="mf">2.0</span>
    <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">amplitude</span>
      <span class="n">value</span><span class="p">:</span> <span class="mf">1.0e-12</span>
      <span class="n">unit</span><span class="p">:</span> <span class="n">cm</span><span class="o">-</span><span class="mi">2</span> <span class="n">s</span><span class="o">-</span><span class="mi">1</span> <span class="n">TeV</span><span class="o">-</span><span class="mi">1</span>
    <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">reference</span>
      <span class="n">value</span><span class="p">:</span> <span class="mf">1.0</span>
      <span class="n">unit</span><span class="p">:</span> <span class="n">TeV</span>
      <span class="n">frozen</span><span class="p">:</span> <span class="n">true</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="decision">
<h2>Decision<a class="headerlink" href="#decision" title="Link to this heading">#</a></h2>
<p>This PIG received feedback in form of comments to the PR <a class="reference external" href="https://github.com/gammapy/gammapy/pull/2944">GH 2944</a> and via private
Slack messages to the authors. Most concerns were raised against the introduction
of <code class="xref py py-obj docutils literal notranslate"><span class="pre">NormSpectralModels</span></code>. In a following discussion among the lead developers
it was decided to stick with the proposal, but keep the abstraction of <code class="xref py py-obj docutils literal notranslate"><span class="pre">SkyDiffuseCube</span></code>
to avoid the case, where a spatial model carries the flux information.
A final review announced on the Gammapy and CC mailing list did not yield
any additional comments. Therefore the PIG was accepted on July 31, 2020.</p>
</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#abstract">Abstract</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#proposal">Proposal</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#spectral-norm-models">Spectral Norm Models</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#energy-dependent-spatial-models">Energy Dependent Spatial Models</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#spectral-absorption-model">Spectral Absorption Model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#additional-models">Additional Models</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#simplify-yaml-representation">Simplify YAML Representation</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#introduce-shorter-yaml-alias-tags">Introduce Shorter YAML Alias Tags</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#simplify-yaml-parameter-representation">Simplify YAML Parameter Representation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#decision">Decision</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../../_sources/development/pigs/pig-021.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024, The Gammapy developers.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
    
     <a href="https://gammapy.org/DataPrivacy.html">Data Privacy.</a>
</div>
      
    </div>
  
  
    <div class="footer-items__center">
      
        <div class="footer-item"><p class="last-updated">
  Last updated on 26 Nov 2024.
  <br/>
</p></div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    <br/>
  </p>
</div>
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.0.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>