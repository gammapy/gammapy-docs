
<!DOCTYPE html>


<html lang="en" data-content_root="../../" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>PIG 28 - Gammapy version 2.0 Roadmap &#8212; gammapy vX.Y.Z</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=35abb870" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=1f75dfce"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=30646c52"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'development/pigs/pig-028';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://docs.gammapy.org/stable/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'dev';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
    <script src="../../_static/matomo.js?v=52704cab"></script>
    <link rel="canonical" href="https://docs.gammapy.org/stable/development/pigs/pig-028.html" />
    <link rel="icon" href="../../_static/gammapy_logo.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Release notes" href="../../release-notes/index.html" />
    <link rel="prev" title="PIG 27 - Bayesian Inference using Nested Sampling" href="pig-027.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="2.0.dev1872+gf92f594e8" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
    
    <img src="../../_static/gammapy_logo.png" class="logo__image only-light" alt="gammapy vX.Y.Z - Home"/>
    <img src="../../_static/gammapy_logo.png" class="logo__image only-dark pst-js-only" alt="gammapy vX.Y.Z - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../getting-started/index.html">
    Getting started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../user-guide/index.html">
    User guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../tutorials/index.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../api-reference/index.html">
    API reference
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    Developer guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../release-notes/index.html">
    Release notes
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/gammapy/gammapy" title="Github" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github-square fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Github</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://gammapy.slack.com/" title="Slack" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-slack fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Slack</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../getting-started/index.html">
    Getting started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../user-guide/index.html">
    User guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../tutorials/index.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../api-reference/index.html">
    API reference
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    Developer guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../release-notes/index.html">
    Release notes
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/gammapy/gammapy" title="Github" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github-square fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Github</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://gammapy.slack.com/" title="Slack" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-slack fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Slack</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../setup.html">Project setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dependencies.html">Dependencies</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">How to contribute to Gammapy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">How to make a Gammapy release</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../doc_howto.html">Documentation How To</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_howto.html">Developer How To</a></li>
</ul>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">PIGs</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="pig-001.html">PIG 1 - PIG purpose and guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-002.html">PIG 2 - Organization of low level analysis code</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-003.html">PIG 3 - Plan for dropping Python 2.7 support</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-004.html">PIG 4 - Setup for tutorial notebooks and data</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-005.html">PIG 5 - Gammapy 1.0 roadmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-006.html">PIG 6 - CTA observation handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-007.html">PIG 7 - Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-008.html">PIG 8 - Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-009.html">PIG 9 - Event sampling</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-010.html">PIG 10 - Regions</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-011.html">PIG 11 - Light curves</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-012.html">PIG 12 - High level interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-013.html">PIG 13 - Gammapy dependencies and distribution</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-014.html">PIG 14 - Uncertainty estimation</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-016.html">PIG 16 - Gammapy package structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-017.html">PIG 17 - Provenance capture</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-018.html">PIG 18 - Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-019.html">PIG 19 - Gammapy package structure follow up</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-020.html">PIG 20 - Global Model API</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-021.html">PIG 21 - Models improvements</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-022.html">PIG 22 - Unified flux estimators API</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-023.html">PIG 23 - Gammapy release cycle and version numbering</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-024.html">PIG 24 - Authorship policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-025.html">PIG 25 - Metadata container for Gammapy</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-026.html">PIG 26 - Model Priors API</a></li>
<li class="toctree-l2"><a class="reference internal" href="pig-027.html">PIG 27 - Bayesian Inference using Nested Sampling</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">PIG 28 - Gammapy version 2.0 Roadmap</a></li>
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">Developer guide</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">PIGs</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">PIG 28 - Gammapy version 2.0 Roadmap</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <p>. include:: ../../references.txt</p>
<section id="pig-28-gammapy-version-2-0-roadmap">
<span id="pig-028"></span><h1>PIG 28 - Gammapy version 2.0 Roadmap<a class="headerlink" href="#pig-28-gammapy-version-2-0-roadmap" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Author: Axel Donath, Bruno Khélifi, Régis Terrier and others</p></li>
<li><p>Created: March 20th, 2023</p></li>
<li><p>Accepted: withdrawn on May 23rd, 2025</p></li>
<li><p>Status: Withdrawn</p></li>
<li><p>Discussion: <a class="reference external" href="https://github.com/gammapy/gammapy/pull/4388">GH 4388</a></p></li>
</ul>
<section id="abstract">
<h2>Abstract<a class="headerlink" href="#abstract" title="Link to this heading">#</a></h2>
<p>The second Long Term Stable (LTS) release of Gammapy will take place at the end of
2024. This PIG discusses the main area of development that are foreseen for
the v2.0 and proposes some prioritization of the effort and plausible milestones
for the intermediate feature releases expected (v1.x).</p>
<p>This document first describes a number of general use cases that should be made
possible with Gammapy. It then describes specific projects and changes to be made
to the library to support such use cases and further improvements.</p>
<p>Several specific aspects and projects are discussed in their specific PIGs (e.g.
unbinned analysis in <a class="reference external" href="https://github.com/gammapy/gammapy/pull/4253">GH 4253</a> or priors and likelihood in <a class="reference external" href="https://github.com/gammapy/gammapy/pull/4381">GH 4381</a>).</p>
</section>
<section id="use-cases-to-support">
<h2>Use cases to support<a class="headerlink" href="#use-cases-to-support" title="Link to this heading">#</a></h2>
<p>This section describes new use cases that we would like to see supported in future
versions of Gammapy.</p>
<section id="event-type-handling">
<h3>Event type handling<a class="headerlink" href="#event-type-handling" title="Link to this heading">#</a></h3>
<p>Starting from a datastore containing events lists and IRFs with types and classes of events,
the user produces of a list of datasets per event type or class. Meta informations of
the datasets allow for complex types handling at modeling/fitting step (e.g. joint fit
of A &amp; B type, stack all type together etc).</p>
</section>
<section id="manipulation-and-selection-of-datasets">
<h3>Manipulation and selection of Datasets<a class="headerlink" href="#manipulation-and-selection-of-datasets" title="Link to this heading">#</a></h3>
<p>After data reduction in a list of spectrum datasets, the user wants to stack spectra obtained
in observation in given bands of zenith angle. The metadata information stored on the datasets
allows complex manipulation at modeling/fitting step.</p>
</section>
<section id="unbinned-spectral-or-3d-analysis">
<h3>Unbinned spectral or 3D analysis<a class="headerlink" href="#unbinned-spectral-or-3d-analysis" title="Link to this heading">#</a></h3>
<p>The user produces a dataset with reprojected IRFs and a list of events and performs model
fitting and parameter estimation computing likelihoods of individual events.</p>
</section>
<section id="source-detection">
<h3>Source detection<a class="headerlink" href="#source-detection" title="Link to this heading">#</a></h3>
<p>After creating a MapDataset, a user extracts a list of source candidate positions and fluxes
with associated errors and estimated significance. The list can be used as input for model
fitting at later steps.</p>
</section>
<section id="transient-source-detection">
<h3>Transient source detection<a class="headerlink" href="#transient-source-detection" title="Link to this heading">#</a></h3>
<p>The user wants to search for unknown transient sources in a given observation or set of
observations.</p>
<p>The user wants to find flares in the long term light curve of a variable source or to
study source variability on various temporal scales. A number of standard quantities
such as excess variance, flux doubling time scale can be extracted from datasets
or lightcurves products.</p>
</section>
<section id="pulsed-signal-search">
<h3>Pulsed signal search<a class="headerlink" href="#pulsed-signal-search" title="Link to this heading">#</a></h3>
<p>Using a specific timing solution for a given pulsar, the user builds a phasogram of the data
and can evaluate the significance of a pulsed signal vs flat background. PSF weighted
phasograms could also be produced to increase the sensitivity. A map per phase bin
can be produced. Spectral analysis per phase bin should be easy to perform, with either
background model or off counts measurements.</p>
</section>
<section id="spectral-unfolding">
<h3>Spectral unfolding<a class="headerlink" href="#spectral-unfolding" title="Link to this heading">#</a></h3>
<p>The user wants to extract the intrinsic source spectrum with minimal hypothesis on the shape
(mostly with a regularity criterion).</p>
</section>
<section id="morphology-estimation">
<h3>Morphology estimation<a class="headerlink" href="#morphology-estimation" title="Link to this heading">#</a></h3>
<p>An estimator API allows the user to test the model morphology parameters: extension profile
and associated significance, position error contours. Applying it per energy bands allows
testing for energy dependent morphology.</p>
</section>
<section id="handling-systematic-effects">
<h3>Handling systematic effects<a class="headerlink" href="#handling-systematic-effects" title="Link to this heading">#</a></h3>
<p>The user wants to add a systematic effect of given amplitude on a reduced dataset
IRFs (e.g. a bias in the absolute energy scale, or a possible broadening of the PSF)
to allow quantifying its impact on a measurement. Specific models for such IRFs
uncertainties could be defined on any dataset.</p>
</section>
<section id="nuisance-parameters-and-priors">
<h3>Nuisance parameters and priors<a class="headerlink" href="#nuisance-parameters-and-priors" title="Link to this heading">#</a></h3>
<p>The user wants to add a systematic effect of unknown amplitude (e.g. a bias in the absolute
energy scale) and wants to estimate the impact of this effect on the parameter estimation
assuming a prior distribution of the nuisance parameter.</p>
</section>
</section>
<section id="specific-projects">
<h2>Specific Projects<a class="headerlink" href="#specific-projects" title="Link to this heading">#</a></h2>
<p>Here we list specific projects</p>
<section id="configurable-api">
<h3>Configurable API<a class="headerlink" href="#configurable-api" title="Link to this heading">#</a></h3>
<p>To provide safety w.r.t. class instantiations and to allow for an easily configurable API,
the main Gammapy API classes should be directly configurable.</p>
<p>This is a generic problem that could be tackled using a similar approach as ctapipe
Pydantic and its <code class="docutils literal notranslate"><span class="pre">BaseModel</span></code> class seems to be a widely used solution. This is already
used in the v1.0 <code class="docutils literal notranslate"><span class="pre">AnalysisConfig</span></code>.</p>
</section>
<section id="gammapy-maps">
<h3>Gammapy Maps<a class="headerlink" href="#gammapy-maps" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">gammapy.maps</span></code> is one of the biggest element in gammapy which requires expertise
and dedication to properly maintain. It is also one the subpackage that has potentially
the largest impact outside the gamma-ray community. If we find a few contributors from
outside, it might be worth splitting out <code class="docutils literal notranslate"><span class="pre">gammapy.maps</span></code> as an independent package. This
is of course a very long term perspective, beyond v2.0.</p>
<section id="proposed-minor-changes">
<h4>Proposed minor changes<a class="headerlink" href="#proposed-minor-changes" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Improve the user interface to <code class="docutils literal notranslate"><span class="pre">Map</span></code>. In particular, better protect and
improve the documentation of <code class="docutils literal notranslate"><span class="pre">Map.create()</span></code> <code class="docutils literal notranslate"><span class="pre">MapGeom.create()</span></code> and constructors.
Improve the handling of <code class="docutils literal notranslate"><span class="pre">MapCoord</span></code> to ease slice extraction.</p></li>
<li><p>RegionGeom could support sizes changing with axis.
This would handle energy dependent region sizes as well as (See <a class="reference external" href="https://github.com/gammapy/gammapy/issues/3863">GH 3863</a>).</p></li>
<li><p>The serialization code is complex and will become hard to maintain when new formats
are introduced, see e.g. for <code class="docutils literal notranslate"><span class="pre">MapAxis</span></code>. Some clean-up and refactoring is necessary
here.</p></li>
</ul>
</section>
<section id="possible-major-changes">
<h4>Possible major changes<a class="headerlink" href="#possible-major-changes" title="Link to this heading">#</a></h4>
<p>We discuss here some aspects that should be explored.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">IRF</span></code> and <code class="docutils literal notranslate"><span class="pre">Map</span></code> share a similar data model. A N-dimensional <code class="docutils literal notranslate"><span class="pre">Quantity</span></code> with a
<code class="docutils literal notranslate"><span class="pre">MapAxes</span></code> and an interpolator. In addition, <code class="docutils literal notranslate"><span class="pre">Maps</span></code> use the <code class="docutils literal notranslate"><span class="pre">Geom</span></code> object to
represent the spherical coordinates.</p>
<ul>
<li><p>Having a common data structure could help make maps fully re-usable for IRFs.
This might be a common use case with pyirf.</p></li>
<li><p>One could allow <code class="docutils literal notranslate"><span class="pre">Maps</span></code> and <code class="docutils literal notranslate"><span class="pre">MapCoord</span></code> objects without spatial axes.
Introducing specialized spatial axes such as <code class="xref py py-obj docutils literal notranslate"><span class="pre">WcsMapAxis</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">RegionMapAxis</span></code> or
<code class="xref py py-obj docutils literal notranslate"><span class="pre">HpxMapAxis</span></code> could allow avoiding using <code class="docutils literal notranslate"><span class="pre">Geom</span></code> objects.</p></li>
<li><p>The evaluation of the feasibility will require some detailed prototyping.
Such a major change would probably be possible at best only when releasing v2.0.
Having a prototype at this timescale would be nice.</p></li>
</ul>
</li>
<li><p>Migrate from the healpy dependency to using <a class="github reference external" href="https://github.com/astropy/astropy-healpix">astropy/astropy-healpix</a>
or <a class="github reference external" href="https://github.com/cds-astro/cds-healpix-python">cds-astro/cds-healpix-python</a>. Another option could be to interface
multi resolution HPX maps: <a class="reference external" href="https://mhealpy.readthedocs.io">https://mhealpy.readthedocs.io</a> ?</p></li>
</ul>
</section>
</section>
<section id="data-model-and-data-formats">
<h3>Data model and data formats<a class="headerlink" href="#data-model-and-data-formats" title="Link to this heading">#</a></h3>
<p>As of v1.0, Gammapy’s internal DL3 data structures are very deeply intertwined with
the GADF specification. Astropy table are read from GADF compliant FITS files and stored as is.
Part of the information being stored in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">table.meta</span></code>.</p>
<p>This is problematic for the following reasons:
- This prevents the support of multiple formats, since the internal data structure
is tied to one specific format.
- Data is not in the optimal in-memory representation. For instance, times should be
stored as astropy.time.Time instances, and coodinates as <code class="xref py py-obj docutils literal notranslate"><span class="pre">SkyCoord</span></code>.
- Data is not validated on input. Errors can happen deep into the code for something
that could have been caught on input file reading or object creation.
- Writing data out is harder</p>
<p>We should:</p>
<ul class="simple">
<li><p>define the internal data model, via the corresponding data classes (EventList, IRFs, etc. )
and introduce a validation mechanism on input.</p></li>
<li><p>build a clear IO boundary between internal and external data representations that supports
various versions of various formats.</p></li>
<li><p>define a metadata structure</p></li>
</ul>
<section id="clarify-internal-gammapy-dl3-data-model">
<h4>Clarify internal Gammapy DL3 data model<a class="headerlink" href="#clarify-internal-gammapy-dl3-data-model" title="Link to this heading">#</a></h4>
<p>Each DL3 object should have its <code class="xref py py-obj docutils literal notranslate"><span class="pre">validate()</span></code> method called on init.</p>
<p>See also the general discussion in <a class="reference external" href="https://github.com/gammapy/gammapy/issues/3767">GH 3767</a> . The specific subparts are discussed in
<a class="reference external" href="https://github.com/gammapy/gammapy/issues/4238">GH 4238</a>, <a class="reference external" href="https://github.com/gammapy/gammapy/issues/4239">GH 4239</a>, <a class="reference external" href="https://github.com/gammapy/gammapy/issues/4240">GH 4240</a> and <a class="reference external" href="https://github.com/gammapy/gammapy/issues/4241">GH 4241</a>.</p>
</section>
<section id="version-support-for-i-o">
<h4>Version Support for I/O<a class="headerlink" href="#version-support-for-i-o" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Use ASDF (<a class="reference external" href="https://asdf.readthedocs.io/">https://asdf.readthedocs.io/</a>) as default serialization format?</p></li>
<li><p>Add I/O registry system for IRFs, Datasets and Maps</p></li>
<li><p>Supporting versions of formats</p></li>
<li><p>Get rid of code like: <a class="github reference external" href="https://github.com/gammapy/gammapy/blob/main/gammapy/maps/axes.py#L1220">gammapy/gammapy</a></p></li>
<li><p>Change to something like consistently: <a class="github reference external" href="https://github.com/gammapy/gammapy/blob/main/gammapy/datasets/io.py">gammapy/gammapy</a></p></li>
</ul>
</section>
<section id="meta-data-handling">
<h4>Meta Data Handling<a class="headerlink" href="#meta-data-handling" title="Link to this heading">#</a></h4>
<p>A metadata class structure specific for Gammapy should be designed and implemented.
It should allow complex types (e.g. <code class="xref py py-obj docutils literal notranslate"><span class="pre">SkyCoord</span></code> or even <code class="xref py py-obj docutils literal notranslate"><span class="pre">Map</span></code>), it should validate
its content, allow hierarchical structure (i.e. a metadata object should be able
to contain another one). Once defined, specific classes such as <code class="xref py py-obj docutils literal notranslate"><span class="pre">IRFMetaData</span></code>,
<code class="xref py py-obj docutils literal notranslate"><span class="pre">DatasetMetaData</span></code>, or <code class="xref py py-obj docutils literal notranslate"><span class="pre">ObservationMetaData</span></code> classes can be introduced with
their separate serialization and validation. This is discussed in PIG 25 which
proposes to handle <code class="xref py py-obj docutils literal notranslate"><span class="pre">MetaData</span></code> with pydantic which allows defining hierarchical
structures and being able to validate those. See <a class="reference external" href="https://github.com/gammapy/gammapy/pull/4491">GH 4491</a></p>
<p>Once this is defined a second question must be tackled: the metadata model:
what is meta data / and what is data and where to draw the line.</p>
</section>
</section>
<section id="estimators">
<h3>Estimators<a class="headerlink" href="#estimators" title="Link to this heading">#</a></h3>
<p>The sensitivity of given <code class="docutils literal notranslate"><span class="pre">Datasets</span></code> for an estimates quantity should be provided by <code class="docutils literal notranslate"><span class="pre">Estimators</span></code> in
particular for flux. Flux maps estimators should provide sensitivity maps and flux point estimators could
provide the spectral flux sensitivity.</p>
</section>
<section id="documentation">
<h3>Documentation<a class="headerlink" href="#documentation" title="Link to this heading">#</a></h3>
<section id="main-documentation">
<h4>Main documentation<a class="headerlink" href="#main-documentation" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Introduce a deprecation system</p></li>
<li><p>Update pydata-sphinx-theme</p></li>
<li><p>More detailed</p></li>
<li><p>Use type hints in Gammapy everywhere?</p></li>
</ul>
</section>
<section id="gammapy-recipes-and-additional-ressources">
<h4>Gammapy-recipes and additional ressources<a class="headerlink" href="#gammapy-recipes-and-additional-ressources" title="Link to this heading">#</a></h4>
<p>The Gammapy-recipes gallery offers a nice additional source of tutorials for advanced or non
standard use cases.</p>
<p>Several questions should be solved for the long term viability of such a repository:
e.g. should the recipes be updated to e.g. the latest LTS? Currently, none of the existing recipes
work with v1.0.</p>
<p>How to keep track and refer to material designed for hands-on sessions, schools etc?
Currently we have one GitHub repository: gammapy-handson.</p>
<p>We could also develop tutorial videos.</p>
</section>
</section>
<section id="infrastructure">
<h3>Infrastructure<a class="headerlink" href="#infrastructure" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Improve test coverage and quality.</p></li>
<li><p>Improve our tools helping to the creation of releases</p></li>
<li><p>Creation of Docker images with an automatized tool</p></li>
<li><p>Re-use docker image for Binder, this config here: <a class="github reference external" href="https://github.com/gammapy/gammapy-webpage/tree/v1.0rc1">gammapy/gammapy-webpage</a> already creates docker image in Binder.</p></li>
</ul>
</section>
<section id="distributed-computing-and-performance">
<h3>Distributed Computing and Performance<a class="headerlink" href="#distributed-computing-and-performance" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Evaluate Jax for GPU acceleration and autograd (<a class="reference external" href="https://jax.readthedocs.io/en/latest/">https://jax.readthedocs.io/en/latest/</a> )</p></li>
<li><p>Evaluate Ray for distributed computing (<a class="reference external" href="https://www.ray.io">https://www.ray.io</a> )</p></li>
<li><p>Make Dataset distributable with same API</p></li>
<li><p>Probably rework Dataset API, split off model handling…</p></li>
<li><p>Split off statistic handling from datasets</p></li>
</ul>
</section>
<section id="flexible-statistics-api">
<h3>Flexible Statistics API<a class="headerlink" href="#flexible-statistics-api" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Support for priors in likelihood</p></li>
<li><p>Support for systematics terms in likelihood</p></li>
<li><p>Needs to be serialised, i.e. keep information on which statistics and priors haven been used (meta data / provenance)</p></li>
<li><p>Split of statistics definition from datasets…</p></li>
<li><p>Support for statistical test associated with periodic signals, in the frequency domain</p></li>
<li><p>Add more tests on model hypothesis? E.g. AIC, PS (<a class="reference external" href="https://arxiv.org/abs/2109.07443">https://arxiv.org/abs/2109.07443</a>)</p></li>
<li><p>Add likelihood weights?</p></li>
</ul>
</section>
<section id="models-and-modeling">
<h3>Models and Modeling<a class="headerlink" href="#models-and-modeling" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Move amplitude parameter to <code class="xref py py-obj docutils literal notranslate"><span class="pre">SkyModel</span></code></p></li>
<li><p>Rely more on the <code class="xref py py-obj docutils literal notranslate"><span class="pre">SkyModel</span></code> then the submodels</p></li>
<li><p>What about <code class="xref py py-obj docutils literal notranslate"><span class="pre">NPredModel</span></code>, deprecate or introduce consistently as concept?</p></li>
<li><p>Adjustment of theory-based abaques as spatial/spectral model ? (random axis as parameters, interpolation features during evaluation, definition of a ‘format’)</p></li>
<li><p>Formats for energy dependent temporal models</p></li>
<li><p>How to handle the handle the FitResult object? Make this more important? Make it serialisable? Rely on it in later API, such as Estimators?</p></li>
</ul>
</section>
</section>
<section id="decision">
<h2>Decision<a class="headerlink" href="#decision" title="Link to this heading">#</a></h2>
<p>The PIG discussion has stalled. The roadmap reparation process was not very well organized. This should be improved
for the next development round.</p>
<p>A number of features discussed in the current draft have been implemented. Some of the use cases are supported but
work remains to be done for several. Many decisions and major changes have been postponed</p>
</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#abstract">Abstract</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#use-cases-to-support">Use cases to support</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#event-type-handling">Event type handling</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#manipulation-and-selection-of-datasets">Manipulation and selection of Datasets</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#unbinned-spectral-or-3d-analysis">Unbinned spectral or 3D analysis</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#source-detection">Source detection</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#transient-source-detection">Transient source detection</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pulsed-signal-search">Pulsed signal search</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#spectral-unfolding">Spectral unfolding</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#morphology-estimation">Morphology estimation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#handling-systematic-effects">Handling systematic effects</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#nuisance-parameters-and-priors">Nuisance parameters and priors</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#specific-projects">Specific Projects</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#configurable-api">Configurable API</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gammapy-maps">Gammapy Maps</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#proposed-minor-changes">Proposed minor changes</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#possible-major-changes">Possible major changes</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-model-and-data-formats">Data model and data formats</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#clarify-internal-gammapy-dl3-data-model">Clarify internal Gammapy DL3 data model</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#version-support-for-i-o">Version Support for I/O</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#meta-data-handling">Meta Data Handling</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#estimators">Estimators</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#documentation">Documentation</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#main-documentation">Main documentation</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gammapy-recipes-and-additional-ressources">Gammapy-recipes and additional ressources</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#infrastructure">Infrastructure</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#distributed-computing-and-performance">Distributed Computing and Performance</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#flexible-statistics-api">Flexible Statistics API</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#models-and-modeling">Models and Modeling</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#decision">Decision</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/development/pigs/pig-028.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, The Gammapy developers.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
    
    <p>Licensed under
      <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA</a>.</p>
    <p>Examples, recipes, and other code licensed under
      <a href="https://opensource.org/license/BSD-3-Clause>" target="_blank">BSD 3-Clause "New" or "Revised"</a> license.</p>
    <p>Gammapy <a href="https://gammapy.org/DataPrivacy.html">Data Privacy</a> information.</p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>