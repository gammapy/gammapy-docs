
<!DOCTYPE html>


<html lang="en" data-content_root="../" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>How To &#8212; gammapy vX.Y.Z</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=35abb870" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=1f75dfce"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=30646c52"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user-guide/howto';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://docs.gammapy.org/stable/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'dev';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
    <script src="../_static/matomo.js?v=52704cab"></script>
    <link rel="canonical" href="https://docs.gammapy.org/stable/user-guide/howto.html" />
    <link rel="icon" href="../_static/gammapy_logo.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Model gallery" href="model-gallery/index.html" />
    <link rel="prev" title="Utility functions" href="utils.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="2.0.dev1308+g89c341e2c" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
    
    <img src="../_static/gammapy_logo.png" class="logo__image only-light" alt="gammapy vX.Y.Z - Home"/>
    <img src="../_static/gammapy_logo.png" class="logo__image only-dark pst-js-only" alt="gammapy vX.Y.Z - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../getting-started/index.html">
    Getting started
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    User guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../tutorials/index.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api-reference/index.html">
    API reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../development/index.html">
    Developer guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../release-notes/index.html">
    Release notes
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/gammapy/gammapy" title="Github" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github-square fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Github</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://gammapy.slack.com/" title="Slack" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-slack fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Slack</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../getting-started/index.html">
    Getting started
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    User guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../tutorials/index.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api-reference/index.html">
    API reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../development/index.html">
    Developer guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../release-notes/index.html">
    Release notes
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/gammapy/gammapy" title="Github" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github-square fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Github</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://gammapy.slack.com/" title="Slack" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-slack fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Slack</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="package.html">Fundamental Concepts: Gammapy analysis workflow and package structure</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="dl3.html">Data access and selection (DL3)</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="irf/index.html">Instrument Response Functions (DL3)</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="irf/aeff.html">Effective area</a></li>
<li class="toctree-l3"><a class="reference internal" href="irf/bkg.html">Background</a></li>
<li class="toctree-l3"><a class="reference internal" href="irf/edisp.html">Energy Dispersion</a></li>
<li class="toctree-l3"><a class="reference internal" href="irf/psf.html">Point Spread Function</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="makers/index.html">Data reduction (DL3 to DL4)</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="makers/fov.html">FoV background</a></li>
<li class="toctree-l3"><a class="reference internal" href="makers/reflected.html">Reflected regions background</a></li>
<li class="toctree-l3"><a class="reference internal" href="makers/ring.html">Ring background</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="maps/index.html">Sky maps (DL4)</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="maps/hpxmap.html">HEALPix-based maps</a></li>
<li class="toctree-l3"><a class="reference internal" href="maps/regionmap.html">RegionGeom and RegionNDMap</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="datasets/index.html">Datasets (DL4)</a></li>
<li class="toctree-l2"><a class="reference internal" href="modeling.html">Modeling and Fitting (DL4 to DL5)</a></li>
<li class="toctree-l2"><a class="reference internal" href="estimators.html">Estimators (DL4 to DL5, and DL6)</a></li>
<li class="toctree-l2"><a class="reference internal" href="hli.html">High Level Analysis Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="scripts/index.html">Command line tools</a></li>



<li class="toctree-l2"><a class="reference internal" href="catalog.html">Source catalogs</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="astro/index.html">Astrophysics</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="astro/source/index.html">Astrophysical source models</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="astro/source/snr.html">Supernova Remnant Models</a></li>
<li class="toctree-l4"><a class="reference internal" href="astro/source/pwn.html">Pulsar Wind Nebula Source Models</a></li>
<li class="toctree-l4"><a class="reference internal" href="astro/source/pulsar.html">Pulsar Source Models</a></li>
</ul>
</details></li>
<li class="toctree-l3"><a class="reference internal" href="astro/population/index.html">Astrophysical source population models</a></li>
<li class="toctree-l3"><a class="reference internal" href="astro/darkmatter/index.html">Dark matter</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="stats/index.html">Statistics in Gammapy</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="stats/fit_statistics.html">Fit statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="stats/wstat_derivation.html">Derivation of the WStat formula</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="visualization/index.html">Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">Utility functions</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">How To</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="model-gallery/index.html">Model gallery</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="model-gallery/spatial/index.html">Spatial models</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spatial/plot_constant.html">Constant spatial model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spatial/plot_shell.html">Shell spatial model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spatial/plot_gauss.html">Gaussian spatial model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spatial/plot_piecewise_norm_spatial.html">Piecewise norm spatial model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spatial/plot_gen_gauss.html">Generalized gaussian spatial model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spatial/plot_shell2.html">Shell2 spatial model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spatial/plot_point.html">Point spatial model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spatial/plot_template.html">Template spatial model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spatial/plot_disk.html">Disk spatial model</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="model-gallery/spectral/index.html">Spectral models</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spectral/plot_exp_cutoff_powerlaw_3fgl.html">Exponential cutoff power law spectral model used for 3FGL</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spectral/plot_smooth_broken_powerlaw.html">Smooth broken power law spectral model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spectral/plot_exp_cutoff_powerlaw.html">Exponential cutoff power law spectral model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spectral/plot_gauss_spectral.html">Gaussian spectral model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spectral/plot_naima.html">Naima spectral model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spectral/plot_logparabola_norm_spectral.html">Log parabola spectral norm model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spectral/plot_powerlaw_norm_spectral.html">Power law norm spectral model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spectral/plot_absorbed.html">EBL absorption spectral model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spectral/plot_constant_spectral.html">Constant spectral model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spectral/plot_powerlaw2.html">Power law 2 spectral model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spectral/plot_super_exp_cutoff_powerlaw_4fgl_dr1.html">Super Exponential Cutoff Power Law Model used for 4FGL-DR1 (and DR2)</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spectral/plot_compound.html">Compound spectral model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spectral/plot_piecewise_norm_spectral.html">Piecewise  norm spectral model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spectral/plot_logparabola.html">Log parabola spectral model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spectral/plot_exp_cutoff_powerlaw_norm_spectral.html">Exponential cutoff power law norm spectral model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spectral/plot_broken_powerlaw.html">Broken power law spectral model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spectral/plot_template_spectral.html">Template spectral model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spectral/plot_super_exp_cutoff_powerlaw_3fgl.html">Super exponential cutoff power law model used for 3FGL</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spectral/plot_super_exp_cutoff_powerlaw_4fgl.html">Super Exponential Cutoff Power Law Model used for 4FGL-DR3</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/spectral/plot_powerlaw.html">Power law spectral model</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="model-gallery/temporal/index.html">Temporal models</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/temporal/plot_template_phase_temporal.html">Phase curve temporal model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/temporal/plot_linear_temporal.html">Linear temporal model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/temporal/plot_sine_temporal.html">Sine temporal model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/temporal/plot_generalized_gaussian_temporal.html">Generalized Gaussian temporal model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/temporal/plot_constant_temporal.html">Constant temporal model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/temporal/plot_expdecay_temporal.html">ExpDecay temporal model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/temporal/plot_gaussian_temporal.html">Gaussian temporal model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/temporal/plot_powerlaw_temporal.html">PowerLaw temporal model</a></li>
<li class="toctree-l3"><a class="reference internal" href="model-gallery/temporal/plot_template_temporal.html">Light curve temporal model</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference external" href="https://gammapy.github.io/gammapy-recipes">Gammapy recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">Glossary and references</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">User guide</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">How To</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="how-to">
<span id="id1"></span><h1>How To<a class="headerlink" href="#how-to" title="Link to this heading">#</a></h1>
<p>This page contains short “how to” or “frequently asked question” entries for
Gammapy. Each entry is for a very specific task, with a short answer, and links
to examples and documentation.</p>
<p>If you’re new to Gammapy, please check the <a class="reference internal" href="../getting-started/index.html#getting-started"><span class="std std-ref">Getting started</span></a> section and
the <a class="reference internal" href="index.html#user-guide"><span class="std std-ref">User guide</span></a> and have a look at the list of <a class="reference internal" href="../tutorials/index.html#tutorials"><span class="std std-ref">Tutorials</span></a>.
The information below is in addition to those pages, it’s not a complete list of
how to do everything in Gammapy.</p>
<p>Please give feedback and suggest additions to this page!</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Spell and pronounce Gammapy</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">The recommended spelling is “Gammapy” as proper name. The recommended
pronunciation is [ɡæməpaɪ] where the syllable “py” is pronounced like
the english word “pie”. You can listen to it <a class="reference external" href="http://ipa-reader.xyz/?text=ˈ%C9%A1æməpaɪ&amp;voice=Amy">here</a>.</p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Select observations</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">The <a class="reference internal" href="../api/gammapy.data.DataStore.html#gammapy.data.DataStore" title="gammapy.data.DataStore"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DataStore</span></code></a> provides access to a summary table of all observations available.
It can be used to select observations with various criterion. You can for instance apply a cone search
or also select observations based on other information available using the
<a class="reference internal" href="../api/gammapy.data.ObservationTable.html#gammapy.data.ObservationTable.select_observations" title="gammapy.data.ObservationTable.select_observations"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_observations</span></code></a> method.</p>
<p class="sd-card-text"><a class="sd-sphinx-override sd-btn sd-text-wrap sd-btn-primary sd-shadow-sm reference external" href="../tutorials/starting/analysis_2.html#defining-the-datastore-and-selecting-observations"><span>To the tutorial…</span></a></p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Make observation duration maps</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">Gammapy offers a number of methods to explore the content of the various IRFs
contained in an observation. This is usually done thanks to their <code class="docutils literal notranslate"><span class="pre">peek()</span></code>
methods.</p>
<p class="sd-card-text"><a class="sd-sphinx-override sd-btn sd-text-wrap sd-btn-primary sd-shadow-sm reference external" href="../tutorials/api/makers.html#observation-duration-and-effective-livetime"><span>To the tutorial…</span></a></p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Group observations</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text"><a class="reference internal" href="../api/gammapy.data.Observations.html#gammapy.data.Observations" title="gammapy.data.Observations"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Observations</span></code></a> can be grouped depending on a number of various quantities.
The two methods to do so are manual grouping and hierarchical clustering. The quantity
you group by can be adjusted according to each science case.</p>
<p class="sd-card-text"><a class="sd-sphinx-override sd-btn sd-text-wrap sd-btn-primary sd-shadow-sm reference external" href="../tutorials/api/observation_clustering.html"><span>To the tutorial…</span></a></p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Make an on-axis equivalent livetime map</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">The <a class="reference internal" href="../api/gammapy.data.DataStore.html#gammapy.data.DataStore" title="gammapy.data.DataStore"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DataStore</span></code></a> provides access to a summary table of all observations available.
It can be used to obtain various quantities from your <a class="reference internal" href="../api/gammapy.data.Observations.html#gammapy.data.Observations" title="gammapy.data.Observations"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Observations</span></code></a> list, such as livetime.
The on-axis equivalent number of observation hours on the source can be calculated.</p>
<p class="sd-card-text"><a class="sd-sphinx-override sd-btn sd-text-wrap sd-btn-primary sd-shadow-sm reference external" href="../tutorials/api/makers.html#observation-duration-and-effective-livetime"><span>To the tutorial…</span></a></p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Compute minimum number of counts of significance per bin</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">The <a class="reference internal" href="../api/gammapy.estimators.utils.resample_energy_edges.html#gammapy.estimators.utils.resample_energy_edges" title="gammapy.estimators.utils.resample_energy_edges"><code class="xref py py-obj docutils literal notranslate"><span class="pre">resample_energy_edges</span></code></a> provides a way to resample the energy bins
to satisfy a minimum number of counts of significance per bin.</p>
<p class="sd-card-text"><a class="sd-sphinx-override sd-btn sd-text-wrap sd-btn-primary sd-shadow-sm reference external" href="../tutorials/analysis-1d/spectral_analysis.html#compute-flux-points"><span>To the tutorial…</span></a></p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Choose units for plotting</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">Units for plotting are handled with a combination of <a class="reference external" href="https://matplotlib.org/stable/index.html#module-matplotlib" title="(in Matplotlib v3.10.3)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">matplotlib</span></code></a> and <a class="reference external" href="https://docs.astropy.org/en/stable/units/ref_api.html#module-astropy.units" title="(in Astropy v7.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.units</span></code></a>.
The methods <code class="xref py py-obj docutils literal notranslate"><span class="pre">ax.xaxis.set_units()</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">ax.yaxis.set_units()</span></code> allow
you to define the x and y axis units using <a class="reference external" href="https://docs.astropy.org/en/stable/units/ref_api.html#module-astropy.units" title="(in Astropy v7.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.units</span></code></a>. Here is a minimal example:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">gammapy.estimators</span><span class="w"> </span><span class="kn">import</span> <span class="n">FluxPoints</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">astropy</span><span class="w"> </span><span class="kn">import</span> <span class="n">units</span> <span class="k">as</span> <span class="n">u</span>

<span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;$GAMMAPY_DATA/hawc_crab/HAWC19_flux_points.fits&quot;</span>
<span class="n">fp</span> <span class="o">=</span> <span class="n">FluxPoints</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_units</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">eV</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_units</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">Unit</span><span class="p">(</span><span class="s2">&quot;erg cm-2 s-1&quot;</span><span class="p">))</span>
<span class="n">fp</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">sed_type</span><span class="o">=</span><span class="s2">&quot;e2dnde&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Compute source significance</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">Estimate the significance of a source, or more generally of an additional model
component (such as e.g. a spectral line on top of a power-law spectrum), is done
via a hypothesis test. You fit two models, with and without the extra source or
component, then use the test statistic values from both fits to compute the
significance or p-value. To obtain the test statistic, call
<code class="xref py py-obj docutils literal notranslate"><span class="pre">stat_sum</span></code> for the model corresponding to your two
hypotheses (or take this value from the print output when running the fit), and
take the difference. Note that in Gammapy, the fit statistic is defined as
<span class="math notranslate nohighlight">\(S = - 2 * log(L)\)</span> for likelihood <span class="math notranslate nohighlight">\(L\)</span>, such that <span class="math notranslate nohighlight">\(TS = S_0 - S_1\)</span>. See
<a class="reference internal" href="datasets/index.html#datasets"><span class="std std-ref">Datasets (DL4)</span></a> for an overview of fit statistics used.</p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Perform data reduction loop with multi-processing</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">There are two ways for the data reduction steps to be implemented. Either a loop is used to
run the full reduction chain, or the reduction is performed with multi-processing tools by
utilising the <a class="reference internal" href="../api/gammapy.makers.DatasetsMaker.html#gammapy.makers.DatasetsMaker" title="gammapy.makers.DatasetsMaker"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DatasetsMaker</span></code></a> to perform the loop internally.</p>
<p class="sd-card-text"><a class="sd-sphinx-override sd-btn sd-text-wrap sd-btn-primary sd-shadow-sm reference external" href="../tutorials/api/makers.html#data-reduction-loop"><span>To the tutorial…</span></a></p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Compute cumulative significance</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">A classical plot in gamma-ray astronomy is the cumulative significance of a
source as a function of observing time. In Gammapy, you can produce it with 1D
(spectral) analysis. Once datasets are produced for a given ON region, you can
access the total statistics with the <code class="docutils literal notranslate"><span class="pre">info_table(cumulative=True)</span></code> method of
<a class="reference internal" href="../api/gammapy.datasets.Datasets.html#gammapy.datasets.Datasets" title="gammapy.datasets.Datasets"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Datasets</span></code></a>.</p>
<p class="sd-card-text"><a class="sd-sphinx-override sd-btn sd-text-wrap sd-btn-primary sd-shadow-sm reference external" href="../tutorials/analysis-1d/spectral_analysis.html#source-statistic"><span>To the tutorial…</span></a></p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Implement a custom model</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">Gammapy allows the flexibility of using user-defined models for analysis.</p>
<p class="sd-card-text"><a class="sd-sphinx-override sd-btn sd-text-wrap sd-btn-primary sd-shadow-sm reference external" href="../tutorials/api/models.html#implementing-a-custom-model"><span>To the tutorial…</span></a></p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Implement energy dependent spatial models</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">While Gammapy does not ship energy dependent spatial models, it is possible to define
such models within the modeling framework.</p>
<p class="sd-card-text"><a class="sd-sphinx-override sd-btn sd-text-wrap sd-btn-primary sd-shadow-sm reference external" href="../tutorials/api/models.html#models-with-energy-dependent-morphology"><span>To the tutorial…</span></a></p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Model astrophysical source spectra</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">It is possible to combine Gammapy with astrophysical modeling codes, if they
provide a Python interface. Usually this requires some glue code to be written,
e.g. <a class="reference internal" href="../api/gammapy.modeling.models.NaimaSpectralModel.html#gammapy.modeling.models.NaimaSpectralModel" title="gammapy.modeling.models.NaimaSpectralModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NaimaSpectralModel</span></code></a> is an example of a Gammapy
wrapper class around the Naima spectral model and radiation classes, which then
allows modeling and fitting of Naima models within Gammapy (e.g. using CTAO,
H.E.S.S. or Fermi-LAT data).</p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Model temporal profiles</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">Temporal models can be directly fit on available lightcurves,
or on the reduced datasets. This is done through a joint fitting of the datasets,
one for each time bin.</p>
<p class="sd-card-text"><a class="sd-sphinx-override sd-btn sd-text-wrap sd-btn-primary sd-shadow-sm reference external" href="../tutorials/analysis-time/light_curve_simulation.html#fitting-temporal-models"><span>To the tutorial…</span></a></p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Improve fit convergence with constraints on the source position</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">It happens that a 3D fit does not converge with warning messages indicating that the
scanned positions of the model are outside the valid IRF map range. The type of warning message is:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">Position</span> <span class="o">&lt;</span><span class="n">SkyCoord</span> <span class="p">(</span><span class="n">ICRS</span><span class="p">):</span> <span class="p">(</span><span class="n">ra</span><span class="p">,</span> <span class="n">dec</span><span class="p">)</span> <span class="ow">in</span> <span class="n">deg</span>
<span class="p">(</span><span class="mf">329.71693826</span><span class="p">,</span> <span class="o">-</span><span class="mf">33.18392464</span><span class="p">)</span><span class="o">&gt;</span> <span class="ow">is</span> <span class="n">outside</span> <span class="n">valid</span> <span class="n">IRF</span> <span class="nb">map</span> <span class="nb">range</span><span class="p">,</span> <span class="n">using</span> <span class="n">nearest</span> <span class="n">IRF</span> <span class="n">defined</span> <span class="n">within</span>
</pre></div>
</div>
<p class="sd-card-text">This issue might happen when the position of a model has no defined range. The minimizer
might scan positions outside the spatial range in which the IRFs are computed and then it gets lost.</p>
<p class="sd-card-text">The simple solution is to add a physically-motivated range on the model’s position, e.g. within
the field of view or around an excess position. Most of the time, this tip solves the issue.
The documentation of the
<a class="reference external" href="https://docs.gammapy.org/1.0/tutorials/api/models.html#modifying-model-parameters">models sub-package</a>
explains how to add a validity range of a model parameter.</p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Reduce memory budget for large datasets</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">When dealing with surveys and large sky regions, the amount of memory required might become
problematic, in particular because of the default settings of the IRF maps stored in the
<a class="reference internal" href="../api/gammapy.datasets.MapDataset.html#gammapy.datasets.MapDataset" title="gammapy.datasets.MapDataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MapDataset</span></code></a> used for the data reduction. Several options can be used to reduce
the required memory:
- Reduce the spatial sampling of the <a class="reference internal" href="../api/gammapy.irf.PSFMap.html#gammapy.irf.PSFMap" title="gammapy.irf.PSFMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PSFMap</span></code></a> and the <a class="reference internal" href="../api/gammapy.irf.EDispKernelMap.html#gammapy.irf.EDispKernelMap" title="gammapy.irf.EDispKernelMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">EDispKernelMap</span></code></a>
using the <code class="xref py py-obj docutils literal notranslate"><span class="pre">binsz_irf</span></code> argument of the <a class="reference internal" href="../api/gammapy.datasets.MapDataset.html#gammapy.datasets.MapDataset.create" title="gammapy.datasets.MapDataset.create"><code class="xref py py-obj docutils literal notranslate"><span class="pre">create</span></code></a> method. This will reduce
the accuracy of the IRF kernels used for model counts predictions.
- Change the default IRFMap axes, in particular the <code class="xref py py-obj docutils literal notranslate"><span class="pre">rad_axis</span></code> argument of <a class="reference internal" href="../api/gammapy.datasets.MapDataset.html#gammapy.datasets.MapDataset.create" title="gammapy.datasets.MapDataset.create"><code class="xref py py-obj docutils literal notranslate"><span class="pre">create</span></code></a>
This axis is used to define the geometry of the <a class="reference internal" href="../api/gammapy.irf.PSFMap.html#gammapy.irf.PSFMap" title="gammapy.irf.PSFMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PSFMap</span></code></a> and controls the distribution of error angles
used to sample the PSF. This will reduce the quality of the PSF description.
- If one or several IRFs are not required for the study at hand, it is possible not to build them
by removing it from the list of options passed to the <a class="reference internal" href="../api/gammapy.makers.MapDatasetMaker.html#gammapy.makers.MapDatasetMaker" title="gammapy.makers.MapDatasetMaker"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MapDatasetMaker</span></code></a>.</p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Copy part of a data store</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">To share specific data from a database, it might be necessary to create a new data storage with
a limited set of observations and summary files following the scheme described in <a class="reference external" href="https://gamma-astro-data-formats.readthedocs.io/">gadf</a>.
This is possible with the method <a class="reference internal" href="../api/gammapy.data.DataStore.html#gammapy.data.DataStore.copy_obs" title="gammapy.data.DataStore.copy_obs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy_obs</span></code></a> provided by the
<a class="reference internal" href="../api/gammapy.data.DataStore.html#gammapy.data.DataStore" title="gammapy.data.DataStore"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DataStore</span></code></a>. It allows to copy individual observations files in a given directory
and build the associated observation and HDU tables.</p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Interpolate onto a different geometry</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">To interpolate maps onto a different geometry use <a class="reference internal" href="../api/gammapy.maps.Map.html#gammapy.maps.Map.interp_to_geom" title="gammapy.maps.Map.interp_to_geom"><code class="xref py py-obj docutils literal notranslate"><span class="pre">interp_to_geom</span></code></a>.</p>
<p class="sd-card-text"><a class="sd-sphinx-override sd-btn sd-text-wrap sd-btn-primary sd-shadow-sm reference external" href="../tutorials/api/maps.html#filling-maps-from-interpolation"><span>To the tutorial…</span></a></p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Suppress warnings</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">In general it is not recommended to suppress warnings from code because they
might point to potential issues or help debugging a non-working script. However
in some cases the cause of the warning is known and the warnings clutter the
logging output. In this case it can be useful to locally suppress a specific
warning like so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">astropy.io.fits.verify</span><span class="w"> </span><span class="kn">import</span> <span class="n">VerifyWarning</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">warnings</span>

<span class="k">with</span> <span class="n">warnings</span><span class="o">.</span><span class="n">catch_warnings</span><span class="p">():</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="n">VerifyWarning</span><span class="p">)</span>
    <span class="c1"># do stuff here</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Avoid NaN results in Flux Point estimation</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">Sometimes, upper limit values may show as <code class="docutils literal notranslate"><span class="pre">nan</span></code> while running a <a class="reference internal" href="../api/gammapy.estimators.FluxPointsEstimator.html#gammapy.estimators.FluxPointsEstimator" title="gammapy.estimators.FluxPointsEstimator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FluxPointsEstimator</span></code></a>
or a <a class="reference internal" href="../api/gammapy.estimators.LightCurveEstimator.html#gammapy.estimators.LightCurveEstimator" title="gammapy.estimators.LightCurveEstimator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LightCurveEstimator</span></code></a>. This often arises because the range of the norm parameter
being scanned over is not sufficient. Increasing this range usually solves the problem. In some cases,
you can also consider configuring the estimator with a different <a class="reference internal" href="../api/gammapy.modeling.Fit.html#gammapy.modeling.Fit" title="gammapy.modeling.Fit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Fit</span></code></a> backend.</p>
<p class="sd-card-text"><a class="sd-sphinx-override sd-btn sd-text-wrap sd-btn-primary sd-shadow-sm reference external" href="../tutorials/api/estimators.html#a-fully-configured-flux-points-estimatio"><span>To the tutorial…</span></a></p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Display a progress bar</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">Gammapy provides the possibility of displaying a
progress bar to monitor the advancement of time-consuming processes. To activate this
functionality, make sure that <code class="xref py py-obj docutils literal notranslate"><span class="pre">tqdm</span></code> is installed and add the following code snippet
to your code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">gammapy.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">pbar</span>
<span class="n">pbar</span><span class="o">.</span><span class="n">SHOW_PROGRESS_BAR</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p class="sd-card-text">The progress bar is available within the following:</p>
<ul class="simple">
<li><p class="sd-card-text"><a class="reference internal" href="../api/gammapy.data.DataStore.html#gammapy.data.DataStore.get_observations" title="gammapy.data.DataStore.get_observations"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_observations</span></code></a> method</p></li>
<li><p class="sd-card-text">The <code class="docutils literal notranslate"><span class="pre">run()</span></code> method from the <code class="docutils literal notranslate"><span class="pre">estimator</span></code> classes: <a class="reference internal" href="../api/gammapy.estimators.ASmoothMapEstimator.html#gammapy.estimators.ASmoothMapEstimator" title="gammapy.estimators.ASmoothMapEstimator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ASmoothMapEstimator</span></code></a>, <a class="reference internal" href="../api/gammapy.estimators.TSMapEstimator.html#gammapy.estimators.TSMapEstimator" title="gammapy.estimators.TSMapEstimator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TSMapEstimator</span></code></a>, <a class="reference internal" href="../api/gammapy.estimators.LightCurveEstimator.html#gammapy.estimators.LightCurveEstimator" title="gammapy.estimators.LightCurveEstimator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LightCurveEstimator</span></code></a></p></li>
<li><p class="sd-card-text"><a class="reference internal" href="../api/gammapy.modeling.Fit.html#gammapy.modeling.Fit.stat_profile" title="gammapy.modeling.Fit.stat_profile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">stat_profile</span></code></a> and <a class="reference internal" href="../api/gammapy.modeling.Fit.html#gammapy.modeling.Fit.stat_surface" title="gammapy.modeling.Fit.stat_surface"><code class="xref py py-obj docutils literal notranslate"><span class="pre">stat_surface</span></code></a> methods</p></li>
<li><p class="sd-card-text"><code class="xref py py-obj docutils literal notranslate"><span class="pre">progress_download</span></code> method</p></li>
<li><p class="sd-card-text"><a class="reference internal" href="../api/gammapy.utils.parallel.run_multiprocessing.html#gammapy.utils.parallel.run_multiprocessing" title="gammapy.utils.parallel.run_multiprocessing"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run_multiprocessing</span></code></a> method</p></li>
</ul>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Change plotting style and color-blind friendly visualizations</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">As the Gammapy visualisations are using the library <a class="reference external" href="https://matplotlib.org/stable/index.html#module-matplotlib" title="(in Matplotlib v3.10.3)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">matplotlib</span></code></a> that provides color styles,
it is possible to change the default colors map of the Gammapy plots. Using using the
<a class="reference external" href="https://matplotlib.org/stable/gallery/style_sheets/style_sheets_reference.html">style sheet of matplotlib</a>,
you should add into your notebooks or scripts the following lines after the Gammapy imports:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.style</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">style</span>
<span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;XXXX&#39;</span><span class="p">)</span>
<span class="c1"># with XXXX from `print(plt.style.available)`</span>
</pre></div>
</div>
<p class="sd-card-text">Note that you can create your own style with matplotlib (see
<a class="reference external" href="https://matplotlib.org/stable/tutorials/introductory/customizing.html">here</a> and
<a class="reference external" href="https://matplotlib.org/stable/tutorials/colors/colormaps.html">here</a>)</p>
<p class="sd-card-text">The CTAO observatory released a document describing best practices for <strong>data
visualisation in a way friendly to color-blind people</strong>:
<a class="reference external" href="https://www.ctao.org/wp-content/uploads/ColourBlindFriendlyPractices_v2_032025.pdf">CTAO document</a>.
To use them, you should add into your notebooks or scripts the following lines after the Gammapy imports:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.style</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">style</span>
<span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;tableau-colorblind10&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p class="sd-card-text">or</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.style</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">style</span>
<span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;seaborn-colorblind&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Add PHASE information to your data</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">To do a pulsar analysis, one must compute the pulsar phase of
each event and put this new information in a new <a class="reference internal" href="../api/gammapy.data.Observation.html#gammapy.data.Observation" title="gammapy.data.Observation"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Observation</span></code></a>.
Computing pulsar phases can be done using an external library such as
<a class="reference external" href="https://nanograv-pint.readthedocs.io/en/latest/">PINT</a> or
<a class="reference external" href="https://www.pulsarastronomy.net/pulsar/software/tempo2">Tempo2</a>. A
gammapy recipe showing how to use PINT within the Gammapy framework is available
<a class="reference external" href="https://gammapy.github.io/gammapy-recipes/_build/html/notebooks/pulsar_phase/pulsar_phase_computation.html">here</a>.
For brevity, the code below shows how to add a dummy phase column to a new
<a class="reference internal" href="../api/gammapy.data.EventList.html#gammapy.data.EventList" title="gammapy.data.EventList"><code class="xref py py-obj docutils literal notranslate"><span class="pre">EventList</span></code></a> and <a class="reference internal" href="../api/gammapy.data.Observation.html#gammapy.data.Observation" title="gammapy.data.Observation"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Observation</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">gammapy.data</span><span class="w"> </span><span class="kn">import</span> <span class="n">DataStore</span><span class="p">,</span> <span class="n">Observation</span><span class="p">,</span> <span class="n">EventList</span>

<span class="c1"># read the observation</span>
<span class="n">datastore</span> <span class="o">=</span> <span class="n">DataStore</span><span class="o">.</span><span class="n">from_dir</span><span class="p">(</span><span class="s2">&quot;$GAMMAPY_DATA/hess-dl3-dr1/&quot;</span><span class="p">)</span>
<span class="n">obs</span> <span class="o">=</span> <span class="n">datastore</span><span class="o">.</span><span class="n">obs</span><span class="p">(</span><span class="mi">23523</span><span class="p">)</span>

<span class="c1"># use the phase information - dummy in this example</span>
<span class="n">phase</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">obs</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">table</span><span class="p">))</span>

<span class="c1"># create a new `EventList`</span>
<span class="n">table</span> <span class="o">=</span> <span class="n">obs</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">table</span>
<span class="n">table</span><span class="p">[</span><span class="s2">&quot;PHASE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">phase</span>
<span class="n">new_events</span> <span class="o">=</span> <span class="n">EventList</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>

<span class="c1"># copy the observation in memory, changing the events</span>
<span class="n">obs2</span> <span class="o">=</span> <span class="n">obs</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">events</span><span class="o">=</span><span class="n">new_events</span><span class="p">,</span> <span class="n">in_memory</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># The new observation and the new events table can be serialised independently</span>
<span class="n">obs2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;new_obs.fits.gz&quot;</span><span class="p">)</span>
<span class="n">obs2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;events.fits.gz&quot;</span><span class="p">,</span> <span class="n">include_irfs</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details></section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/user-guide/howto.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, The Gammapy developers.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
    
    <p>Licensed under
      <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA</a>.</p>
    <p>Examples, recipes, and other code licensed under
      <a href="https://opensource.org/license/BSD-3-Clause>" target="_blank">BSD 3-Clause "New" or "Revised"</a> license.</p>
    <p>Gammapy <a href="https://gammapy.org/DataPrivacy.html">Data Privacy</a> information.</p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    <br/>
  </p>
</div>
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>